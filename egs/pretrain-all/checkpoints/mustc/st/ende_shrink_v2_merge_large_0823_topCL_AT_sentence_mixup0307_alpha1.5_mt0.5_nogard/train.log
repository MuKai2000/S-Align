2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 5): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 4): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 7): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 2): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 3): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 6): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 1): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | fairseq.distributed.utils | distributed init (rank 0): tcp://localhost:12642
2023-08-23 01:42:58 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 1
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 5
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 4
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 7
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 2
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 3
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 6
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:1 to store for rank: 0
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 0: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 0
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 1: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 1
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 7: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 7
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 4: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 6: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 2: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 4
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 6
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 2
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 5: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | torch.distributed.distributed_c10d | Rank 3: Completed store-based barrier for key:store_based_barrier_key:1 with 8 nodes.
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 5
2023-08-23 01:42:59 | INFO | fairseq.distributed.utils | initialized host localhost.localdomain as rank 3
2023-08-23 01:43:02 | INFO | fairseq_cli.train | {'_name': None, 'common': {'_name': None, 'no_progress_bar': True, 'log_interval': 100, 'log_format': None, 'log_file': None, 'aim_repo': None, 'aim_run_hash': None, 'tensorboard_logdir': './checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', 'wandb_project': None, 'azureml_logging': False, 'seed': 1, 'cpu': False, 'tpu': False, 'bf16': False, 'memory_efficient_bf16': False, 'fp16': True, 'memory_efficient_fp16': False, 'fp16_no_flatten_grads': False, 'fp16_init_scale': 128, 'fp16_scale_window': None, 'fp16_scale_tolerance': 0.0, 'on_cpu_convert_precision': False, 'min_loss_scale': 0.0001, 'threshold_loss_scale': None, 'amp': False, 'amp_batch_retries': 2, 'amp_init_scale': 128, 'amp_scale_window': None, 'user_dir': None, 'empty_cache_freq': 0, 'all_gather_list_size': 16384, 'model_parallel_size': 1, 'quantization_config_path': None, 'profile': False, 'reset_logging': False, 'suppress_crashes': False, 'use_plasma_view': False, 'plasma_path': '/tmp/plasma'}, 'common_eval': {'_name': None, 'path': None, 'post_process': 'sentencepiece', 'quiet': False, 'model_overrides': '{}', 'results_path': None}, 'distributed_training': {'_name': None, 'distributed_world_size': 8, 'distributed_num_procs': 8, 'distributed_rank': 0, 'distributed_backend': 'nccl', 'distributed_init_method': 'tcp://localhost:12642', 'distributed_port': -1, 'device_id': 0, 'distributed_no_spawn': False, 'ddp_backend': 'no_c10d', 'ddp_comm_hook': 'none', 'bucket_cap_mb': 25, 'fix_batches_to_gpus': False, 'find_unused_parameters': False, 'gradient_as_bucket_view': False, 'fast_stat_sync': False, 'heartbeat_timeout': -1, 'broadcast_buffers': False, 'slowmo_momentum': None, 'slowmo_base_algorithm': 'localsgd', 'localsgd_frequency': 3, 'nprocs_per_node': 8, 'pipeline_model_parallel': False, 'pipeline_balance': None, 'pipeline_devices': None, 'pipeline_chunks': 0, 'pipeline_encoder_balance': None, 'pipeline_encoder_devices': None, 'pipeline_decoder_balance': None, 'pipeline_decoder_devices': None, 'pipeline_checkpoint': 'never', 'zero_sharding': 'none', 'fp16': True, 'memory_efficient_fp16': False, 'tpu': False, 'no_reshard_after_forward': False, 'fp32_reduce_scatter': False, 'cpu_offload': False, 'use_sharded_state': False, 'not_fsdp_flatten_parameters': False}, 'dataset': {'_name': None, 'num_workers': 2, 'skip_invalid_size_inputs_valid_test': True, 'max_tokens': 15000, 'batch_size': None, 'required_batch_size_multiple': 8, 'required_seq_len_multiple': 1, 'dataset_impl': None, 'data_buffer_size': 10, 'train_subset': 'train_st,train_asr', 'valid_subset': 'dev_st', 'combine_valid_subsets': None, 'ignore_unused_valid_subsets': False, 'validate_interval': 1, 'validate_interval_updates': 0, 'validate_after_updates': 0, 'fixed_validation_seed': None, 'disable_validation': False, 'max_tokens_valid': 15000, 'batch_size_valid': None, 'max_valid_steps': None, 'curriculum': 0, 'gen_subset': 'test', 'num_shards': 1, 'shard_id': 0, 'grouped_shuffling': False, 'update_epoch_batch_itr': False, 'update_ordered_indices_seed': False}, 'optimization': {'_name': None, 'max_epoch': 100, 'max_update': 50000, 'stop_time_hours': 0.0, 'clip_norm': 10.0, 'sentence_avg': False, 'update_freq': [1], 'lr': [0.0002], 'stop_min_lr': -1.0, 'use_bmuf': False, 'skip_remainder_batch': False}, 'checkpoint': {'_name': None, 'save_dir': './checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', 'restore_file': 'checkpoint_last.pt', 'continue_once': None, 'finetune_from_model': None, 'reset_dataloader': False, 'reset_lr_scheduler': False, 'reset_meters': False, 'reset_optimizer': False, 'optimizer_overrides': '{}', 'save_interval': 1, 'save_interval_updates': 2000, 'keep_interval_updates': 5, 'keep_interval_updates_pattern': -1, 'keep_last_epochs': 2, 'keep_best_checkpoints': 10, 'no_save': False, 'no_epoch_checkpoints': True, 'no_last_checkpoints': False, 'no_save_optimizer_state': False, 'best_checkpoint_metric': 'bleu', 'maximize_best_checkpoint_metric': True, 'patience': -1, 'checkpoint_suffix': '', 'checkpoint_shard_count': 1, 'load_checkpoint_on_all_dp_ranks': False, 'write_checkpoints_asynchronously': False, 'model_parallel_size': 1}, 'bmuf': {'_name': None, 'block_lr': 1.0, 'block_momentum': 0.875, 'global_sync_iter': 50, 'warmup_iterations': 500, 'use_nbm': False, 'average_sync': False, 'distributed_world_size': 8}, 'generation': {'_name': None, 'beam': 5, 'beam_mt': 0, 'nbest': 1, 'max_len_a': 0.0, 'max_len_b': 200, 'max_len_a_mt': 0.0, 'max_len_b_mt': 200, 'min_len': 1, 'match_source_len': False, 'unnormalized': False, 'no_early_stop': False, 'no_beamable_mm': False, 'lenpen': 1.0, 'lenpen_mt': 1.0, 'unkpen': 0.0, 'replace_unk': None, 'sacrebleu': False, 'score_reference': False, 'prefix_size': 0, 'no_repeat_ngram_size': 0, 'sampling': False, 'sampling_topk': -1, 'sampling_topp': -1.0, 'constraints': None, 'temperature': 1.0, 'diverse_beam_groups': -1, 'diverse_beam_strength': 0.5, 'diversity_rate': -1.0, 'print_alignment': None, 'print_step': False, 'lm_path': None, 'lm_weight': 0.0, 'iter_decode_eos_penalty': 0.0, 'iter_decode_max_iter': 10, 'iter_decode_force_max_iter': False, 'iter_decode_with_beam': 1, 'iter_decode_with_external_reranker': False, 'retain_iter_history': False, 'retain_dropout': False, 'retain_dropout_modules': None, 'decoding_format': None, 'no_seed_provided': False, 'eos_token': None}, 'eval_lm': {'_name': None, 'output_word_probs': False, 'output_word_stats': False, 'context_window': 0, 'softmax_batch': 9223372036854775807}, 'interactive': {'_name': None, 'buffer_size': 0, 'input': '-'}, 'model': Namespace(_name='s2t_joint', activation_dropout=0.1, activation_fn='relu', adam_betas='(0.9,0.98)', adam_eps=1e-08, adapter_dim=4096, adapter_dropout=0.0, adapter_layers=0, adaptive_input=False, adaptive_softmax_cutoff=None, adaptive_softmax_dropout=0, add_position_embed=True, add_position_embed_after_ctc=True, add_proj_norm=False, adversarial_training=True, aim_repo=None, aim_run_hash=None, all_gather_list_size=16384, amp=False, amp_batch_retries=2, amp_init_scale=128, amp_scale_window=None, apply_mask=True, arch='s2t_joint', at_adapte_win=False, at_level='sentence', at_low_pos=False, at_nomute=False, at_nopad=True, at_scale=1.0, attention_dropout=0.1, avg_shrink=False, azureml_logging=False, ban_cl_step=-1, batch_size=None, batch_size_valid=None, best_checkpoint_metric='bleu', bf16=False, bpe=None, broadcast_buffers=False, bucket_cap_mb=25, checkpoint_shard_count=1, checkpoint_suffix='', clip_norm=10.0, cluster_embed_path='', cnn_module_kernel=31, combine_valid_subsets=None, config_yaml='config_st.yaml', continue_once=None, contrastive_alpha=1.5, contrastive_beta=1.0, contrastive_temperature=0.1, conv_channels=512, conv_kernel_sizes='5,5', cpu=False, cpu_offload=False, criterion='label_smoothed_cross_entropy_with_w2v_ctc_shrink_joint_AT_merge', ctc_weight=0.3, curriculum=0, data='data_all_ende_lcrm', data_buffer_size=10, dataset_impl=None, ddp_backend='no_c10d', ddp_comm_hook='none', decoder_attention_heads=8, decoder_embed_dim=512, decoder_embed_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/pretrain_embeddings_wmt_ende_baseline', decoder_ffn_embed_dim=2048, decoder_input_dim=512, decoder_layerdrop=0.0, decoder_layers=6, decoder_learned_pos=False, decoder_normalize_before=True, decoder_output_dim=512, decrease_step=0, device_id=0, disable_validation=False, distributed_backend='nccl', distributed_init_method=None, distributed_no_spawn=False, distributed_num_procs=8, distributed_port=-1, distributed_rank=0, distributed_world_size=8, dropout=0.1, dropout_input=0.0, ema_decay=0.9999, ema_fp32=False, ema_seed_model=None, ema_start_update=0, ema_update_freq=1, embed_path='', embedding_l2norm=False, empty_cache_freq=0, encoder_attention_heads=8, encoder_embed_dim=512, encoder_ffn_embed_dim=2048, encoder_layers=6, encoder_normalize_before=True, eos=2, eval_bleu=True, eval_bleu_args='{}', eval_bleu_detok='space', eval_bleu_detok_args='{}', eval_bleu_remove_bpe='sentencepiece', eval_tokenized_bleu=True, fast_stat_sync=False, feature_grad_mult=0.0, final_dropout=0.1, find_unused_parameters=False, finetune_from_model=None, fix_batches_to_gpus=False, fixed_validation_seed=None, fp16=True, fp16_adam_stats=False, fp16_init_scale=128, fp16_no_flatten_grads=False, fp16_scale_tolerance=0.0, fp16_scale_window=None, fp32_reduce_scatter=False, freeze_finetune_updates=3000, gen_subset='test', get_similarity=False, gradient_as_bucket_view=False, grouped_shuffling=False, heartbeat_timeout=-1, ignore_prefix_size=0, ignore_unused_valid_subsets=False, is_shrink='uniq', keep_best_checkpoints=10, keep_interval_updates=5, keep_interval_updates_pattern=-1, keep_last_epochs=2, keep_mt_task=True, label_smoothing=0.2, latent_temp=(1, 0.1, 0.999995), layerdrop=0.0, load_checkpoint_on_all_dp_ranks=False, localsgd_frequency=3, log_file=None, log_format=None, log_interval=100, lookback=False, lr=[0.0002], lr_scheduler='inverse_sqrt', macaron_style=False, mask_channel_length=6, mask_channel_other=0, mask_channel_prob=0.25, mask_channel_selection='static', mask_length=10, mask_other=0, mask_prob=0.5, mask_selection='static', max_epoch=100, max_position_ctc=0, max_source_positions=6000, max_target_positions=1024, max_tokens=15000, max_tokens_valid=15000, max_update=50000, max_valid_steps=None, maximize_best_checkpoint_metric=True, memory_efficient_bf16=False, memory_efficient_fp16=False, merge_mt_st=True, min_loss_scale=0.0001, mixup_for_whole_model=False, mixup_rate=-0.1, model_parallel_size=1, mt_model_args=None, mt_model_filter_size=0, mt_model_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/checkpoints/wmt-en2de/ende-baseline/last8.ensemble.pt', no_epoch_checkpoints=True, no_last_checkpoints=False, no_mask_channel_overlap=False, no_mask_overlap=False, no_progress_bar=True, no_reshard_after_forward=False, no_save=False, no_save_optimizer_state=False, no_scale_embedding=False, no_seed_provided=False, no_token_positional_embeddings=False, normalize=False, not_fsdp_flatten_parameters=False, nprocs_per_node=8, num_shards=1, num_workers=2, on_cpu_convert_precision=False, optimizer='adam', optimizer_overrides='{}', pad=1, patience=-1, pipeline_balance=None, pipeline_checkpoint='never', pipeline_chunks=0, pipeline_decoder_balance=None, pipeline_decoder_devices=None, pipeline_devices=None, pipeline_encoder_balance=None, pipeline_encoder_devices=None, pipeline_model_parallel=False, plasma_path='/tmp/plasma', position_unit_size=0, post_process='sentencepiece', profile=False, quant_noise_pq=0, quantization_config_path=None, rel_pos_type='legacy', relative_attn=False, report_accuracy=True, required_batch_size_multiple=8, required_seq_len_multiple=1, reset_dataloader=False, reset_logging=False, reset_lr_scheduler=False, reset_meters=False, reset_optimizer=False, restore_file='checkpoint_last.pt', save_dir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', save_interval=1, save_interval_updates=2000, scoring='bleu', sead_layers=6, seed=1, sentence_avg=False, shard_id=0, share_ctc_embed=True, share_decoder_input_output_embed=True, share_two_encoders=True, skip_invalid_size_inputs_valid_test=True, skip_remainder_batch=False, slowmo_base_algorithm='localsgd', slowmo_momentum=None, stop_min_lr=-1.0, stop_time_hours=0, store_ema=False, suppress_crashes=False, task='joint_triple_pretraining_merge', tensorboard_logdir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', text_conv_kernel=0, threshold_loss_scale=None, tokenizer=None, tpu=False, train_config='/mnt/zhangyh/fairseq-AT/egs/pretrain-all/conf/train_shrink_AT_zyh.yaml', train_st_without_ctc=False, train_subset='train_st,train_asr', transfer_proj=False, unk=3, update_epoch_batch_itr=False, update_freq=[1], update_ordered_indices_seed=False, use_bmuf=False, use_cnn_module=True, use_ctc_cluster=False, use_ctc_loss=True, use_ctc_shrink=True, use_double_ctc=False, use_old_adam=False, use_plasma_view=False, use_sharded_state=False, use_token_contrastive=False, use_two_contrastive=False, use_w2v_ctc=True, user_dir=None, valid_subset='dev_st', validate_after_updates=0, validate_interval=1, validate_interval_updates=0, w2v_args=None, w2v_path='/mnt/zhangyh/pretrain/hubert_base_ls960.pt', wandb_project=None, warmup_init_lr=1e-07, warmup_updates=5000, weight_decay=0.0, weight_steps=5000, word_align=False, write_checkpoints_asynchronously=False, zero_infinity=True, zero_sharding='none', zero_triu=False), 'task': Namespace(_name='joint_triple_pretraining_merge', activation_dropout=0.1, activation_fn='relu', adam_betas='(0.9,0.98)', adam_eps=1e-08, adapter_dim=4096, adapter_dropout=0.0, adapter_layers=0, adaptive_input=False, adaptive_softmax_cutoff=None, adaptive_softmax_dropout=0, add_position_embed=True, add_position_embed_after_ctc=True, add_proj_norm=False, adversarial_training=True, aim_repo=None, aim_run_hash=None, all_gather_list_size=16384, amp=False, amp_batch_retries=2, amp_init_scale=128, amp_scale_window=None, apply_mask=True, arch='s2t_joint', at_adapte_win=False, at_level='sentence', at_low_pos=False, at_nomute=False, at_nopad=True, at_scale=1.0, attention_dropout=0.1, avg_shrink=False, azureml_logging=False, ban_cl_step=-1, batch_size=None, batch_size_valid=None, best_checkpoint_metric='bleu', bf16=False, bpe=None, broadcast_buffers=False, bucket_cap_mb=25, checkpoint_shard_count=1, checkpoint_suffix='', clip_norm=10.0, cluster_embed_path='', cnn_module_kernel=31, combine_valid_subsets=None, config_yaml='config_st.yaml', continue_once=None, contrastive_alpha=1.5, contrastive_beta=1.0, contrastive_temperature=0.1, conv_channels=512, conv_kernel_sizes='5,5', cpu=False, cpu_offload=False, criterion='label_smoothed_cross_entropy_with_w2v_ctc_shrink_joint_AT_merge', ctc_weight=0.3, curriculum=0, data='data_all_ende_lcrm', data_buffer_size=10, dataset_impl=None, ddp_backend='no_c10d', ddp_comm_hook='none', decoder_attention_heads=8, decoder_embed_dim=512, decoder_embed_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/pretrain_embeddings_wmt_ende_baseline', decoder_ffn_embed_dim=2048, decoder_input_dim=512, decoder_layerdrop=0.0, decoder_layers=6, decoder_learned_pos=False, decoder_normalize_before=True, decoder_output_dim=512, decrease_step=0, device_id=0, disable_validation=False, distributed_backend='nccl', distributed_init_method=None, distributed_no_spawn=False, distributed_num_procs=8, distributed_port=-1, distributed_rank=0, distributed_world_size=8, dropout=0.1, dropout_input=0.0, ema_decay=0.9999, ema_fp32=False, ema_seed_model=None, ema_start_update=0, ema_update_freq=1, embed_path='', embedding_l2norm=False, empty_cache_freq=0, encoder_attention_heads=8, encoder_embed_dim=512, encoder_ffn_embed_dim=2048, encoder_layers=6, encoder_normalize_before=True, eos=2, eval_bleu=True, eval_bleu_args='{}', eval_bleu_detok='space', eval_bleu_detok_args='{}', eval_bleu_remove_bpe='sentencepiece', eval_tokenized_bleu=True, fast_stat_sync=False, feature_grad_mult=0.0, final_dropout=0.1, find_unused_parameters=False, finetune_from_model=None, fix_batches_to_gpus=False, fixed_validation_seed=None, fp16=True, fp16_adam_stats=False, fp16_init_scale=128, fp16_no_flatten_grads=False, fp16_scale_tolerance=0.0, fp16_scale_window=None, fp32_reduce_scatter=False, freeze_finetune_updates=3000, gen_subset='test', get_similarity=False, gradient_as_bucket_view=False, grouped_shuffling=False, heartbeat_timeout=-1, ignore_prefix_size=0, ignore_unused_valid_subsets=False, is_shrink='uniq', keep_best_checkpoints=10, keep_interval_updates=5, keep_interval_updates_pattern=-1, keep_last_epochs=2, keep_mt_task=True, label_smoothing=0.2, latent_temp=(1, 0.1, 0.999995), layerdrop=0.0, load_checkpoint_on_all_dp_ranks=False, localsgd_frequency=3, log_file=None, log_format=None, log_interval=100, lookback=False, lr=[0.0002], lr_scheduler='inverse_sqrt', macaron_style=False, mask_channel_length=6, mask_channel_other=0, mask_channel_prob=0.25, mask_channel_selection='static', mask_length=10, mask_other=0, mask_prob=0.5, mask_selection='static', max_epoch=100, max_position_ctc=0, max_source_positions=6000, max_target_positions=1024, max_tokens=15000, max_tokens_valid=15000, max_update=50000, max_valid_steps=None, maximize_best_checkpoint_metric=True, memory_efficient_bf16=False, memory_efficient_fp16=False, merge_mt_st=True, min_loss_scale=0.0001, mixup_for_whole_model=False, mixup_rate=-0.1, model_parallel_size=1, mt_model_args=None, mt_model_filter_size=0, mt_model_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/checkpoints/wmt-en2de/ende-baseline/last8.ensemble.pt', no_epoch_checkpoints=True, no_last_checkpoints=False, no_mask_channel_overlap=False, no_mask_overlap=False, no_progress_bar=True, no_reshard_after_forward=False, no_save=False, no_save_optimizer_state=False, no_scale_embedding=False, no_seed_provided=False, no_token_positional_embeddings=False, normalize=False, not_fsdp_flatten_parameters=False, nprocs_per_node=8, num_shards=1, num_workers=2, on_cpu_convert_precision=False, optimizer='adam', optimizer_overrides='{}', pad=1, patience=-1, pipeline_balance=None, pipeline_checkpoint='never', pipeline_chunks=0, pipeline_decoder_balance=None, pipeline_decoder_devices=None, pipeline_devices=None, pipeline_encoder_balance=None, pipeline_encoder_devices=None, pipeline_model_parallel=False, plasma_path='/tmp/plasma', position_unit_size=0, post_process='sentencepiece', profile=False, quant_noise_pq=0, quantization_config_path=None, rel_pos_type='legacy', relative_attn=False, report_accuracy=True, required_batch_size_multiple=8, required_seq_len_multiple=1, reset_dataloader=False, reset_logging=False, reset_lr_scheduler=False, reset_meters=False, reset_optimizer=False, restore_file='checkpoint_last.pt', save_dir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', save_interval=1, save_interval_updates=2000, scoring='bleu', sead_layers=6, seed=1, sentence_avg=False, shard_id=0, share_ctc_embed=True, share_decoder_input_output_embed=True, share_two_encoders=True, skip_invalid_size_inputs_valid_test=True, skip_remainder_batch=False, slowmo_base_algorithm='localsgd', slowmo_momentum=None, stop_min_lr=-1.0, stop_time_hours=0, store_ema=False, suppress_crashes=False, task='joint_triple_pretraining_merge', tensorboard_logdir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', text_conv_kernel=0, threshold_loss_scale=None, tokenizer=None, tpu=False, train_config='/mnt/zhangyh/fairseq-AT/egs/pretrain-all/conf/train_shrink_AT_zyh.yaml', train_st_without_ctc=False, train_subset='train_st,train_asr', transfer_proj=False, unk=3, update_epoch_batch_itr=False, update_freq=[1], update_ordered_indices_seed=False, use_bmuf=False, use_cnn_module=True, use_ctc_cluster=False, use_ctc_loss=True, use_ctc_shrink=True, use_double_ctc=False, use_old_adam=False, use_plasma_view=False, use_sharded_state=False, use_token_contrastive=False, use_two_contrastive=False, use_w2v_ctc=True, user_dir=None, valid_subset='dev_st', validate_after_updates=0, validate_interval=1, validate_interval_updates=0, w2v_args=None, w2v_path='/mnt/zhangyh/pretrain/hubert_base_ls960.pt', wandb_project=None, warmup_init_lr=1e-07, warmup_updates=5000, weight_decay=0.0, weight_steps=5000, word_align=False, write_checkpoints_asynchronously=False, zero_infinity=True, zero_sharding='none', zero_triu=False), 'criterion': Namespace(_name='label_smoothed_cross_entropy_with_w2v_ctc_shrink_joint_AT_merge', activation_dropout=0.1, activation_fn='relu', adam_betas='(0.9,0.98)', adam_eps=1e-08, adapter_dim=4096, adapter_dropout=0.0, adapter_layers=0, adaptive_input=False, adaptive_softmax_cutoff=None, adaptive_softmax_dropout=0, add_position_embed=True, add_position_embed_after_ctc=True, add_proj_norm=False, adversarial_training=True, aim_repo=None, aim_run_hash=None, all_gather_list_size=16384, amp=False, amp_batch_retries=2, amp_init_scale=128, amp_scale_window=None, apply_mask=True, arch='s2t_joint', at_adapte_win=False, at_level='sentence', at_low_pos=False, at_nomute=False, at_nopad=True, at_scale=1.0, attention_dropout=0.1, avg_shrink=False, azureml_logging=False, ban_cl_step=-1, batch_size=None, batch_size_valid=None, best_checkpoint_metric='bleu', bf16=False, bpe=None, broadcast_buffers=False, bucket_cap_mb=25, checkpoint_shard_count=1, checkpoint_suffix='', clip_norm=10.0, cluster_embed_path='', cnn_module_kernel=31, combine_valid_subsets=None, config_yaml='config_st.yaml', continue_once=None, contrastive_alpha=1.5, contrastive_beta=1.0, contrastive_temperature=0.1, conv_channels=512, conv_kernel_sizes='5,5', cpu=False, cpu_offload=False, criterion='label_smoothed_cross_entropy_with_w2v_ctc_shrink_joint_AT_merge', ctc_weight=0.3, curriculum=0, data='data_all_ende_lcrm', data_buffer_size=10, dataset_impl=None, ddp_backend='no_c10d', ddp_comm_hook='none', decoder_attention_heads=8, decoder_embed_dim=512, decoder_embed_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/pretrain_embeddings_wmt_ende_baseline', decoder_ffn_embed_dim=2048, decoder_input_dim=512, decoder_layerdrop=0.0, decoder_layers=6, decoder_learned_pos=False, decoder_normalize_before=True, decoder_output_dim=512, decrease_step=0, device_id=0, disable_validation=False, distributed_backend='nccl', distributed_init_method=None, distributed_no_spawn=False, distributed_num_procs=8, distributed_port=-1, distributed_rank=0, distributed_world_size=8, dropout=0.1, dropout_input=0.0, ema_decay=0.9999, ema_fp32=False, ema_seed_model=None, ema_start_update=0, ema_update_freq=1, embed_path='', embedding_l2norm=False, empty_cache_freq=0, encoder_attention_heads=8, encoder_embed_dim=512, encoder_ffn_embed_dim=2048, encoder_layers=6, encoder_normalize_before=True, eos=2, eval_bleu=True, eval_bleu_args='{}', eval_bleu_detok='space', eval_bleu_detok_args='{}', eval_bleu_remove_bpe='sentencepiece', eval_tokenized_bleu=True, fast_stat_sync=False, feature_grad_mult=0.0, final_dropout=0.1, find_unused_parameters=False, finetune_from_model=None, fix_batches_to_gpus=False, fixed_validation_seed=None, fp16=True, fp16_adam_stats=False, fp16_init_scale=128, fp16_no_flatten_grads=False, fp16_scale_tolerance=0.0, fp16_scale_window=None, fp32_reduce_scatter=False, freeze_finetune_updates=3000, gen_subset='test', get_similarity=False, gradient_as_bucket_view=False, grouped_shuffling=False, heartbeat_timeout=-1, ignore_prefix_size=0, ignore_unused_valid_subsets=False, is_shrink='uniq', keep_best_checkpoints=10, keep_interval_updates=5, keep_interval_updates_pattern=-1, keep_last_epochs=2, keep_mt_task=True, label_smoothing=0.2, latent_temp=(1, 0.1, 0.999995), layerdrop=0.0, load_checkpoint_on_all_dp_ranks=False, localsgd_frequency=3, log_file=None, log_format=None, log_interval=100, lookback=False, lr=[0.0002], lr_scheduler='inverse_sqrt', macaron_style=False, mask_channel_length=6, mask_channel_other=0, mask_channel_prob=0.25, mask_channel_selection='static', mask_length=10, mask_other=0, mask_prob=0.5, mask_selection='static', max_epoch=100, max_position_ctc=0, max_source_positions=6000, max_target_positions=1024, max_tokens=15000, max_tokens_valid=15000, max_update=50000, max_valid_steps=None, maximize_best_checkpoint_metric=True, memory_efficient_bf16=False, memory_efficient_fp16=False, merge_mt_st=True, min_loss_scale=0.0001, mixup_for_whole_model=False, mixup_rate=-0.1, model_parallel_size=1, mt_model_args=None, mt_model_filter_size=0, mt_model_path='/mnt/zhangyh/fairseq-AT/egs/machine_translation/checkpoints/wmt-en2de/ende-baseline/last8.ensemble.pt', no_epoch_checkpoints=True, no_last_checkpoints=False, no_mask_channel_overlap=False, no_mask_overlap=False, no_progress_bar=True, no_reshard_after_forward=False, no_save=False, no_save_optimizer_state=False, no_scale_embedding=False, no_seed_provided=False, no_token_positional_embeddings=False, normalize=False, not_fsdp_flatten_parameters=False, nprocs_per_node=8, num_shards=1, num_workers=2, on_cpu_convert_precision=False, optimizer='adam', optimizer_overrides='{}', pad=1, patience=-1, pipeline_balance=None, pipeline_checkpoint='never', pipeline_chunks=0, pipeline_decoder_balance=None, pipeline_decoder_devices=None, pipeline_devices=None, pipeline_encoder_balance=None, pipeline_encoder_devices=None, pipeline_model_parallel=False, plasma_path='/tmp/plasma', position_unit_size=0, post_process='sentencepiece', profile=False, quant_noise_pq=0, quantization_config_path=None, rel_pos_type='legacy', relative_attn=False, report_accuracy=True, required_batch_size_multiple=8, required_seq_len_multiple=1, reset_dataloader=False, reset_logging=False, reset_lr_scheduler=False, reset_meters=False, reset_optimizer=False, restore_file='checkpoint_last.pt', save_dir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', save_interval=1, save_interval_updates=2000, scoring='bleu', sead_layers=6, seed=1, sentence_avg=False, shard_id=0, share_ctc_embed=True, share_decoder_input_output_embed=True, share_two_encoders=True, skip_invalid_size_inputs_valid_test=True, skip_remainder_batch=False, slowmo_base_algorithm='localsgd', slowmo_momentum=None, stop_min_lr=-1.0, stop_time_hours=0, store_ema=False, suppress_crashes=False, task='joint_triple_pretraining_merge', tensorboard_logdir='./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard', text_conv_kernel=0, threshold_loss_scale=None, tokenizer=None, tpu=False, train_config='/mnt/zhangyh/fairseq-AT/egs/pretrain-all/conf/train_shrink_AT_zyh.yaml', train_st_without_ctc=False, train_subset='train_st,train_asr', transfer_proj=False, unk=3, update_epoch_batch_itr=False, update_freq=[1], update_ordered_indices_seed=False, use_bmuf=False, use_cnn_module=True, use_ctc_cluster=False, use_ctc_loss=True, use_ctc_shrink=True, use_double_ctc=False, use_old_adam=False, use_plasma_view=False, use_sharded_state=False, use_token_contrastive=False, use_two_contrastive=False, use_w2v_ctc=True, user_dir=None, valid_subset='dev_st', validate_after_updates=0, validate_interval=1, validate_interval_updates=0, w2v_args=None, w2v_path='/mnt/zhangyh/pretrain/hubert_base_ls960.pt', wandb_project=None, warmup_init_lr=1e-07, warmup_updates=5000, weight_decay=0.0, weight_steps=5000, word_align=False, write_checkpoints_asynchronously=False, zero_infinity=True, zero_sharding='none', zero_triu=False), 'optimizer': {'_name': 'adam', 'adam_betas': '(0.9,0.98)', 'adam_eps': 1e-08, 'weight_decay': 0.0, 'use_old_adam': False, 'fp16_adam_stats': False, 'tpu': False, 'lr': [0.0002]}, 'lr_scheduler': {'_name': 'inverse_sqrt', 'warmup_updates': 5000, 'warmup_init_lr': 1e-07, 'lr': [0.0002]}, 'scoring': {'_name': 'bleu', 'pad': 1, 'eos': 2, 'unk': 3}, 'bpe': None, 'tokenizer': None, 'ema': {'_name': None, 'store_ema': False, 'ema_decay': 0.9999, 'ema_start_update': 0, 'ema_seed_model': None, 'ema_update_freq': 1, 'ema_fp32': False}}
2023-08-23 01:43:02 | INFO | fairseq.tasks.joint_triple_pretraining_merge | dictionary size (dict.wrd.txt): 10,000
2023-08-23 01:43:02 | INFO | fairseq.tasks.joint_triple_pretraining_merge | asr dictionary size (dict.wrd.txt): 10,000
2023-08-23 01:43:02 | INFO | fairseq.tasks.joint_triple_pretraining_merge | cluster dictionary size (kmeans100.convert.txt): 5,224
2023-08-23 01:43:02 | INFO | fairseq.tasks.joint_triple_pretraining_merge | Initial task weight: asr 1.0: mt 0.5
2023-08-23 01:43:02 | INFO | root | load pretrained embeddings: /mnt/zhangyh/fairseq-AT/egs/machine_translation/pretrain_embeddings_wmt_ende_baseline
2023-08-23 01:43:07 | INFO | fairseq.tasks.hubert_pretraining | current directory is /mnt/zhangyh/fairseq-AT/egs/pretrain-all
2023-08-23 01:43:07 | INFO | fairseq.tasks.hubert_pretraining | HubertPretrainingTask Config {'_name': 'hubert_pretraining', 'data': 'data_all_ende_lcrm', 'fine_tuning': False, 'labels': ['layer6.km500'], 'label_dir': None, 'label_rate': 50.0, 'sample_rate': 16000, 'normalize': False, 'enable_padding': False, 'max_keep_size': None, 'max_sample_size': 250000, 'min_sample_size': 32000, 'single_target': False, 'random_crop': True, 'pad_audio': False}
2023-08-23 01:43:07 | INFO | fairseq.models.hubert.hubert | HubertModel Config: {'_name': 'hubert', 'label_rate': 50.0, 'extractor_mode': default, 'encoder_layers': 12, 'encoder_embed_dim': 768, 'encoder_ffn_embed_dim': 3072, 'encoder_attention_heads': 12, 'activation_fn': gelu, 'layer_type': transformer, 'dropout': 0.1, 'attention_dropout': 0.1, 'activation_dropout': 0.1, 'encoder_layerdrop': 0.0, 'dropout_input': 0.0, 'dropout_features': 0.1, 'final_dim': 256, 'untie_final_proj': False, 'layer_norm_first': False, 'conv_feature_layers': '[(512,10,5)] + [(512,3,2)] * 4 + [(512,2,2)] * 2', 'conv_bias': False, 'logit_temp': 0.1, 'target_glu': False, 'feature_grad_mult': 0.0, 'mask_length': 10, 'mask_prob': 0.5, 'mask_selection': static, 'mask_other': 0.0, 'no_mask_overlap': False, 'mask_min_space': 1, 'mask_channel_length': 6, 'mask_channel_prob': 0.25, 'mask_channel_selection': static, 'mask_channel_other': 0.0, 'no_mask_channel_overlap': False, 'mask_channel_min_space': 1, 'conv_pos': 128, 'conv_pos_groups': 16, 'latent_temp': [2.0, 0.5, 0.999995], 'skip_masked': False, 'skip_nomask': False, 'checkpoint_activations': False, 'required_seq_len_multiple': 2, 'depthwise_conv_kernel_size': 31, 'attn_type': '', 'pos_enc_type': 'abs', 'fp16': True}
2023-08-23 01:43:08 | INFO | root | load pretrained hubert
2023-08-23 01:43:16 | INFO | root | load pretrained embedding as ctc proj: /mnt/zhangyh/fairseq-AT/egs/machine_translation/pretrain_embeddings_wmt_ende_baseline
2023-08-23 01:43:19 | INFO | root | load pretrained encoder: /mnt/zhangyh/fairseq-AT/egs/machine_translation/checkpoints/wmt-en2de/ende-baseline/last8.ensemble.pt
2023-08-23 01:43:24 | INFO | root | load pretrained decoder: /mnt/zhangyh/fairseq-AT/egs/machine_translation/checkpoints/wmt-en2de/ende-baseline/last8.ensemble.pt
2023-08-23 01:43:24 | INFO | root | share the sematic adapter and textual encoder
2023-08-23 01:43:24 | INFO | fairseq_cli.train | S2TJoint(
  (acoustic_encoder): AcousticEncoder(
    (compress_ffn): Linear(in_features=768, out_features=512, bias=True)
    (proj): Linear(in_features=512, out_features=10000, bias=False)
    (w2v_model): HubertModel(
      (feature_extractor): ConvFeatureExtractionModel(
        (conv_layers): ModuleList(
          (0): Sequential(
            (0): Conv1d(1, 512, kernel_size=(10,), stride=(5,), bias=False)
            (1): Dropout(p=0.0, inplace=False)
            (2): Fp32GroupNorm(512, 512, eps=1e-05, affine=True)
            (3): GELU(approximate='none')
          )
          (1-4): 4 x Sequential(
            (0): Conv1d(512, 512, kernel_size=(3,), stride=(2,), bias=False)
            (1): Dropout(p=0.0, inplace=False)
            (2): GELU(approximate='none')
          )
          (5-6): 2 x Sequential(
            (0): Conv1d(512, 512, kernel_size=(2,), stride=(2,), bias=False)
            (1): Dropout(p=0.0, inplace=False)
            (2): GELU(approximate='none')
          )
        )
      )
      (post_extract_proj): Linear(in_features=512, out_features=768, bias=True)
      (dropout_input): Dropout(p=0.0, inplace=False)
      (dropout_features): Dropout(p=0.1, inplace=False)
      (encoder): TransformerEncoder(
        (pos_conv): Sequential(
          (0): Conv1d(768, 768, kernel_size=(128,), stride=(1,), padding=(64,), groups=16)
          (1): SamePad()
          (2): GELU(approximate='none')
        )
        (layers): ModuleList(
          (0-11): 12 x TransformerSentenceEncoderLayer(
            (self_attn): MultiheadAttention(
              (dropout_module): FairseqDropout()
              (k_proj): Linear(in_features=768, out_features=768, bias=True)
              (v_proj): Linear(in_features=768, out_features=768, bias=True)
              (q_proj): Linear(in_features=768, out_features=768, bias=True)
              (out_proj): Linear(in_features=768, out_features=768, bias=True)
            )
            (dropout1): Dropout(p=0.1, inplace=False)
            (dropout2): Dropout(p=0.1, inplace=False)
            (dropout3): Dropout(p=0.1, inplace=False)
            (self_attn_layer_norm): FusedLayerNorm(torch.Size([768]), eps=1e-05, elementwise_affine=True)
            (fc1): Linear(in_features=768, out_features=3072, bias=True)
            (fc2): Linear(in_features=3072, out_features=768, bias=True)
            (final_layer_norm): FusedLayerNorm(torch.Size([768]), eps=1e-05, elementwise_affine=True)
          )
        )
        (layer_norm): FusedLayerNorm(torch.Size([768]), eps=1e-05, elementwise_affine=True)
      )
      (layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
      (final_proj): None
    )
    (noad): NormalAdapter(
      (subsample): Conv1dSubsampler(
        (conv_layers): ModuleList(
          (0): Conv1d(512, 512, kernel_size=(5,), stride=(2,), padding=(2,))
          (1): Conv1d(256, 1024, kernel_size=(5,), stride=(2,), padding=(2,))
        )
      )
      (layers): ModuleList()
    )
    (sead): SemanticAdapter(
      (embed_positions): SinusoidalPositionalEmbedding()
      (layers): ModuleList(
        (0-5): 6 x TransformerEncoderLayerBase(
          (self_attn): MultiheadAttention(
            (dropout_module): FairseqDropout()
            (k_proj): Linear(in_features=512, out_features=512, bias=True)
            (v_proj): Linear(in_features=512, out_features=512, bias=True)
            (q_proj): Linear(in_features=512, out_features=512, bias=True)
            (out_proj): Linear(in_features=512, out_features=512, bias=True)
          )
          (self_attn_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
          (dropout_module): FairseqDropout()
          (activation_dropout_module): FairseqDropout()
          (fc1): Linear(in_features=512, out_features=2048, bias=True)
          (fc2): Linear(in_features=2048, out_features=512, bias=True)
          (final_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
        )
      )
      (layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
    )
    (final_dropout): Dropout(p=0.1, inplace=False)
    (shrink_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
  )
  (textual_encoder): MTModelEncoder(
    (dropout_module): FairseqDropout()
    (embed_tokens): Embedding(10000, 512, padding_idx=1)
    (embed_positions): SinusoidalPositionalEmbedding()
    (layers): ModuleList(
      (0-5): 6 x TransformerEncoderLayerBase(
        (self_attn): MultiheadAttention(
          (dropout_module): FairseqDropout()
          (k_proj): Linear(in_features=512, out_features=512, bias=True)
          (v_proj): Linear(in_features=512, out_features=512, bias=True)
          (q_proj): Linear(in_features=512, out_features=512, bias=True)
          (out_proj): Linear(in_features=512, out_features=512, bias=True)
        )
        (self_attn_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
        (dropout_module): FairseqDropout()
        (activation_dropout_module): FairseqDropout()
        (fc1): Linear(in_features=512, out_features=2048, bias=True)
        (fc2): Linear(in_features=2048, out_features=512, bias=True)
        (final_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
      )
    )
    (layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
  )
  (decoder): TransformerDecoderScriptable(
    (dropout_module): FairseqDropout()
    (embed_tokens): Embedding(10000, 512, padding_idx=1)
    (embed_positions): SinusoidalPositionalEmbedding()
    (layers): ModuleList(
      (0-5): 6 x TransformerDecoderLayerBase(
        (dropout_module): FairseqDropout()
        (self_attn): MultiheadAttention(
          (dropout_module): FairseqDropout()
          (k_proj): Linear(in_features=512, out_features=512, bias=True)
          (v_proj): Linear(in_features=512, out_features=512, bias=True)
          (q_proj): Linear(in_features=512, out_features=512, bias=True)
          (out_proj): Linear(in_features=512, out_features=512, bias=True)
        )
        (activation_dropout_module): FairseqDropout()
        (self_attn_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
        (encoder_attn): MultiheadAttention(
          (dropout_module): FairseqDropout()
          (k_proj): Linear(in_features=512, out_features=512, bias=True)
          (v_proj): Linear(in_features=512, out_features=512, bias=True)
          (q_proj): Linear(in_features=512, out_features=512, bias=True)
          (out_proj): Linear(in_features=512, out_features=512, bias=True)
        )
        (encoder_attn_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
        (fc1): Linear(in_features=512, out_features=2048, bias=True)
        (fc2): Linear(in_features=2048, out_features=512, bias=True)
        (final_layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
      )
    )
    (layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
    (output_projection): Linear(in_features=512, out_features=10000, bias=False)
  )
  (task_net): TaskNetwork(
    (layer_norm): FusedLayerNorm(torch.Size([512]), eps=1e-05, elementwise_affine=True)
    (down_proj): Linear(in_features=512, out_features=256, bias=True)
    (up_proj): Linear(in_features=256, out_features=512, bias=True)
    (dropout_module): FairseqDropout()
    (task_proj): Linear(in_features=512, out_features=1, bias=False)
  )
)
2023-08-23 01:43:24 | INFO | fairseq_cli.train | task: JointTriplePretrainingMergeTask
2023-08-23 01:43:24 | INFO | fairseq_cli.train | model: S2TJoint
2023-08-23 01:43:24 | INFO | fairseq_cli.train | criterion: LabelSmoothedCrossEntropywithW2vCtcShrinkJointATMerge
2023-08-23 01:43:24 | INFO | fairseq_cli.train | num. shared model params: 147,044,480 (num. trained: 147,044,480)
2023-08-23 01:43:24 | INFO | fairseq_cli.train | num. expert model params: 0 (num. trained: 0)
2023-08-23 01:43:24 | INFO | fairseq.tasks.speech_to_text | pre-tokenizer: {'tokenizer': None}
2023-08-23 01:43:24 | INFO | fairseq.tasks.speech_to_text | tokenizer: {'bpe': 'sentencepiece', 'sentencepiece_model': '/mnt/zhangyh/fairseq-AT/egs/pretrain-all/data_all_ende_lcrm/sentencepiece.bpe.model'}
2023-08-23 01:43:24 | INFO | fairseq.tasks.joint_triple_pretraining_merge | src tokenizer: {'bpe': 'sentencepiece', 'sentencepiece_model': '/mnt/zhangyh/fairseq-AT/egs/pretrain-all/data_all_ende_lcrm/sentencepiece.bpe.model'}
2023-08-23 01:43:24 | INFO | fairseq.data.audio.triple_dataset | TripleDataset(split="dev_st", n_samples=1418, prepend_tgt_lang_tag=False, shuffle=False, transforms=None)
2023-08-23 01:43:40 | INFO | torch.distributed.distributed_c10d | Added key: store_based_barrier_key:2 to store for rank: 0
2023-08-23 01:43:43 | INFO | torch.distributed.distributed_c10d | Rank 0: Completed store-based barrier for key:store_based_barrier_key:2 with 8 nodes.
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.weight <- textual_encoder.embed_tokens.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.weight <- decoder.embed_tokens.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.weight <- decoder.output_projection.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.0.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.1.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.2.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.3.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.4.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.5.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- acoustic_encoder.w2v_model.feature_extractor.conv_layers.6.0.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- decoder.output_projection.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.proj.bias <- task_net.task_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.k_proj.weight <- textual_encoder.layers.0.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.k_proj.bias <- textual_encoder.layers.0.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.v_proj.weight <- textual_encoder.layers.0.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.v_proj.bias <- textual_encoder.layers.0.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.q_proj.weight <- textual_encoder.layers.0.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.q_proj.bias <- textual_encoder.layers.0.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.out_proj.weight <- textual_encoder.layers.0.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn.out_proj.bias <- textual_encoder.layers.0.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn_layer_norm.weight <- textual_encoder.layers.0.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.self_attn_layer_norm.bias <- textual_encoder.layers.0.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.fc1.weight <- textual_encoder.layers.0.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.fc1.bias <- textual_encoder.layers.0.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.fc2.weight <- textual_encoder.layers.0.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.fc2.bias <- textual_encoder.layers.0.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.final_layer_norm.weight <- textual_encoder.layers.0.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.0.final_layer_norm.bias <- textual_encoder.layers.0.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.k_proj.weight <- textual_encoder.layers.1.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.k_proj.bias <- textual_encoder.layers.1.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.v_proj.weight <- textual_encoder.layers.1.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.v_proj.bias <- textual_encoder.layers.1.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.q_proj.weight <- textual_encoder.layers.1.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.q_proj.bias <- textual_encoder.layers.1.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.out_proj.weight <- textual_encoder.layers.1.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn.out_proj.bias <- textual_encoder.layers.1.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn_layer_norm.weight <- textual_encoder.layers.1.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.self_attn_layer_norm.bias <- textual_encoder.layers.1.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.fc1.weight <- textual_encoder.layers.1.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.fc1.bias <- textual_encoder.layers.1.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.fc2.weight <- textual_encoder.layers.1.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.fc2.bias <- textual_encoder.layers.1.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.final_layer_norm.weight <- textual_encoder.layers.1.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.1.final_layer_norm.bias <- textual_encoder.layers.1.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.k_proj.weight <- textual_encoder.layers.2.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.k_proj.bias <- textual_encoder.layers.2.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.v_proj.weight <- textual_encoder.layers.2.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.v_proj.bias <- textual_encoder.layers.2.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.q_proj.weight <- textual_encoder.layers.2.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.q_proj.bias <- textual_encoder.layers.2.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.out_proj.weight <- textual_encoder.layers.2.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn.out_proj.bias <- textual_encoder.layers.2.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn_layer_norm.weight <- textual_encoder.layers.2.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.self_attn_layer_norm.bias <- textual_encoder.layers.2.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.fc1.weight <- textual_encoder.layers.2.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.fc1.bias <- textual_encoder.layers.2.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.fc2.weight <- textual_encoder.layers.2.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.fc2.bias <- textual_encoder.layers.2.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.final_layer_norm.weight <- textual_encoder.layers.2.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.2.final_layer_norm.bias <- textual_encoder.layers.2.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.k_proj.weight <- textual_encoder.layers.3.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.k_proj.bias <- textual_encoder.layers.3.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.v_proj.weight <- textual_encoder.layers.3.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.v_proj.bias <- textual_encoder.layers.3.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.q_proj.weight <- textual_encoder.layers.3.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.q_proj.bias <- textual_encoder.layers.3.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.out_proj.weight <- textual_encoder.layers.3.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn.out_proj.bias <- textual_encoder.layers.3.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn_layer_norm.weight <- textual_encoder.layers.3.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.self_attn_layer_norm.bias <- textual_encoder.layers.3.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.fc1.weight <- textual_encoder.layers.3.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.fc1.bias <- textual_encoder.layers.3.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.fc2.weight <- textual_encoder.layers.3.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.fc2.bias <- textual_encoder.layers.3.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.final_layer_norm.weight <- textual_encoder.layers.3.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.3.final_layer_norm.bias <- textual_encoder.layers.3.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.k_proj.weight <- textual_encoder.layers.4.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.k_proj.bias <- textual_encoder.layers.4.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.v_proj.weight <- textual_encoder.layers.4.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.v_proj.bias <- textual_encoder.layers.4.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.q_proj.weight <- textual_encoder.layers.4.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.q_proj.bias <- textual_encoder.layers.4.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.out_proj.weight <- textual_encoder.layers.4.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn.out_proj.bias <- textual_encoder.layers.4.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn_layer_norm.weight <- textual_encoder.layers.4.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.self_attn_layer_norm.bias <- textual_encoder.layers.4.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.fc1.weight <- textual_encoder.layers.4.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.fc1.bias <- textual_encoder.layers.4.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.fc2.weight <- textual_encoder.layers.4.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.fc2.bias <- textual_encoder.layers.4.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.final_layer_norm.weight <- textual_encoder.layers.4.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.4.final_layer_norm.bias <- textual_encoder.layers.4.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.k_proj.weight <- textual_encoder.layers.5.self_attn.k_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.k_proj.bias <- textual_encoder.layers.5.self_attn.k_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.v_proj.weight <- textual_encoder.layers.5.self_attn.v_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.v_proj.bias <- textual_encoder.layers.5.self_attn.v_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.q_proj.weight <- textual_encoder.layers.5.self_attn.q_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.q_proj.bias <- textual_encoder.layers.5.self_attn.q_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.out_proj.weight <- textual_encoder.layers.5.self_attn.out_proj.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn.out_proj.bias <- textual_encoder.layers.5.self_attn.out_proj.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn_layer_norm.weight <- textual_encoder.layers.5.self_attn_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.self_attn_layer_norm.bias <- textual_encoder.layers.5.self_attn_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.fc1.weight <- textual_encoder.layers.5.fc1.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.fc1.bias <- textual_encoder.layers.5.fc1.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.fc2.weight <- textual_encoder.layers.5.fc2.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.fc2.bias <- textual_encoder.layers.5.fc2.bias
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.final_layer_norm.weight <- textual_encoder.layers.5.final_layer_norm.weight
2023-08-23 01:43:43 | INFO | fairseq.trainer | detected shared parameter: acoustic_encoder.sead.layers.5.final_layer_norm.bias <- textual_encoder.layers.5.final_layer_norm.bias
2023-08-23 01:43:43 | INFO | fairseq.utils | ***********************CUDA enviroments for all 8 workers***********************
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   0: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   1: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   2: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   3: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   4: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   5: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   6: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | rank   7: capabilities =  8.6  ; total memory = 23.700 GB ; name = NVIDIA GeForce RTX 3090                 
2023-08-23 01:43:43 | INFO | fairseq.utils | ***********************CUDA enviroments for all 8 workers***********************
2023-08-23 01:43:43 | INFO | fairseq_cli.train | training on 8 devices (GPUs/TPUs)
2023-08-23 01:43:43 | INFO | fairseq_cli.train | max tokens per device = 15000 and max sentences per device = None
2023-08-23 01:43:43 | INFO | fairseq.trainer | Preparing to load checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_last.pt
2023-08-23 01:43:43 | INFO | fairseq.trainer | No existing checkpoint found ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_last.pt
2023-08-23 01:43:43 | INFO | fairseq.trainer | loading train data for epoch 1
2023-08-23 01:43:43 | INFO | fairseq.tasks.speech_to_text | pre-tokenizer: {'tokenizer': None}
2023-08-23 01:43:43 | INFO | fairseq.tasks.speech_to_text | tokenizer: {'bpe': 'sentencepiece', 'sentencepiece_model': '/mnt/zhangyh/fairseq-AT/egs/pretrain-all/data_all_ende_lcrm/sentencepiece.bpe.model'}
2023-08-23 01:43:43 | INFO | fairseq.tasks.joint_triple_pretraining_merge | src tokenizer: {'bpe': 'sentencepiece', 'sentencepiece_model': '/mnt/zhangyh/fairseq-AT/egs/pretrain-all/data_all_ende_lcrm/sentencepiece.bpe.model'}
2023-08-23 01:43:45 | INFO | fairseq.data.audio.triple_dataset | TripleDataset(split="train_asr", n_samples=225277, prepend_tgt_lang_tag=False, shuffle=False, transforms=None)
2023-08-23 01:43:47 | INFO | fairseq.data.audio.triple_dataset | TripleDataset(split="train_st", n_samples=225277, prepend_tgt_lang_tag=False, shuffle=False, transforms=None)
2023-08-23 01:44:28 | INFO | fairseq.optim.adam | using FusedAdam
2023-08-23 01:44:28 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 01:44:28 | INFO | fairseq.trainer | begin training epoch 1
2023-08-23 01:44:28 | INFO | fairseq_cli.train | Start iterating over samples
True False
None None None
2023-08-23 01:44:39 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 64.0
True False
None None None
2023-08-23 01:44:41 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 01:44:52 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 16.0
True False
None None None
2023-08-23 01:44:56 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 8.0
True False
None None None
True False
None None None
True False
None None None
2023-08-23 01:45:40 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 4.0
2023-08-23 01:45:43 | INFO | train_inner | epoch 001:    105 / 1474 loss=20.038, trans_loss=5.871, nll_loss=4.679, w2v_ctc_loss=22.307, task_loss=1.676, contrastive_loss=3.276, total=4220.8, n_correct=124.01, ppl=25.62, accuracy=2.938, wps=19838.9, ups=1.58, wpb=12594.8, bsz=477.2, num_updates=100, lr=4.098e-06, gnorm=2.809, clip=0, loss_scale=4, train_wall=68, gb_free=19.4, wall=119
2023-08-23 01:46:43 | INFO | train_inner | epoch 001:    205 / 1474 loss=16.612, trans_loss=5.855, nll_loss=4.685, w2v_ctc_loss=17.115, task_loss=1.618, contrastive_loss=3.237, total=4114.86, n_correct=115.66, ppl=25.73, accuracy=2.811, wps=20422.1, ups=1.66, wpb=12286.8, bsz=458.8, num_updates=200, lr=8.096e-06, gnorm=7.313, clip=18, loss_scale=4, train_wall=60, gb_free=19.3, wall=180
2023-08-23 01:47:44 | INFO | train_inner | epoch 001:    305 / 1474 loss=9.925, trans_loss=5.841, nll_loss=4.705, w2v_ctc_loss=6.901, task_loss=1.567, contrastive_loss=3.175, total=4080.91, n_correct=110.42, ppl=26.09, accuracy=2.706, wps=19902.9, ups=1.63, wpb=12190.4, bsz=439.4, num_updates=300, lr=1.2094e-05, gnorm=2.082, clip=0, loss_scale=4, train_wall=61, gb_free=18.6, wall=241
2023-08-23 01:48:45 | INFO | train_inner | epoch 001:    405 / 1474 loss=9.408, trans_loss=5.811, nll_loss=4.702, w2v_ctc_loss=6.096, task_loss=1.347, contrastive_loss=3.207, total=4176.41, n_correct=96.2, ppl=26.02, accuracy=2.303, wps=20559.1, ups=1.65, wpb=12470, bsz=461.3, num_updates=400, lr=1.6092e-05, gnorm=1.297, clip=0, loss_scale=4, train_wall=60, gb_free=19.4, wall=302
2023-08-23 01:49:45 | INFO | train_inner | epoch 001:    505 / 1474 loss=9.197, trans_loss=5.728, nll_loss=4.612, w2v_ctc_loss=5.798, task_loss=1.217, contrastive_loss=3.304, total=4192.13, n_correct=98.5, ppl=24.45, accuracy=2.35, wps=20728.1, ups=1.65, wpb=12526, bsz=489.2, num_updates=500, lr=2.009e-05, gnorm=1.369, clip=0, loss_scale=4, train_wall=60, gb_free=19.1, wall=362
2023-08-23 01:50:45 | INFO | train_inner | epoch 001:    605 / 1474 loss=9.084, trans_loss=5.75, nll_loss=4.629, w2v_ctc_loss=5.66, task_loss=1.194, contrastive_loss=3.253, total=4131.49, n_correct=103.78, ppl=24.75, accuracy=2.512, wps=20562.5, ups=1.67, wpb=12320.8, bsz=473.5, num_updates=600, lr=2.4088e-05, gnorm=1.505, clip=1, loss_scale=4, train_wall=59, gb_free=18.9, wall=422
2023-08-23 01:51:35 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 2.0
2023-08-23 01:51:46 | INFO | train_inner | epoch 001:    706 / 1474 loss=9.028, trans_loss=5.785, nll_loss=4.679, w2v_ctc_loss=5.611, task_loss=1.25, contrastive_loss=3.132, total=4143.61, n_correct=93.56, ppl=25.62, accuracy=2.258, wps=20454.3, ups=1.65, wpb=12374.2, bsz=454.2, num_updates=700, lr=2.8086e-05, gnorm=1.25, clip=0, loss_scale=2, train_wall=60, gb_free=19.5, wall=482
2023-08-23 01:52:46 | INFO | train_inner | epoch 001:    806 / 1474 loss=8.931, trans_loss=5.852, nll_loss=4.764, w2v_ctc_loss=5.442, task_loss=1.214, contrastive_loss=3.148, total=4129.2, n_correct=84.14, ppl=27.18, accuracy=2.038, wps=20547.6, ups=1.67, wpb=12318.4, bsz=463.3, num_updates=800, lr=3.2084e-05, gnorm=1.431, clip=0, loss_scale=2, train_wall=59, gb_free=19.2, wall=542
2023-08-23 01:53:47 | INFO | train_inner | epoch 001:    906 / 1474 loss=8.783, trans_loss=5.864, nll_loss=4.775, w2v_ctc_loss=5.27, task_loss=1.234, contrastive_loss=3.055, total=4167.97, n_correct=85.87, ppl=27.39, accuracy=2.06, wps=20337.2, ups=1.63, wpb=12446.3, bsz=458.8, num_updates=900, lr=3.6082e-05, gnorm=1.58, clip=0, loss_scale=2, train_wall=61, gb_free=18.6, wall=604
2023-08-23 01:54:47 | INFO | train_inner | epoch 001:   1006 / 1474 loss=8.693, trans_loss=6.009, nll_loss=4.96, w2v_ctc_loss=5.019, task_loss=1.234, contrastive_loss=3.049, total=4137.5, n_correct=69.03, ppl=31.13, accuracy=1.668, wps=20445, ups=1.65, wpb=12361.1, bsz=459.1, num_updates=1000, lr=4.008e-05, gnorm=1.891, clip=0, loss_scale=2, train_wall=60, gb_free=19.3, wall=664
2023-08-23 01:55:47 | INFO | train_inner | epoch 001:   1106 / 1474 loss=8.5, trans_loss=6.064, nll_loss=5.018, w2v_ctc_loss=4.785, task_loss=1.269, contrastive_loss=2.956, total=4151.84, n_correct=65.1, ppl=32.4, accuracy=1.568, wps=20701.7, ups=1.67, wpb=12382.4, bsz=452.7, num_updates=1100, lr=4.4078e-05, gnorm=1.831, clip=0, loss_scale=2, train_wall=59, gb_free=18.8, wall=724
2023-08-23 01:56:47 | INFO | train_inner | epoch 001:   1206 / 1474 loss=8.33, trans_loss=6.096, nll_loss=5.063, w2v_ctc_loss=4.596, task_loss=1.322, contrastive_loss=2.849, total=4123.25, n_correct=65.82, ppl=33.42, accuracy=1.596, wps=20528.2, ups=1.67, wpb=12316.7, bsz=437.7, num_updates=1200, lr=4.8076e-05, gnorm=2.159, clip=0, loss_scale=2, train_wall=59, gb_free=19.6, wall=784
2023-08-23 01:57:47 | INFO | train_inner | epoch 001:   1306 / 1474 loss=8.171, trans_loss=6.104, nll_loss=5.073, w2v_ctc_loss=4.403, task_loss=1.244, contrastive_loss=2.797, total=4066.16, n_correct=69.06, ppl=33.66, accuracy=1.698, wps=20362.9, ups=1.68, wpb=12138.7, bsz=445.8, num_updates=1300, lr=5.2074e-05, gnorm=2.356, clip=0, loss_scale=2, train_wall=59, gb_free=18.8, wall=843
2023-08-23 01:58:47 | INFO | train_inner | epoch 001:   1406 / 1474 loss=8, trans_loss=6.06, nll_loss=5.019, w2v_ctc_loss=4.241, task_loss=1.265, contrastive_loss=2.87, total=4119.98, n_correct=72.31, ppl=32.42, accuracy=1.755, wps=20344.8, ups=1.65, wpb=12311.1, bsz=449.5, num_updates=1400, lr=5.6072e-05, gnorm=2.438, clip=0, loss_scale=2, train_wall=60, gb_free=18.6, wall=904
2023-08-23 01:59:29 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
True False
None None None
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/torch/nn/functional.py:4999: UserWarning: Support for mismatched key_padding_mask and attn_mask is deprecated. Use same type for both instead.
  warnings.warn(
2023-08-23 02:00:16 | INFO | dev_st | epoch 001 | valid on 'dev_st' subset | loss 12.505 | trans_loss 13.881 | nll_loss 13.726 | w2v_ctc_loss 5.518 | task_loss 7.545 | contrastive_loss 4.104 | total 4003.4 | n_correct 41.1 | ppl 13548.7 | accuracy 1.027 | uer 70.363 | wer 68.424 | raw_wer 68.424 | bleu 0 | wps 1027.8 | wpb 4003.4 | bsz 141.8 | num_updates 1468
2023-08-23 02:00:16 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 1 @ 1468 updates
2023-08-23 02:00:16 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:00:19 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:00:21 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 1 @ 1468 updates, score 0.0) (writing took 4.893041018978693 seconds)
2023-08-23 02:00:21 | INFO | fairseq_cli.train | end of epoch 1 (average epoch stats below)
2023-08-23 02:00:21 | INFO | train | epoch 001 | loss 10.1 | trans_loss 5.913 | nll_loss 4.821 | w2v_ctc_loss 7.243 | task_loss 1.326 | contrastive_loss 3.085 | total 4139.46 | n_correct 88.7255 | ppl 28.26 | accuracy 2.143 | wps 19266.6 | ups 1.56 | wpb 12358.4 | bsz 459 | num_updates 1468 | lr 5.87906e-05 | gnorm 2.253 | clip 1.3 | loss_scale 2 | train_wall 885 | gb_free 18.9 | wall 998
2023-08-23 02:00:21 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 02:00:21 | INFO | fairseq.trainer | begin training epoch 2
2023-08-23 02:00:21 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 02:00:51 | INFO | train_inner | epoch 002:     32 / 1474 loss=7.905, trans_loss=6.088, nll_loss=5.054, w2v_ctc_loss=4.087, task_loss=1.196, contrastive_loss=2.847, total=4165.61, n_correct=67.81, ppl=33.22, accuracy=1.628, wps=10014.5, ups=0.81, wpb=12422.6, bsz=470.4, num_updates=1500, lr=6.007e-05, gnorm=2.706, clip=0, loss_scale=2, train_wall=60, gb_free=18.7, wall=1028
2023-08-23 02:01:51 | INFO | train_inner | epoch 002:    132 / 1474 loss=7.773, trans_loss=6.076, nll_loss=5.041, w2v_ctc_loss=4, task_loss=1.253, contrastive_loss=2.704, total=4153.7, n_correct=70.81, ppl=32.92, accuracy=1.705, wps=20815.9, ups=1.68, wpb=12391.2, bsz=453.7, num_updates=1600, lr=6.4068e-05, gnorm=2.465, clip=0, loss_scale=2, train_wall=59, gb_free=19.1, wall=1088
2023-08-23 02:02:51 | INFO | train_inner | epoch 002:    232 / 1474 loss=7.702, trans_loss=6.105, nll_loss=5.082, w2v_ctc_loss=3.839, task_loss=1.09, contrastive_loss=2.767, total=4201.44, n_correct=64.43, ppl=33.87, accuracy=1.534, wps=21060.5, ups=1.68, wpb=12547.2, bsz=493.6, num_updates=1700, lr=6.8066e-05, gnorm=2.514, clip=0, loss_scale=2, train_wall=59, gb_free=18.9, wall=1147
2023-08-23 02:03:50 | INFO | train_inner | epoch 002:    332 / 1474 loss=7.51, trans_loss=6.09, nll_loss=5.065, w2v_ctc_loss=3.783, task_loss=1.277, contrastive_loss=2.53, total=4130.13, n_correct=67.47, ppl=33.47, accuracy=1.634, wps=20662.5, ups=1.68, wpb=12330.1, bsz=445.5, num_updates=1800, lr=7.2064e-05, gnorm=2.672, clip=0, loss_scale=2, train_wall=59, gb_free=18.7, wall=1207
2023-08-23 02:04:50 | INFO | train_inner | epoch 002:    432 / 1474 loss=7.37, trans_loss=6.103, nll_loss=5.087, w2v_ctc_loss=3.714, task_loss=1.402, contrastive_loss=2.336, total=4035.12, n_correct=62.65, ppl=33.98, accuracy=1.553, wps=20225.1, ups=1.68, wpb=12062.7, bsz=413.5, num_updates=1900, lr=7.6062e-05, gnorm=2.367, clip=0, loss_scale=2, train_wall=59, gb_free=19, wall=1266
2023-08-23 02:05:50 | INFO | train_inner | epoch 002:    532 / 1474 loss=7.296, trans_loss=6.08, nll_loss=5.054, w2v_ctc_loss=3.574, task_loss=1.21, contrastive_loss=2.485, total=4183.09, n_correct=73.67, ppl=33.22, accuracy=1.761, wps=20757.5, ups=1.66, wpb=12479, bsz=468.4, num_updates=2000, lr=8.006e-05, gnorm=2.504, clip=0, loss_scale=2, train_wall=59, gb_free=18.5, wall=1327
2023-08-23 02:05:50 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 02:06:37 | INFO | dev_st | epoch 002 | valid on 'dev_st' subset | loss 11.733 | trans_loss 13.452 | nll_loss 13.2 | w2v_ctc_loss 4.641 | task_loss 7.545 | contrastive_loss 3.539 | total 4003.4 | n_correct 63.2 | ppl 9407.75 | accuracy 1.579 | uer 62.419 | wer 60.52 | raw_wer 60.52 | bleu 0 | wps 1039.9 | wpb 4003.4 | bsz 141.8 | num_updates 2000 | best_bleu 0
2023-08-23 02:06:37 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 2 @ 2000 updates
2023-08-23 02:06:37 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_2_2000.pt
2023-08-23 02:06:39 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_2_2000.pt
2023-08-23 02:06:48 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_2_2000.pt (epoch 2 @ 2000 updates, score 0.0) (writing took 11.33712304290384 seconds)
2023-08-23 02:07:48 | INFO | train_inner | epoch 002:    632 / 1474 loss=7.14, trans_loss=6.064, nll_loss=5.034, w2v_ctc_loss=3.479, task_loss=1.243, contrastive_loss=2.296, total=4123.85, n_correct=71.09, ppl=32.75, accuracy=1.724, wps=10457.5, ups=0.85, wpb=12306.4, bsz=448.7, num_updates=2100, lr=8.4058e-05, gnorm=2.479, clip=0, loss_scale=2, train_wall=59, gb_free=18.6, wall=1444
2023-08-23 02:08:47 | INFO | train_inner | epoch 002:    732 / 1474 loss=7.065, trans_loss=6.058, nll_loss=5.025, w2v_ctc_loss=3.412, task_loss=1.229, contrastive_loss=2.365, total=4148.13, n_correct=74.11, ppl=32.56, accuracy=1.787, wps=20796.3, ups=1.68, wpb=12381, bsz=462.1, num_updates=2200, lr=8.8056e-05, gnorm=2.58, clip=0, loss_scale=2, train_wall=59, gb_free=18.5, wall=1504
2023-08-23 02:09:47 | INFO | train_inner | epoch 002:    832 / 1474 loss=6.976, trans_loss=6.052, nll_loss=5.019, w2v_ctc_loss=3.361, task_loss=1.243, contrastive_loss=2.314, total=4172.27, n_correct=74.62, ppl=32.43, accuracy=1.788, wps=20862, ups=1.67, wpb=12465.7, bsz=464.5, num_updates=2300, lr=9.2054e-05, gnorm=2.375, clip=0, loss_scale=2, train_wall=59, gb_free=18.8, wall=1564
2023-08-23 02:10:47 | INFO | train_inner | epoch 002:    932 / 1474 loss=6.832, trans_loss=6.044, nll_loss=5.007, w2v_ctc_loss=3.273, task_loss=1.302, contrastive_loss=2.225, total=4101.67, n_correct=72.07, ppl=32.15, accuracy=1.757, wps=20545.2, ups=1.68, wpb=12242.5, bsz=441.6, num_updates=2400, lr=9.6052e-05, gnorm=2.325, clip=0, loss_scale=2, train_wall=59, gb_free=18.9, wall=1623
2023-08-23 02:11:47 | INFO | train_inner | epoch 002:   1032 / 1474 loss=6.744, trans_loss=6.039, nll_loss=5, w2v_ctc_loss=3.21, task_loss=1.265, contrastive_loss=2.116, total=4091.09, n_correct=73.04, ppl=32, accuracy=1.785, wps=20336.1, ups=1.66, wpb=12214.8, bsz=451.5, num_updates=2500, lr=0.00010005, gnorm=2.159, clip=0, loss_scale=2, train_wall=59, gb_free=19.2, wall=1683
2023-08-23 02:12:47 | INFO | train_inner | epoch 002:   1132 / 1474 loss=6.705, trans_loss=6.024, nll_loss=4.982, w2v_ctc_loss=3.111, task_loss=1.096, contrastive_loss=2.335, total=4219.19, n_correct=76.08, ppl=31.6, accuracy=1.803, wps=20787.9, ups=1.65, wpb=12595.1, bsz=500.6, num_updates=2600, lr=0.000104048, gnorm=2.136, clip=0, loss_scale=2, train_wall=60, gb_free=19, wall=1744
2023-08-23 02:13:47 | INFO | train_inner | epoch 002:   1232 / 1474 loss=6.593, trans_loss=6.006, nll_loss=4.958, w2v_ctc_loss=3.079, task_loss=1.156, contrastive_loss=2.14, total=4212.91, n_correct=78.19, ppl=31.08, accuracy=1.856, wps=20922.1, ups=1.66, wpb=12571.7, bsz=486.8, num_updates=2700, lr=0.000108046, gnorm=2.058, clip=0, loss_scale=2, train_wall=60, gb_free=19.1, wall=1804
2023-08-23 02:14:47 | INFO | train_inner | epoch 002:   1332 / 1474 loss=6.478, trans_loss=5.995, nll_loss=4.946, w2v_ctc_loss=3.042, task_loss=1.215, contrastive_loss=1.917, total=4142.48, n_correct=78.66, ppl=30.83, accuracy=1.899, wps=20887.1, ups=1.69, wpb=12381.2, bsz=456.3, num_updates=2800, lr=0.000112044, gnorm=2.078, clip=0, loss_scale=4, train_wall=59, gb_free=18.9, wall=1863
2023-08-23 02:15:46 | INFO | train_inner | epoch 002:   1432 / 1474 loss=6.384, trans_loss=5.991, nll_loss=4.939, w2v_ctc_loss=2.996, task_loss=1.325, contrastive_loss=1.971, total=4063.28, n_correct=73.9, ppl=30.68, accuracy=1.819, wps=20311.9, ups=1.67, wpb=12131.5, bsz=444.3, num_updates=2900, lr=0.000116042, gnorm=1.973, clip=0, loss_scale=4, train_wall=59, gb_free=19.6, wall=1923
2023-08-23 02:16:11 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 02:16:58 | INFO | dev_st | epoch 002 | valid on 'dev_st' subset | loss 10.859 | trans_loss 13.046 | nll_loss 12.651 | w2v_ctc_loss 3.808 | task_loss 7.545 | contrastive_loss 2.649 | total 4003.4 | n_correct 86.2 | ppl 6431.07 | accuracy 2.153 | uer 53.242 | wer 52.366 | raw_wer 52.366 | bleu 0.01 | wps 1033.8 | wpb 4003.4 | bsz 141.8 | num_updates 2942 | best_bleu 0.01
2023-08-23 02:16:58 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 2 @ 2942 updates
2023-08-23 02:16:58 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:17:04 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:17:10 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 2 @ 2942 updates, score 0.01) (writing took 11.278868613066152 seconds)
2023-08-23 02:17:10 | INFO | fairseq_cli.train | end of epoch 2 (average epoch stats below)
2023-08-23 02:17:10 | INFO | train | epoch 002 | loss 7.04 | trans_loss 6.052 | nll_loss 5.017 | w2v_ctc_loss 3.421 | task_loss 1.234 | contrastive_loss 2.321 | total 4138.65 | n_correct 72.133 | ppl 32.37 | accuracy 1.743 | wps 18050.6 | ups 1.46 | wpb 12355.8 | bsz 458.5 | num_updates 2942 | lr 0.000117721 | gnorm 2.333 | clip 0 | loss_scale 4 | train_wall 872 | gb_free 19 | wall 2007
2023-08-23 02:17:10 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 02:17:10 | INFO | fairseq.trainer | begin training epoch 3
2023-08-23 02:17:10 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 02:17:52 | INFO | train_inner | epoch 003:     58 / 1474 loss=6.284, trans_loss=5.971, nll_loss=4.914, w2v_ctc_loss=2.944, task_loss=1.3, contrastive_loss=1.828, total=4048.67, n_correct=78.46, ppl=30.15, accuracy=1.938, wps=9612.1, ups=0.8, wpb=12085.6, bsz=433.9, num_updates=3000, lr=0.00012004, gnorm=1.842, clip=0, loss_scale=4, train_wall=59, gb_free=18.8, wall=2049
2023-08-23 02:19:18 | INFO | train_inner | epoch 003:    158 / 1474 loss=5.669, trans_loss=5.364, nll_loss=4.146, w2v_ctc_loss=2.709, task_loss=0.857, contrastive_loss=1.765, total=4148.1, n_correct=234.55, ppl=17.7, accuracy=5.654, wps=14373.4, ups=1.16, wpb=12386.6, bsz=459, num_updates=3100, lr=0.000124038, gnorm=3.868, clip=3, loss_scale=4, train_wall=86, gb_free=16.3, wall=2135
2023-08-23 02:20:46 | INFO | train_inner | epoch 003:    258 / 1474 loss=5.027, trans_loss=5.085, nll_loss=3.787, w2v_ctc_loss=2.392, task_loss=0.862, contrastive_loss=1.518, total=4161.13, n_correct=413.45, ppl=13.8, accuracy=9.936, wps=14164.4, ups=1.14, wpb=12431.5, bsz=467, num_updates=3200, lr=0.000128036, gnorm=2.32, clip=0, loss_scale=4, train_wall=87, gb_free=16.8, wall=2223
2023-08-23 02:22:13 | INFO | train_inner | epoch 003:    358 / 1474 loss=4.753, trans_loss=4.953, nll_loss=3.606, w2v_ctc_loss=2.266, task_loss=0.866, contrastive_loss=1.439, total=4150.02, n_correct=516.98, ppl=12.17, accuracy=12.457, wps=14260.9, ups=1.15, wpb=12384.9, bsz=461.6, num_updates=3300, lr=0.000132034, gnorm=2.154, clip=0, loss_scale=4, train_wall=86, gb_free=16.8, wall=2309
2023-08-23 02:23:40 | INFO | train_inner | epoch 003:    458 / 1474 loss=4.492, trans_loss=4.82, nll_loss=3.427, w2v_ctc_loss=2.154, task_loss=0.841, contrastive_loss=1.268, total=4209.57, n_correct=630.95, ppl=10.76, accuracy=14.988, wps=14414.8, ups=1.15, wpb=12566, bsz=476.8, num_updates=3400, lr=0.000136032, gnorm=1.923, clip=0, loss_scale=4, train_wall=87, gb_free=15.7, wall=2397
2023-08-23 02:25:06 | INFO | train_inner | epoch 003:    558 / 1474 loss=4.265, trans_loss=4.72, nll_loss=3.296, w2v_ctc_loss=2.067, task_loss=0.921, contrastive_loss=1.13, total=4088.48, n_correct=694.92, ppl=9.82, accuracy=16.997, wps=14140.7, ups=1.16, wpb=12212.5, bsz=439.7, num_updates=3500, lr=0.00014003, gnorm=1.854, clip=0, loss_scale=4, train_wall=86, gb_free=17.4, wall=2483
2023-08-23 02:26:35 | INFO | train_inner | epoch 003:    658 / 1474 loss=4.118, trans_loss=4.613, nll_loss=3.148, w2v_ctc_loss=1.984, task_loss=0.827, contrastive_loss=1.196, total=4221.58, n_correct=843.86, ppl=8.86, accuracy=19.989, wps=14150.3, ups=1.12, wpb=12587.8, bsz=481.9, num_updates=3600, lr=0.000144028, gnorm=1.72, clip=0, loss_scale=4, train_wall=88, gb_free=16.1, wall=2572
2023-08-23 02:28:02 | INFO | train_inner | epoch 003:    758 / 1474 loss=3.932, trans_loss=4.497, nll_loss=2.999, w2v_ctc_loss=1.965, task_loss=0.825, contrastive_loss=0.928, total=4167.41, n_correct=954.8, ppl=7.99, accuracy=22.911, wps=14345.8, ups=1.15, wpb=12447.6, bsz=472.6, num_updates=3700, lr=0.000148026, gnorm=1.809, clip=0, loss_scale=4, train_wall=86, gb_free=16.1, wall=2659
2023-08-23 02:29:29 | INFO | train_inner | epoch 003:    858 / 1474 loss=3.748, trans_loss=4.339, nll_loss=2.789, w2v_ctc_loss=1.922, task_loss=0.875, contrastive_loss=0.852, total=4165.53, n_correct=1147.98, ppl=6.91, accuracy=27.559, wps=14372.3, ups=1.16, wpb=12437.8, bsz=456.1, num_updates=3800, lr=0.000152024, gnorm=1.924, clip=0, loss_scale=4, train_wall=86, gb_free=16.7, wall=2745
2023-08-23 02:30:56 | INFO | train_inner | epoch 003:    958 / 1474 loss=3.57, trans_loss=4.138, nll_loss=2.526, w2v_ctc_loss=1.898, task_loss=0.839, contrastive_loss=0.857, total=4162.3, n_correct=1431.2, ppl=5.76, accuracy=34.385, wps=14298.7, ups=1.15, wpb=12417, bsz=469.2, num_updates=3900, lr=0.000156022, gnorm=1.777, clip=0, loss_scale=4, train_wall=86, gb_free=16.5, wall=2832
2023-08-23 02:32:22 | INFO | train_inner | epoch 003:   1058 / 1474 loss=3.431, trans_loss=4.046, nll_loss=2.409, w2v_ctc_loss=1.876, task_loss=0.92, contrastive_loss=0.76, total=4069.95, n_correct=1533.63, ppl=5.31, accuracy=37.682, wps=14046.9, ups=1.16, wpb=12153.7, bsz=443.6, num_updates=4000, lr=0.00016002, gnorm=1.602, clip=0, loss_scale=4, train_wall=86, gb_free=16.1, wall=2919
2023-08-23 02:32:22 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 02:33:01 | INFO | dev_st | epoch 003 | valid on 'dev_st' subset | loss 5.517 | trans_loss 6.713 | nll_loss 4.389 | w2v_ctc_loss 2.201 | task_loss 4.303 | contrastive_loss 1.003 | total 4003.4 | n_correct 1746.5 | ppl 20.96 | accuracy 43.625 | uer 32.172 | wer 32.728 | raw_wer 32.728 | bleu 6.43 | wps 1253.4 | wpb 4003.4 | bsz 141.8 | num_updates 4000 | best_bleu 6.43
2023-08-23 02:33:01 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 3 @ 4000 updates
2023-08-23 02:33:01 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_3_4000.pt
2023-08-23 02:33:03 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_3_4000.pt
2023-08-23 02:33:13 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_3_4000.pt (epoch 3 @ 4000 updates, score 6.43) (writing took 11.787538783974014 seconds)
2023-08-23 02:34:18 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 2.0
2023-08-23 02:34:40 | INFO | train_inner | epoch 003:   1159 / 1474 loss=3.319, trans_loss=4.001, nll_loss=2.35, w2v_ctc_loss=1.831, task_loss=0.939, contrastive_loss=0.689, total=4034.56, n_correct=1594.08, ppl=5.1, accuracy=39.511, wps=8733.8, ups=0.73, wpb=12042.4, bsz=431.2, num_updates=4100, lr=0.000164018, gnorm=1.509, clip=0, loss_scale=2, train_wall=86, gb_free=15.8, wall=3057
2023-08-23 02:36:07 | INFO | train_inner | epoch 003:   1259 / 1474 loss=3.229, trans_loss=3.95, nll_loss=2.286, w2v_ctc_loss=1.79, task_loss=0.919, contrastive_loss=0.642, total=4064.26, n_correct=1682.72, ppl=4.88, accuracy=41.403, wps=13966.2, ups=1.15, wpb=12137.6, bsz=434, num_updates=4200, lr=0.000168016, gnorm=1.41, clip=0, loss_scale=2, train_wall=86, gb_free=16.4, wall=3143
2023-08-23 02:37:34 | INFO | train_inner | epoch 003:   1359 / 1474 loss=3.185, trans_loss=3.915, nll_loss=2.242, w2v_ctc_loss=1.747, task_loss=0.874, contrastive_loss=0.723, total=4137.36, n_correct=1772.71, ppl=4.73, accuracy=42.846, wps=14125.5, ups=1.14, wpb=12352.2, bsz=461.5, num_updates=4300, lr=0.000172014, gnorm=1.372, clip=0, loss_scale=2, train_wall=87, gb_free=15.8, wall=3231
2023-08-23 02:39:01 | INFO | train_inner | epoch 003:   1459 / 1474 loss=3.128, trans_loss=3.887, nll_loss=2.207, w2v_ctc_loss=1.723, task_loss=0.826, contrastive_loss=0.686, total=4207.75, n_correct=1849.3, ppl=4.62, accuracy=43.95, wps=14470, ups=1.15, wpb=12567.9, bsz=476.7, num_updates=4400, lr=0.000176012, gnorm=1.303, clip=0, loss_scale=2, train_wall=86, gb_free=17.1, wall=3318
2023-08-23 02:39:14 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 02:39:51 | INFO | dev_st | epoch 003 | valid on 'dev_st' subset | loss 5.103 | trans_loss 6.296 | nll_loss 3.859 | w2v_ctc_loss 1.999 | task_loss 4.15 | contrastive_loss 0.811 | total 4003.4 | n_correct 1997.2 | ppl 14.51 | accuracy 49.888 | uer 30.858 | wer 31.054 | raw_wer 31.054 | bleu 10.04 | wps 1342 | wpb 4003.4 | bsz 141.8 | num_updates 4415 | best_bleu 10.04
2023-08-23 02:39:51 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 3 @ 4415 updates
2023-08-23 02:39:51 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:39:57 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 02:40:02 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 3 @ 4415 updates, score 10.04) (writing took 10.7379254080588 seconds)
2023-08-23 02:40:02 | INFO | fairseq_cli.train | end of epoch 3 (average epoch stats below)
2023-08-23 02:40:02 | INFO | train | epoch 003 | loss 4.074 | trans_loss 4.508 | nll_loss 3.016 | w2v_ctc_loss 2.056 | task_loss 0.886 | contrastive_loss 1.065 | total 4138.4 | n_correct 1059.61 | ppl 8.09 | accuracy 25.604 | wps 13261.4 | ups 1.07 | wpb 12355.1 | bsz 458.4 | num_updates 4415 | lr 0.000176612 | gnorm 1.889 | clip 0.2 | loss_scale 2 | train_wall 1256 | gb_free 16 | wall 3379
2023-08-23 02:40:03 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 02:40:03 | INFO | fairseq.trainer | begin training epoch 4
2023-08-23 02:40:03 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 02:41:22 | INFO | train_inner | epoch 004:     85 / 1474 loss=3, trans_loss=3.853, nll_loss=2.16, w2v_ctc_loss=1.678, task_loss=0.905, contrastive_loss=0.506, total=4095.18, n_correct=1852.74, ppl=4.47, accuracy=45.242, wps=8679, ups=0.71, wpb=12222.9, bsz=437.8, num_updates=4500, lr=0.00018001, gnorm=1.238, clip=0, loss_scale=2, train_wall=85, gb_free=12.2, wall=3459
2023-08-23 02:42:48 | INFO | train_inner | epoch 004:    185 / 1474 loss=2.964, trans_loss=3.82, nll_loss=2.118, w2v_ctc_loss=1.654, task_loss=0.823, contrastive_loss=0.52, total=4178.83, n_correct=1937.65, ppl=4.34, accuracy=46.368, wps=14439.2, ups=1.16, wpb=12476.1, bsz=469.5, num_updates=4600, lr=0.000184008, gnorm=1.193, clip=0, loss_scale=2, train_wall=86, gb_free=14.4, wall=3545
2023-08-23 02:44:16 | INFO | train_inner | epoch 004:    285 / 1474 loss=2.96, trans_loss=3.813, nll_loss=2.111, w2v_ctc_loss=1.648, task_loss=0.878, contrastive_loss=0.624, total=4142.3, n_correct=1935.89, ppl=4.32, accuracy=46.735, wps=14198.2, ups=1.15, wpb=12373.8, bsz=460.7, num_updates=4700, lr=0.000188006, gnorm=1.23, clip=0, loss_scale=2, train_wall=87, gb_free=12.9, wall=3632
2023-08-23 02:45:42 | INFO | train_inner | epoch 004:    385 / 1474 loss=2.885, trans_loss=3.797, nll_loss=2.087, w2v_ctc_loss=1.625, task_loss=0.903, contrastive_loss=0.453, total=4124.92, n_correct=1956.25, ppl=4.25, accuracy=47.425, wps=14265.9, ups=1.16, wpb=12307.7, bsz=444.2, num_updates=4800, lr=0.000192004, gnorm=1.168, clip=0, loss_scale=2, train_wall=86, gb_free=12, wall=3718
2023-08-23 02:47:09 | INFO | train_inner | epoch 004:    485 / 1474 loss=2.922, trans_loss=3.776, nll_loss=2.063, w2v_ctc_loss=1.583, task_loss=0.79, contrastive_loss=0.825, total=4216.09, n_correct=2036.92, ppl=4.18, accuracy=48.313, wps=14433.5, ups=1.15, wpb=12585.8, bsz=497.6, num_updates=4900, lr=0.000196002, gnorm=1.15, clip=0, loss_scale=2, train_wall=87, gb_free=16.5, wall=3806
2023-08-23 02:48:36 | INFO | train_inner | epoch 004:    585 / 1474 loss=2.845, trans_loss=3.755, nll_loss=2.035, w2v_ctc_loss=1.597, task_loss=0.81, contrastive_loss=0.515, total=4231.12, n_correct=2081.14, ppl=4.1, accuracy=49.187, wps=14525.4, ups=1.15, wpb=12629.4, bsz=490.1, num_updates=5000, lr=0.0002, gnorm=1.139, clip=0, loss_scale=2, train_wall=86, gb_free=15.8, wall=3893
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:0')
2023-08-23 02:50:04 | INFO | train_inner | epoch 004:    685 / 1474 loss=2.797, trans_loss=3.751, nll_loss=2.026, w2v_ctc_loss=1.564, task_loss=0.901, contrastive_loss=0.533, total=4176.95, n_correct=2070.15, ppl=4.07, accuracy=49.561, wps=14078.2, ups=1.13, wpb=12451, bsz=455.2, num_updates=5100, lr=0.00019803, gnorm=0.79, clip=0, loss_scale=2, train_wall=88, gb_free=14.7, wall=3981
2023-08-23 02:51:31 | INFO | train_inner | epoch 004:    785 / 1474 loss=2.759, trans_loss=3.73, nll_loss=2.004, w2v_ctc_loss=1.581, task_loss=0.965, contrastive_loss=0.396, total=4016.91, n_correct=2010.39, ppl=4.01, accuracy=50.048, wps=13814.9, ups=1.15, wpb=11995.1, bsz=418.7, num_updates=5200, lr=0.000196116, gnorm=0.765, clip=0, loss_scale=2, train_wall=86, gb_free=15.8, wall=4068
2023-08-23 02:52:58 | INFO | train_inner | epoch 004:    885 / 1474 loss=2.78, trans_loss=3.712, nll_loss=1.982, w2v_ctc_loss=1.564, task_loss=0.873, contrastive_loss=0.561, total=4183.4, n_correct=2122.83, ppl=3.95, accuracy=50.744, wps=14382.7, ups=1.15, wpb=12493.2, bsz=465.4, num_updates=5300, lr=0.000194257, gnorm=0.736, clip=0, loss_scale=2, train_wall=86, gb_free=15.2, wall=4155
2023-08-23 02:54:25 | INFO | train_inner | epoch 004:    985 / 1474 loss=2.724, trans_loss=3.699, nll_loss=1.965, w2v_ctc_loss=1.545, task_loss=0.887, contrastive_loss=0.436, total=4128.78, n_correct=2120.49, ppl=3.91, accuracy=51.359, wps=14188.7, ups=1.15, wpb=12332, bsz=456.8, num_updates=5400, lr=0.00019245, gnorm=0.747, clip=0, loss_scale=2, train_wall=86, gb_free=15.6, wall=4242
2023-08-23 02:55:52 | INFO | train_inner | epoch 004:   1085 / 1474 loss=2.716, trans_loss=3.699, nll_loss=1.964, w2v_ctc_loss=1.553, task_loss=0.936, contrastive_loss=0.405, total=4080.2, n_correct=2099.11, ppl=3.9, accuracy=51.446, wps=14063.4, ups=1.15, wpb=12179.1, bsz=437.7, num_updates=5500, lr=0.000190693, gnorm=0.77, clip=0, loss_scale=2, train_wall=86, gb_free=15.8, wall=4328
2023-08-23 02:57:18 | INFO | train_inner | epoch 004:   1185 / 1474 loss=2.713, trans_loss=3.683, nll_loss=1.946, w2v_ctc_loss=1.528, task_loss=0.817, contrastive_loss=0.51, total=4163.45, n_correct=2167.92, ppl=3.85, accuracy=52.07, wps=14362.7, ups=1.15, wpb=12436, bsz=485.6, num_updates=5600, lr=0.000188982, gnorm=0.703, clip=0, loss_scale=2, train_wall=86, gb_free=14.9, wall=4415
2023-08-23 02:58:45 | INFO | train_inner | epoch 004:   1285 / 1474 loss=2.674, trans_loss=3.666, nll_loss=1.924, w2v_ctc_loss=1.512, task_loss=0.834, contrastive_loss=0.46, total=4152.41, n_correct=2185.11, ppl=3.8, accuracy=52.623, wps=14303.6, ups=1.15, wpb=12401.3, bsz=471.4, num_updates=5700, lr=0.000187317, gnorm=0.677, clip=0, loss_scale=2, train_wall=86, gb_free=12.5, wall=4502
2023-08-23 03:00:10 | INFO | train_inner | epoch 004:   1385 / 1474 loss=2.621, trans_loss=3.656, nll_loss=1.91, w2v_ctc_loss=1.504, task_loss=0.897, contrastive_loss=0.333, total=4103.57, n_correct=2175.66, ppl=3.76, accuracy=53.019, wps=14353.8, ups=1.17, wpb=12255.2, bsz=437.9, num_updates=5800, lr=0.000185695, gnorm=0.663, clip=0, loss_scale=2, train_wall=85, gb_free=16.4, wall=4587
2023-08-23 03:01:27 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.4919, device='cuda:3')
2023-08-23 03:02:03 | INFO | dev_st | epoch 004 | valid on 'dev_st' subset | loss 4.479 | trans_loss 5.66 | nll_loss 3.05 | w2v_ctc_loss 1.68 | task_loss 4.415 | contrastive_loss 0.513 | total 4003.4 | n_correct 2351 | ppl 8.28 | accuracy 58.725 | uer 25.342 | wer 26.93 | raw_wer 26.93 | bleu 16.09 | wps 1417.7 | wpb 4003.4 | bsz 141.8 | num_updates 5889 | best_bleu 16.09
2023-08-23 03:02:03 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 4 @ 5889 updates
2023-08-23 03:02:03 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:02:08 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:02:13 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 4 @ 5889 updates, score 16.09) (writing took 10.833442158997059 seconds)
2023-08-23 03:02:13 | INFO | fairseq_cli.train | end of epoch 4 (average epoch stats below)
2023-08-23 03:02:13 | INFO | train | epoch 004 | loss 2.798 | trans_loss 3.737 | nll_loss 2.013 | w2v_ctc_loss 1.574 | task_loss 0.872 | contrastive_loss 0.5 | total 4138.65 | n_correct 2062.82 | ppl 4.04 | accuracy 49.843 | wps 13683.1 | ups 1.11 | wpb 12355.8 | bsz 458.5 | num_updates 5889 | lr 0.000184287 | gnorm 0.907 | clip 0 | loss_scale 2 | train_wall 1268 | gb_free 14.5 | wall 4710
2023-08-23 03:02:14 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 03:02:14 | INFO | fairseq.trainer | begin training epoch 5
2023-08-23 03:02:14 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 03:02:30 | INFO | train_inner | epoch 005:     11 / 1474 loss=2.603, trans_loss=3.648, nll_loss=1.9, w2v_ctc_loss=1.477, task_loss=0.913, contrastive_loss=0.349, total=4031.51, n_correct=2150.13, ppl=3.73, accuracy=53.333, wps=8627, ups=0.72, wpb=12037.5, bsz=436.7, num_updates=5900, lr=0.000184115, gnorm=0.667, clip=0, loss_scale=2, train_wall=85, gb_free=13.9, wall=4726
2023-08-23 03:03:57 | INFO | train_inner | epoch 005:    111 / 1474 loss=2.533, trans_loss=3.609, nll_loss=1.849, w2v_ctc_loss=1.399, task_loss=0.78, contrastive_loss=0.366, total=4256.63, n_correct=2331.44, ppl=3.6, accuracy=54.772, wps=14640.2, ups=1.15, wpb=12710, bsz=500.1, num_updates=6000, lr=0.000182574, gnorm=0.627, clip=0, loss_scale=2, train_wall=86, gb_free=15.9, wall=4813
2023-08-23 03:03:57 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 03:04:30 | INFO | dev_st | epoch 005 | valid on 'dev_st' subset | loss 4.456 | trans_loss 5.644 | nll_loss 3.028 | w2v_ctc_loss 1.654 | task_loss 4.428 | contrastive_loss 0.5 | total 4003.4 | n_correct 2362 | ppl 8.16 | accuracy 59 | uer 24.729 | wer 26.147 | raw_wer 26.147 | bleu 16.67 | wps 1614.8 | wpb 4003.4 | bsz 141.8 | num_updates 6000 | best_bleu 16.67
2023-08-23 03:04:30 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 5 @ 6000 updates
2023-08-23 03:04:30 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_5_6000.pt
2023-08-23 03:04:32 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_5_6000.pt
2023-08-23 03:04:42 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_5_6000.pt (epoch 5 @ 6000 updates, score 16.67) (writing took 12.063447497901507 seconds)
2023-08-23 03:06:08 | INFO | train_inner | epoch 005:    211 / 1474 loss=2.569, trans_loss=3.615, nll_loss=1.855, w2v_ctc_loss=1.414, task_loss=0.811, contrastive_loss=0.551, total=4186.83, n_correct=2293.55, ppl=3.62, accuracy=54.78, wps=9529.8, ups=0.76, wpb=12492.2, bsz=485.3, num_updates=6100, lr=0.000181071, gnorm=0.63, clip=0, loss_scale=2, train_wall=85, gb_free=15.8, wall=4944
2023-08-23 03:07:35 | INFO | train_inner | epoch 005:    311 / 1474 loss=2.539, trans_loss=3.6, nll_loss=1.842, w2v_ctc_loss=1.428, task_loss=0.893, contrastive_loss=0.405, total=4094.07, n_correct=2240.05, ppl=3.58, accuracy=54.715, wps=14103.2, ups=1.15, wpb=12241.2, bsz=446, num_updates=6200, lr=0.000179605, gnorm=0.632, clip=0, loss_scale=4, train_wall=86, gb_free=15.9, wall=5031
2023-08-23 03:09:02 | INFO | train_inner | epoch 005:    411 / 1474 loss=2.529, trans_loss=3.591, nll_loss=1.829, w2v_ctc_loss=1.392, task_loss=0.856, contrastive_loss=0.483, total=4140.39, n_correct=2285.18, ppl=3.55, accuracy=55.192, wps=14212.2, ups=1.15, wpb=12372.8, bsz=467.9, num_updates=6300, lr=0.000178174, gnorm=0.638, clip=0, loss_scale=4, train_wall=86, gb_free=15.7, wall=5118
2023-08-23 03:10:28 | INFO | train_inner | epoch 005:    511 / 1474 loss=2.477, trans_loss=3.593, nll_loss=1.83, w2v_ctc_loss=1.4, task_loss=0.976, contrastive_loss=0.274, total=4026.21, n_correct=2221.57, ppl=3.56, accuracy=55.178, wps=13915.1, ups=1.16, wpb=12028.8, bsz=418.1, num_updates=6400, lr=0.000176777, gnorm=0.618, clip=0, loss_scale=4, train_wall=86, gb_free=16.7, wall=5205
2023-08-23 03:11:55 | INFO | train_inner | epoch 005:    611 / 1474 loss=2.504, trans_loss=3.598, nll_loss=1.833, w2v_ctc_loss=1.387, task_loss=0.905, contrastive_loss=0.447, total=4109.94, n_correct=2278.12, ppl=3.56, accuracy=55.43, wps=14154.7, ups=1.15, wpb=12260.2, bsz=449.8, num_updates=6500, lr=0.000175412, gnorm=0.639, clip=0, loss_scale=4, train_wall=86, gb_free=15.1, wall=5291
2023-08-23 03:13:21 | INFO | train_inner | epoch 005:    711 / 1474 loss=2.499, trans_loss=3.591, nll_loss=1.826, w2v_ctc_loss=1.383, task_loss=0.824, contrastive_loss=0.42, total=4176.83, n_correct=2324.88, ppl=3.55, accuracy=55.661, wps=14410, ups=1.16, wpb=12467.5, bsz=483.6, num_updates=6600, lr=0.000174078, gnorm=0.622, clip=0, loss_scale=4, train_wall=86, gb_free=16.7, wall=5378
2023-08-23 03:14:49 | INFO | train_inner | epoch 005:    811 / 1474 loss=2.466, trans_loss=3.58, nll_loss=1.811, w2v_ctc_loss=1.377, task_loss=0.905, contrastive_loss=0.342, total=4127.9, n_correct=2308.41, ppl=3.51, accuracy=55.922, wps=14113.9, ups=1.15, wpb=12321.2, bsz=447.5, num_updates=6700, lr=0.000172774, gnorm=0.603, clip=0, loss_scale=4, train_wall=87, gb_free=15.4, wall=5465
2023-08-23 03:16:15 | INFO | train_inner | epoch 005:    911 / 1474 loss=2.431, trans_loss=3.57, nll_loss=1.8, w2v_ctc_loss=1.36, task_loss=0.901, contrastive_loss=0.301, total=4101.19, n_correct=2307.52, ppl=3.48, accuracy=56.265, wps=14155.9, ups=1.16, wpb=12245.9, bsz=447.9, num_updates=6800, lr=0.000171499, gnorm=0.599, clip=0, loss_scale=4, train_wall=86, gb_free=16.9, wall=5552
2023-08-23 03:17:41 | INFO | train_inner | epoch 005:   1011 / 1474 loss=2.447, trans_loss=3.574, nll_loss=1.805, w2v_ctc_loss=1.361, task_loss=0.867, contrastive_loss=0.375, total=4164.27, n_correct=2342.41, ppl=3.49, accuracy=56.25, wps=14441.6, ups=1.16, wpb=12430.2, bsz=462, num_updates=6900, lr=0.000170251, gnorm=0.601, clip=0, loss_scale=4, train_wall=85, gb_free=14.6, wall=5638
2023-08-23 03:19:08 | INFO | train_inner | epoch 005:   1111 / 1474 loss=2.46, trans_loss=3.569, nll_loss=1.798, w2v_ctc_loss=1.371, task_loss=0.874, contrastive_loss=0.38, total=4168.94, n_correct=2357.13, ppl=3.48, accuracy=56.54, wps=14272.1, ups=1.15, wpb=12436.1, bsz=464.1, num_updates=7000, lr=0.000169031, gnorm=0.595, clip=0, loss_scale=4, train_wall=87, gb_free=16.3, wall=5725
2023-08-23 03:20:35 | INFO | train_inner | epoch 005:   1211 / 1474 loss=2.409, trans_loss=3.562, nll_loss=1.789, w2v_ctc_loss=1.344, task_loss=0.888, contrastive_loss=0.283, total=4171.16, n_correct=2366.93, ppl=3.45, accuracy=56.745, wps=14360.5, ups=1.15, wpb=12443.2, bsz=456.3, num_updates=7100, lr=0.000167836, gnorm=0.589, clip=0, loss_scale=4, train_wall=86, gb_free=15.5, wall=5812
2023-08-23 03:22:02 | INFO | train_inner | epoch 005:   1311 / 1474 loss=2.38, trans_loss=3.555, nll_loss=1.78, w2v_ctc_loss=1.329, task_loss=0.894, contrastive_loss=0.241, total=4126.97, n_correct=2351.6, ppl=3.44, accuracy=56.981, wps=14151, ups=1.15, wpb=12317.9, bsz=443.4, num_updates=7200, lr=0.000166667, gnorm=0.578, clip=0, loss_scale=4, train_wall=86, gb_free=15.1, wall=5899
2023-08-23 03:23:29 | INFO | train_inner | epoch 005:   1411 / 1474 loss=2.397, trans_loss=3.556, nll_loss=1.783, w2v_ctc_loss=1.328, task_loss=0.88, contrastive_loss=0.307, total=4138.54, n_correct=2361.53, ppl=3.44, accuracy=57.062, wps=14284.6, ups=1.16, wpb=12359.3, bsz=459, num_updates=7300, lr=0.000165521, gnorm=0.589, clip=0, loss_scale=4, train_wall=86, gb_free=16.4, wall=5985
2023-08-23 03:24:23 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 03:24:55 | INFO | dev_st | epoch 005 | valid on 'dev_st' subset | loss 4.277 | trans_loss 5.482 | nll_loss 2.831 | w2v_ctc_loss 1.493 | task_loss 4.484 | contrastive_loss 0.443 | total 4003.4 | n_correct 2464.8 | ppl 7.11 | accuracy 61.568 | uer 23.186 | wer 24.846 | raw_wer 24.846 | bleu 18.58 | wps 1650.2 | wpb 4003.4 | bsz 141.8 | num_updates 7363 | best_bleu 18.58
2023-08-23 03:24:55 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 5 @ 7363 updates
2023-08-23 03:24:55 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:25:02 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:25:07 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 5 @ 7363 updates, score 18.58) (writing took 12.043395632994361 seconds)
2023-08-23 03:25:08 | INFO | fairseq_cli.train | end of epoch 5 (average epoch stats below)
2023-08-23 03:25:08 | INFO | train | epoch 005 | loss 2.472 | trans_loss 3.582 | nll_loss 1.815 | w2v_ctc_loss 1.376 | task_loss 0.875 | contrastive_loss 0.369 | total 4138.65 | n_correct 2311.98 | ppl 3.52 | accuracy 55.863 | wps 13251.5 | ups 1.07 | wpb 12355.8 | bsz 458.5 | num_updates 7363 | lr 0.000164812 | gnorm 0.611 | clip 0 | loss_scale 4 | train_wall 1268 | gb_free 15.8 | wall 6084
2023-08-23 03:25:08 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 03:25:08 | INFO | fairseq.trainer | begin training epoch 6
2023-08-23 03:25:08 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 03:25:47 | INFO | train_inner | epoch 006:     37 / 1474 loss=2.38, trans_loss=3.54, nll_loss=1.761, w2v_ctc_loss=1.322, task_loss=0.902, contrastive_loss=0.301, total=4113.87, n_correct=2365.52, ppl=3.39, accuracy=57.501, wps=8868.5, ups=0.72, wpb=12276.7, bsz=447.4, num_updates=7400, lr=0.000164399, gnorm=0.588, clip=0, loss_scale=4, train_wall=86, gb_free=17.5, wall=6124
2023-08-23 03:27:13 | INFO | train_inner | epoch 006:    137 / 1474 loss=2.332, trans_loss=3.51, nll_loss=1.724, w2v_ctc_loss=1.268, task_loss=0.867, contrastive_loss=0.338, total=4161.2, n_correct=2424.21, ppl=3.3, accuracy=58.257, wps=14444.7, ups=1.16, wpb=12428.5, bsz=458.1, num_updates=7500, lr=0.000163299, gnorm=0.565, clip=0, loss_scale=4, train_wall=85, gb_free=16.6, wall=6210
2023-08-23 03:28:39 | INFO | train_inner | epoch 006:    237 / 1474 loss=2.336, trans_loss=3.523, nll_loss=1.741, w2v_ctc_loss=1.301, task_loss=0.941, contrastive_loss=0.246, total=4110.12, n_correct=2379.28, ppl=3.34, accuracy=57.888, wps=14249.8, ups=1.16, wpb=12279.2, bsz=437.3, num_updates=7600, lr=0.000162221, gnorm=0.565, clip=0, loss_scale=4, train_wall=86, gb_free=16.8, wall=6296
2023-08-23 03:30:07 | INFO | train_inner | epoch 006:    337 / 1474 loss=2.368, trans_loss=3.511, nll_loss=1.725, w2v_ctc_loss=1.25, task_loss=0.822, contrastive_loss=0.546, total=4170.52, n_correct=2433.9, ppl=3.31, accuracy=58.36, wps=14168.9, ups=1.14, wpb=12453.1, bsz=488.4, num_updates=7700, lr=0.000161165, gnorm=0.58, clip=0, loss_scale=4, train_wall=87, gb_free=15.3, wall=6384
2023-08-23 03:31:33 | INFO | train_inner | epoch 006:    437 / 1474 loss=2.301, trans_loss=3.507, nll_loss=1.72, w2v_ctc_loss=1.258, task_loss=0.842, contrastive_loss=0.258, total=4154.89, n_correct=2438.08, ppl=3.29, accuracy=58.68, wps=14417.5, ups=1.16, wpb=12405.6, bsz=470.4, num_updates=7800, lr=0.000160128, gnorm=0.564, clip=0, loss_scale=4, train_wall=85, gb_free=16, wall=6470
2023-08-23 03:32:59 | INFO | train_inner | epoch 006:    537 / 1474 loss=2.299, trans_loss=3.509, nll_loss=1.721, w2v_ctc_loss=1.266, task_loss=0.872, contrastive_loss=0.244, total=4174.46, n_correct=2450.79, ppl=3.3, accuracy=58.709, wps=14432.1, ups=1.16, wpb=12460.1, bsz=458.3, num_updates=7900, lr=0.000159111, gnorm=0.555, clip=0, loss_scale=4, train_wall=86, gb_free=16.9, wall=6556
2023-08-23 03:34:25 | INFO | train_inner | epoch 006:    637 / 1474 loss=2.302, trans_loss=3.511, nll_loss=1.725, w2v_ctc_loss=1.251, task_loss=0.833, contrastive_loss=0.296, total=4145.19, n_correct=2431.45, ppl=3.3, accuracy=58.657, wps=14414.9, ups=1.17, wpb=12372.7, bsz=470.9, num_updates=8000, lr=0.000158114, gnorm=0.557, clip=0, loss_scale=4, train_wall=85, gb_free=15.5, wall=6642
2023-08-23 03:34:25 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 03:34:58 | INFO | dev_st | epoch 006 | valid on 'dev_st' subset | loss 4.221 | trans_loss 5.406 | nll_loss 2.734 | w2v_ctc_loss 1.529 | task_loss 4.554 | contrastive_loss 0.397 | total 4003.4 | n_correct 2508 | ppl 6.65 | accuracy 62.647 | uer 22.669 | wer 24.615 | raw_wer 24.615 | bleu 19.02 | wps 1638 | wpb 4003.4 | bsz 141.8 | num_updates 8000 | best_bleu 19.02
2023-08-23 03:34:58 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 6 @ 8000 updates
2023-08-23 03:34:58 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_6_8000.pt
2023-08-23 03:35:01 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_6_8000.pt
2023-08-23 03:35:10 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_6_8000.pt (epoch 6 @ 8000 updates, score 19.02) (writing took 11.978508225060068 seconds)
2023-08-23 03:36:37 | INFO | train_inner | epoch 006:    737 / 1474 loss=2.297, trans_loss=3.509, nll_loss=1.722, w2v_ctc_loss=1.266, task_loss=0.892, contrastive_loss=0.248, total=4151.01, n_correct=2436.76, ppl=3.3, accuracy=58.703, wps=9410.9, ups=0.76, wpb=12393.7, bsz=454.2, num_updates=8100, lr=0.000157135, gnorm=0.553, clip=0, loss_scale=4, train_wall=86, gb_free=12.6, wall=6774
2023-08-23 03:38:04 | INFO | train_inner | epoch 006:    837 / 1474 loss=2.287, trans_loss=3.511, nll_loss=1.724, w2v_ctc_loss=1.259, task_loss=0.928, contrastive_loss=0.228, total=4108.83, n_correct=2409.22, ppl=3.3, accuracy=58.635, wps=14135.5, ups=1.15, wpb=12267.1, bsz=439.4, num_updates=8200, lr=0.000156174, gnorm=0.553, clip=0, loss_scale=8, train_wall=86, gb_free=16.8, wall=6860
2023-08-23 03:39:31 | INFO | train_inner | epoch 006:    937 / 1474 loss=2.314, trans_loss=3.513, nll_loss=1.727, w2v_ctc_loss=1.265, task_loss=0.921, contrastive_loss=0.328, total=4076.46, n_correct=2386.85, ppl=3.31, accuracy=58.552, wps=13986.9, ups=1.15, wpb=12166, bsz=443, num_updates=8300, lr=0.00015523, gnorm=0.561, clip=0, loss_scale=8, train_wall=86, gb_free=12.3, wall=6947
2023-08-23 03:40:57 | INFO | train_inner | epoch 006:   1037 / 1474 loss=2.304, trans_loss=3.498, nll_loss=1.709, w2v_ctc_loss=1.239, task_loss=0.823, contrastive_loss=0.396, total=4175.9, n_correct=2462.81, ppl=3.27, accuracy=58.977, wps=14473.5, ups=1.16, wpb=12465, bsz=480.4, num_updates=8400, lr=0.000154303, gnorm=0.561, clip=0, loss_scale=8, train_wall=85, gb_free=13.8, wall=7033
2023-08-23 03:42:23 | INFO | train_inner | epoch 006:   1137 / 1474 loss=2.278, trans_loss=3.498, nll_loss=1.709, w2v_ctc_loss=1.254, task_loss=0.966, contrastive_loss=0.234, total=4077.2, n_correct=2402.88, ppl=3.27, accuracy=58.935, wps=14090.8, ups=1.16, wpb=12172.7, bsz=430.6, num_updates=8500, lr=0.000153393, gnorm=0.558, clip=0, loss_scale=8, train_wall=86, gb_free=16, wall=7120
2023-08-23 03:43:50 | INFO | train_inner | epoch 006:   1237 / 1474 loss=2.327, trans_loss=3.491, nll_loss=1.702, w2v_ctc_loss=1.234, task_loss=0.86, contrastive_loss=0.543, total=4133.46, n_correct=2441.72, ppl=3.25, accuracy=59.072, wps=14171.3, ups=1.15, wpb=12346.4, bsz=470.3, num_updates=8600, lr=0.000152499, gnorm=0.562, clip=0, loss_scale=8, train_wall=86, gb_free=11.9, wall=7207
2023-08-23 03:45:16 | INFO | train_inner | epoch 006:   1337 / 1474 loss=2.248, trans_loss=3.493, nll_loss=1.7, w2v_ctc_loss=1.234, task_loss=0.869, contrastive_loss=0.21, total=4127.77, n_correct=2455.23, ppl=3.25, accuracy=59.481, wps=14377.2, ups=1.17, wpb=12312.7, bsz=454.1, num_updates=8700, lr=0.00015162, gnorm=0.547, clip=0, loss_scale=8, train_wall=85, gb_free=16.7, wall=7293
2023-08-23 03:46:43 | INFO | train_inner | epoch 006:   1437 / 1474 loss=2.247, trans_loss=3.486, nll_loss=1.694, w2v_ctc_loss=1.231, task_loss=0.88, contrastive_loss=0.217, total=4190.32, n_correct=2495.28, ppl=3.23, accuracy=59.549, wps=14326.3, ups=1.15, wpb=12507.6, bsz=460.5, num_updates=8800, lr=0.000150756, gnorm=0.539, clip=0, loss_scale=8, train_wall=87, gb_free=16.5, wall=7380
2023-08-23 03:47:15 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 03:47:48 | INFO | dev_st | epoch 006 | valid on 'dev_st' subset | loss 4.161 | trans_loss 5.361 | nll_loss 2.683 | w2v_ctc_loss 1.45 | task_loss 4.556 | contrastive_loss 0.382 | total 4003.4 | n_correct 2529.1 | ppl 6.42 | accuracy 63.174 | uer 21.61 | wer 23.318 | raw_wer 23.318 | bleu 19.57 | wps 1597.6 | wpb 4003.4 | bsz 141.8 | num_updates 8837 | best_bleu 19.57
2023-08-23 03:47:48 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 6 @ 8837 updates
2023-08-23 03:47:48 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:47:54 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 03:47:59 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 6 @ 8837 updates, score 19.57) (writing took 11.065078565035947 seconds)
2023-08-23 03:47:59 | INFO | fairseq_cli.train | end of epoch 6 (average epoch stats below)
2023-08-23 03:47:59 | INFO | train | epoch 006 | loss 2.301 | trans_loss 3.505 | nll_loss 1.717 | w2v_ctc_loss 1.255 | task_loss 0.877 | contrastive_loss 0.308 | total 4138.65 | n_correct 2431.95 | ppl 3.29 | accuracy 58.762 | wps 13279.8 | ups 1.07 | wpb 12355.8 | bsz 458.5 | num_updates 8837 | lr 0.00015044 | gnorm 0.558 | clip 0 | loss_scale 8 | train_wall 1265 | gb_free 14.7 | wall 7456
2023-08-23 03:47:59 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 03:47:59 | INFO | fairseq.trainer | begin training epoch 7
2023-08-23 03:47:59 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 03:49:01 | INFO | train_inner | epoch 007:     63 / 1474 loss=2.215, trans_loss=3.472, nll_loss=1.676, w2v_ctc_loss=1.2, task_loss=0.853, contrastive_loss=0.227, total=4110.43, n_correct=2466.41, ppl=3.2, accuracy=60.004, wps=8889.2, ups=0.72, wpb=12272.9, bsz=462.8, num_updates=8900, lr=0.000149906, gnorm=0.538, clip=0, loss_scale=8, train_wall=86, gb_free=17.1, wall=7518
2023-08-23 03:50:27 | INFO | train_inner | epoch 007:    163 / 1474 loss=2.217, trans_loss=3.465, nll_loss=1.666, w2v_ctc_loss=1.187, task_loss=0.89, contrastive_loss=0.295, total=4109.53, n_correct=2471.36, ppl=3.17, accuracy=60.137, wps=14302.3, ups=1.17, wpb=12269.6, bsz=454.1, num_updates=9000, lr=0.000149071, gnorm=0.547, clip=0, loss_scale=8, train_wall=85, gb_free=13.2, wall=7604
2023-08-23 03:51:53 | INFO | train_inner | epoch 007:    263 / 1474 loss=2.195, trans_loss=3.459, nll_loss=1.657, w2v_ctc_loss=1.19, task_loss=0.879, contrastive_loss=0.204, total=4133.29, n_correct=2495.54, ppl=3.15, accuracy=60.377, wps=14334.2, ups=1.16, wpb=12335.8, bsz=455.5, num_updates=9100, lr=0.00014825, gnorm=0.544, clip=0, loss_scale=8, train_wall=85, gb_free=14.8, wall=7690
2023-08-23 03:53:20 | INFO | train_inner | epoch 007:    363 / 1474 loss=2.242, trans_loss=3.465, nll_loss=1.666, w2v_ctc_loss=1.177, task_loss=0.852, contrastive_loss=0.463, total=4194.76, n_correct=2525.41, ppl=3.17, accuracy=60.204, wps=14382.7, ups=1.15, wpb=12518.2, bsz=477.6, num_updates=9200, lr=0.000147442, gnorm=0.533, clip=0, loss_scale=8, train_wall=86, gb_free=12.6, wall=7777
2023-08-23 03:54:47 | INFO | train_inner | epoch 007:    463 / 1474 loss=2.224, trans_loss=3.462, nll_loss=1.664, w2v_ctc_loss=1.176, task_loss=0.869, contrastive_loss=0.386, total=4153.22, n_correct=2502.6, ppl=3.17, accuracy=60.257, wps=14280.6, ups=1.15, wpb=12403.3, bsz=463, num_updates=9300, lr=0.000146647, gnorm=0.537, clip=0, loss_scale=8, train_wall=86, gb_free=16.4, wall=7864
2023-08-23 03:56:13 | INFO | train_inner | epoch 007:    563 / 1474 loss=2.187, trans_loss=3.458, nll_loss=1.656, w2v_ctc_loss=1.179, task_loss=0.86, contrastive_loss=0.211, total=4168.14, n_correct=2526.34, ppl=3.15, accuracy=60.611, wps=14489.7, ups=1.17, wpb=12434.7, bsz=459.8, num_updates=9400, lr=0.000145865, gnorm=0.533, clip=0, loss_scale=8, train_wall=85, gb_free=16.6, wall=7950
2023-08-23 03:57:40 | INFO | train_inner | epoch 007:    663 / 1474 loss=2.173, trans_loss=3.456, nll_loss=1.654, w2v_ctc_loss=1.17, task_loss=0.87, contrastive_loss=0.195, total=4157.82, n_correct=2524.55, ppl=3.15, accuracy=60.718, wps=14314.2, ups=1.15, wpb=12406.4, bsz=455.4, num_updates=9500, lr=0.000145095, gnorm=0.529, clip=0, loss_scale=8, train_wall=86, gb_free=15.2, wall=8036
2023-08-23 03:59:07 | INFO | train_inner | epoch 007:    763 / 1474 loss=2.172, trans_loss=3.45, nll_loss=1.648, w2v_ctc_loss=1.174, task_loss=0.918, contrastive_loss=0.189, total=4122.1, n_correct=2498.93, ppl=3.13, accuracy=60.623, wps=14107.1, ups=1.15, wpb=12308.4, bsz=446.2, num_updates=9600, lr=0.000144338, gnorm=0.532, clip=0, loss_scale=8, train_wall=87, gb_free=15.3, wall=8123
2023-08-23 04:00:34 | INFO | train_inner | epoch 007:    863 / 1474 loss=2.177, trans_loss=3.458, nll_loss=1.657, w2v_ctc_loss=1.173, task_loss=0.883, contrastive_loss=0.209, total=4147.23, n_correct=2511.38, ppl=3.15, accuracy=60.556, wps=14243.6, ups=1.15, wpb=12377.6, bsz=460.9, num_updates=9700, lr=0.000143592, gnorm=0.536, clip=0, loss_scale=8, train_wall=86, gb_free=17.2, wall=8210
2023-08-23 04:02:01 | INFO | train_inner | epoch 007:    963 / 1474 loss=2.187, trans_loss=3.45, nll_loss=1.648, w2v_ctc_loss=1.159, task_loss=0.834, contrastive_loss=0.303, total=4140.14, n_correct=2513.3, ppl=3.13, accuracy=60.706, wps=14194, ups=1.15, wpb=12359.1, bsz=474.6, num_updates=9800, lr=0.000142857, gnorm=0.535, clip=0, loss_scale=8, train_wall=86, gb_free=15.6, wall=8297
2023-08-23 04:03:28 | INFO | train_inner | epoch 007:   1063 / 1474 loss=2.166, trans_loss=3.459, nll_loss=1.659, w2v_ctc_loss=1.173, task_loss=0.92, contrastive_loss=0.175, total=4103.51, n_correct=2485.74, ppl=3.16, accuracy=60.576, wps=14144.1, ups=1.15, wpb=12251.1, bsz=437.5, num_updates=9900, lr=0.000142134, gnorm=0.526, clip=0, loss_scale=8, train_wall=86, gb_free=16.4, wall=8384
2023-08-23 04:04:54 | INFO | train_inner | epoch 007:   1163 / 1474 loss=2.216, trans_loss=3.444, nll_loss=1.642, w2v_ctc_loss=1.16, task_loss=0.853, contrastive_loss=0.431, total=4137.04, n_correct=2520, ppl=3.12, accuracy=60.913, wps=14329.4, ups=1.16, wpb=12361.6, bsz=470.9, num_updates=10000, lr=0.000141421, gnorm=0.538, clip=0, loss_scale=8, train_wall=86, gb_free=15.7, wall=8470
2023-08-23 04:04:54 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 04:05:27 | INFO | dev_st | epoch 007 | valid on 'dev_st' subset | loss 4.093 | trans_loss 5.302 | nll_loss 2.606 | w2v_ctc_loss 1.386 | task_loss 4.616 | contrastive_loss 0.359 | total 4003.4 | n_correct 2568 | ppl 6.09 | accuracy 64.145 | uer 20.128 | wer 21.819 | raw_wer 21.819 | bleu 20.24 | wps 1623.2 | wpb 4003.4 | bsz 141.8 | num_updates 10000 | best_bleu 20.24
2023-08-23 04:05:27 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 7 @ 10000 updates
2023-08-23 04:05:27 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_7_10000.pt
2023-08-23 04:05:30 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_7_10000.pt
2023-08-23 04:05:40 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_7_10000.pt (epoch 7 @ 10000 updates, score 20.24) (writing took 13.470186279038899 seconds)
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 04:07:06 | INFO | train_inner | epoch 007:   1263 / 1474 loss=2.156, trans_loss=3.447, nll_loss=1.645, w2v_ctc_loss=1.156, task_loss=0.889, contrastive_loss=0.201, total=4129.52, n_correct=2512.41, ppl=3.13, accuracy=60.84, wps=9347.3, ups=0.76, wpb=12331.4, bsz=450.2, num_updates=10100, lr=0.00014072, gnorm=0.427, clip=0, loss_scale=8, train_wall=85, gb_free=16.5, wall=8602
2023-08-23 04:08:32 | INFO | train_inner | epoch 007:   1363 / 1474 loss=2.174, trans_loss=3.441, nll_loss=1.637, w2v_ctc_loss=1.165, task_loss=0.825, contrastive_loss=0.239, total=4172.87, n_correct=2550.21, ppl=3.11, accuracy=61.114, wps=14467.5, ups=1.16, wpb=12458.1, bsz=476.2, num_updates=10200, lr=0.000140028, gnorm=0.43, clip=0, loss_scale=8, train_wall=85, gb_free=16.8, wall=8688
2023-08-23 04:10:00 | INFO | train_inner | epoch 007:   1463 / 1474 loss=2.183, trans_loss=3.445, nll_loss=1.644, w2v_ctc_loss=1.164, task_loss=0.947, contrastive_loss=0.3, total=4109.42, n_correct=2497.91, ppl=3.13, accuracy=60.785, wps=13987.8, ups=1.14, wpb=12278.1, bsz=443.8, num_updates=10300, lr=0.000139347, gnorm=0.429, clip=0, loss_scale=16, train_wall=87, gb_free=16, wall=8776
2023-08-23 04:10:09 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
2023-08-23 04:10:42 | INFO | dev_st | epoch 007 | valid on 'dev_st' subset | loss 4.097 | trans_loss 5.299 | nll_loss 2.6 | w2v_ctc_loss 1.402 | task_loss 4.593 | contrastive_loss 0.367 | total 4003.4 | n_correct 2566.2 | ppl 6.06 | accuracy 64.101 | uer 20.54 | wer 22.199 | raw_wer 22.199 | bleu 20.15 | wps 1591.8 | wpb 4003.4 | bsz 141.8 | num_updates 10311 | best_bleu 20.24
2023-08-23 04:10:42 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 7 @ 10311 updates
2023-08-23 04:10:42 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_20.1504.pt
2023-08-23 04:10:45 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_20.1504.pt
2023-08-23 04:10:50 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_20.1504.pt (epoch 7 @ 10311 updates, score 20.15) (writing took 8.2530571219977 seconds)
2023-08-23 04:10:51 | INFO | fairseq_cli.train | end of epoch 7 (average epoch stats below)
2023-08-23 04:10:51 | INFO | train | epoch 007 | loss 2.191 | trans_loss 3.455 | nll_loss 1.653 | w2v_ctc_loss 1.172 | task_loss 0.878 | contrastive_loss 0.27 | total 4138.65 | n_correct 2507.43 | ppl 3.15 | accuracy 60.586 | wps 13277.4 | ups 1.07 | wpb 12355.8 | bsz 458.5 | num_updates 10311 | lr 0.000139272 | gnorm 0.513 | clip 0 | loss_scale 16 | train_wall 1267 | gb_free 12.8 | wall 8827
2023-08-23 04:10:51 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 04:10:51 | INFO | fairseq.trainer | begin training epoch 8
2023-08-23 04:10:51 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 04:12:16 | INFO | train_inner | epoch 008:     89 / 1474 loss=2.124, trans_loss=3.433, nll_loss=1.623, w2v_ctc_loss=1.127, task_loss=0.925, contrastive_loss=0.194, total=4116.25, n_correct=2530.21, ppl=3.08, accuracy=61.469, wps=9023.8, ups=0.74, wpb=12273, bsz=443.3, num_updates=10400, lr=0.000138675, gnorm=0.424, clip=0, loss_scale=16, train_wall=86, gb_free=16.7, wall=8912
2023-08-23 04:13:42 | INFO | train_inner | epoch 008:    189 / 1474 loss=2.125, trans_loss=3.424, nll_loss=1.611, w2v_ctc_loss=1.125, task_loss=0.952, contrastive_loss=0.215, total=4037.23, n_correct=2489.26, ppl=3.06, accuracy=61.658, wps=13952.3, ups=1.16, wpb=12041.5, bsz=428.6, num_updates=10500, lr=0.000138013, gnorm=0.43, clip=0, loss_scale=16, train_wall=86, gb_free=12.4, wall=8999
2023-08-23 04:15:08 | INFO | train_inner | epoch 008:    289 / 1474 loss=2.12, trans_loss=3.419, nll_loss=1.606, w2v_ctc_loss=1.122, task_loss=0.822, contrastive_loss=0.209, total=4207.78, n_correct=2599.8, ppl=3.05, accuracy=61.786, wps=14556.4, ups=1.16, wpb=12556.5, bsz=488.1, num_updates=10600, lr=0.000137361, gnorm=0.429, clip=0, loss_scale=16, train_wall=86, gb_free=12.4, wall=9085
2023-08-23 04:16:36 | INFO | train_inner | epoch 008:    389 / 1474 loss=2.137, trans_loss=3.424, nll_loss=1.613, w2v_ctc_loss=1.137, task_loss=0.936, contrastive_loss=0.233, total=4127.24, n_correct=2541.86, ppl=3.06, accuracy=61.587, wps=14075.3, ups=1.14, wpb=12316.2, bsz=441.4, num_updates=10700, lr=0.000136717, gnorm=0.426, clip=0, loss_scale=16, train_wall=87, gb_free=11.3, wall=9172
2023-08-23 04:18:03 | INFO | train_inner | epoch 008:    489 / 1474 loss=2.188, trans_loss=3.422, nll_loss=1.612, w2v_ctc_loss=1.115, task_loss=0.787, contrastive_loss=0.492, total=4203.76, n_correct=2595.39, ppl=3.06, accuracy=61.74, wps=14438.9, ups=1.15, wpb=12548.2, bsz=504.5, num_updates=10800, lr=0.000136083, gnorm=0.428, clip=0, loss_scale=16, train_wall=86, gb_free=14.1, wall=9259
2023-08-23 04:19:29 | INFO | train_inner | epoch 008:    589 / 1474 loss=2.122, trans_loss=3.419, nll_loss=1.611, w2v_ctc_loss=1.138, task_loss=0.96, contrastive_loss=0.168, total=4062.5, n_correct=2498.81, ppl=3.06, accuracy=61.509, wps=13985.9, ups=1.15, wpb=12145.4, bsz=427.9, num_updates=10900, lr=0.000135457, gnorm=0.427, clip=0, loss_scale=16, train_wall=86, gb_free=10.8, wall=9346
2023-08-23 04:20:56 | INFO | train_inner | epoch 008:    689 / 1474 loss=2.113, trans_loss=3.416, nll_loss=1.604, w2v_ctc_loss=1.131, task_loss=0.906, contrastive_loss=0.179, total=4142.78, n_correct=2564.61, ppl=3.04, accuracy=61.906, wps=14262.6, ups=1.15, wpb=12364.4, bsz=448.6, num_updates=11000, lr=0.00013484, gnorm=0.421, clip=0, loss_scale=16, train_wall=86, gb_free=15.4, wall=9433
2023-08-23 04:22:22 | INFO | train_inner | epoch 008:    789 / 1474 loss=2.125, trans_loss=3.412, nll_loss=1.602, w2v_ctc_loss=1.123, task_loss=0.901, contrastive_loss=0.265, total=4118.9, n_correct=2547.77, ppl=3.04, accuracy=61.856, wps=14301.8, ups=1.16, wpb=12310.9, bsz=447.8, num_updates=11100, lr=0.000134231, gnorm=0.425, clip=0, loss_scale=16, train_wall=85, gb_free=14.9, wall=9519
2023-08-23 04:23:49 | INFO | train_inner | epoch 008:    889 / 1474 loss=2.122, trans_loss=3.416, nll_loss=1.606, w2v_ctc_loss=1.11, task_loss=0.84, contrastive_loss=0.273, total=4169.01, n_correct=2581.84, ppl=3.04, accuracy=61.929, wps=14424.2, ups=1.16, wpb=12452.5, bsz=473.7, num_updates=11200, lr=0.000133631, gnorm=0.423, clip=0, loss_scale=16, train_wall=86, gb_free=15.7, wall=9605
2023-08-23 04:25:15 | INFO | train_inner | epoch 008:    989 / 1474 loss=2.095, trans_loss=3.414, nll_loss=1.602, w2v_ctc_loss=1.111, task_loss=0.839, contrastive_loss=0.172, total=4154.69, n_correct=2581.05, ppl=3.03, accuracy=62.124, wps=14429, ups=1.16, wpb=12403.4, bsz=464.9, num_updates=11300, lr=0.000133038, gnorm=0.419, clip=0, loss_scale=16, train_wall=85, gb_free=17.4, wall=9691
2023-08-23 04:26:43 | INFO | train_inner | epoch 008:   1089 / 1474 loss=2.141, trans_loss=3.418, nll_loss=1.607, w2v_ctc_loss=1.11, task_loss=0.874, contrastive_loss=0.394, total=4199.1, n_correct=2596.74, ppl=3.05, accuracy=61.84, wps=14246.1, ups=1.14, wpb=12534.3, bsz=465.3, num_updates=11400, lr=0.000132453, gnorm=0.419, clip=0, loss_scale=16, train_wall=87, gb_free=12.2, wall=9779
2023-08-23 04:28:08 | INFO | train_inner | epoch 008:   1189 / 1474 loss=2.1, trans_loss=3.409, nll_loss=1.597, w2v_ctc_loss=1.114, task_loss=0.827, contrastive_loss=0.181, total=4177.31, n_correct=2595.55, ppl=3.02, accuracy=62.134, wps=14560.3, ups=1.17, wpb=12476.3, bsz=472.6, num_updates=11500, lr=0.000131876, gnorm=0.418, clip=0, loss_scale=16, train_wall=85, gb_free=14.4, wall=9865
2023-08-23 04:29:34 | INFO | train_inner | epoch 008:   1289 / 1474 loss=2.109, trans_loss=3.413, nll_loss=1.602, w2v_ctc_loss=1.123, task_loss=0.917, contrastive_loss=0.204, total=4063.85, n_correct=2514.29, ppl=3.04, accuracy=61.87, wps=14140, ups=1.16, wpb=12140.6, bsz=438.4, num_updates=11600, lr=0.000131306, gnorm=0.423, clip=0, loss_scale=16, train_wall=85, gb_free=16.5, wall=9951
2023-08-23 04:31:00 | INFO | train_inner | epoch 008:   1389 / 1474 loss=2.118, trans_loss=3.416, nll_loss=1.606, w2v_ctc_loss=1.113, task_loss=0.868, contrastive_loss=0.253, total=4141.5, n_correct=2569.83, ppl=3.04, accuracy=62.051, wps=14427, ups=1.17, wpb=12367.2, bsz=461.5, num_updates=11700, lr=0.000130744, gnorm=0.421, clip=0, loss_scale=16, train_wall=85, gb_free=16.1, wall=10036
2023-08-23 04:32:13 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 04:32:47 | INFO | dev_st | epoch 008 | valid on 'dev_st' subset | loss 4.043 | trans_loss 5.249 | nll_loss 2.536 | w2v_ctc_loss 1.359 | task_loss 4.581 | contrastive_loss 0.339 | total 4003.4 | n_correct 2598.3 | ppl 5.8 | accuracy 64.902 | uer 19.81 | wer 21.576 | raw_wer 21.576 | bleu 20.66 | wps 1587 | wpb 4003.4 | bsz 141.8 | num_updates 11785 | best_bleu 20.66
2023-08-23 04:32:47 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 8 @ 11785 updates
2023-08-23 04:32:47 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 04:32:53 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 04:32:59 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 8 @ 11785 updates, score 20.66) (writing took 12.743634168058634 seconds)
2023-08-23 04:33:00 | INFO | fairseq_cli.train | end of epoch 8 (average epoch stats below)
2023-08-23 04:33:00 | INFO | train | epoch 008 | loss 2.124 | trans_loss 3.418 | nll_loss 1.607 | w2v_ctc_loss 1.12 | task_loss 0.878 | contrastive_loss 0.252 | total 4138.65 | n_correct 2559.3 | ppl 3.05 | accuracy 61.839 | wps 13702.9 | ups 1.11 | wpb 12355.8 | bsz 458.5 | num_updates 11785 | lr 0.000130272 | gnorm 0.423 | clip 0 | loss_scale 16 | train_wall 1265 | gb_free 16.5 | wall 10157
2023-08-23 04:33:00 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 04:33:00 | INFO | fairseq.trainer | begin training epoch 9
2023-08-23 04:33:00 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 04:33:21 | INFO | train_inner | epoch 009:     15 / 1474 loss=2.123, trans_loss=3.412, nll_loss=1.598, w2v_ctc_loss=1.097, task_loss=0.844, contrastive_loss=0.376, total=4139.35, n_correct=2574.55, ppl=3.03, accuracy=62.197, wps=8759, ups=0.71, wpb=12350.9, bsz=472.9, num_updates=11800, lr=0.000130189, gnorm=0.415, clip=0, loss_scale=16, train_wall=86, gb_free=15.2, wall=10177
2023-08-23 04:34:47 | INFO | train_inner | epoch 009:    115 / 1474 loss=2.059, trans_loss=3.385, nll_loss=1.565, w2v_ctc_loss=1.071, task_loss=0.832, contrastive_loss=0.195, total=4181.9, n_correct=2635.7, ppl=2.96, accuracy=63.026, wps=14471.1, ups=1.16, wpb=12488.1, bsz=475.9, num_updates=11900, lr=0.000129641, gnorm=0.417, clip=0, loss_scale=16, train_wall=86, gb_free=15.9, wall=10264
2023-08-23 04:36:13 | INFO | train_inner | epoch 009:    215 / 1474 loss=2.051, trans_loss=3.39, nll_loss=1.57, w2v_ctc_loss=1.075, task_loss=0.946, contrastive_loss=0.154, total=4062.07, n_correct=2552.08, ppl=2.97, accuracy=62.827, wps=14058.2, ups=1.16, wpb=12129.1, bsz=431.6, num_updates=12000, lr=0.000129099, gnorm=0.415, clip=0, loss_scale=16, train_wall=86, gb_free=15.1, wall=10350
2023-08-23 04:36:13 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 04:36:47 | INFO | dev_st | epoch 009 | valid on 'dev_st' subset | loss 4.034 | trans_loss 5.256 | nll_loss 2.545 | w2v_ctc_loss 1.317 | task_loss 4.573 | contrastive_loss 0.34 | total 4003.4 | n_correct 2600.8 | ppl 5.83 | accuracy 64.965 | uer 19.369 | wer 21.252 | raw_wer 21.252 | bleu 20.77 | wps 1549.9 | wpb 4003.4 | bsz 141.8 | num_updates 12000 | best_bleu 20.77
2023-08-23 04:36:47 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 9 @ 12000 updates
2023-08-23 04:36:47 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_9_12000.pt
2023-08-23 04:36:50 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_9_12000.pt
2023-08-23 04:37:00 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_9_12000.pt (epoch 9 @ 12000 updates, score 20.77) (writing took 12.444202940096147 seconds)
2023-08-23 04:38:26 | INFO | train_inner | epoch 009:    315 / 1474 loss=2.048, trans_loss=3.378, nll_loss=1.558, w2v_ctc_loss=1.059, task_loss=0.819, contrastive_loss=0.202, total=4152.1, n_correct=2620.42, ppl=2.94, accuracy=63.111, wps=9382.7, ups=0.76, wpb=12407.3, bsz=476.6, num_updates=12100, lr=0.000128565, gnorm=0.413, clip=0, loss_scale=16, train_wall=85, gb_free=16, wall=10482
2023-08-23 04:39:53 | INFO | train_inner | epoch 009:    415 / 1474 loss=2.055, trans_loss=3.394, nll_loss=1.576, w2v_ctc_loss=1.071, task_loss=0.859, contrastive_loss=0.172, total=4203.78, n_correct=2632.12, ppl=2.98, accuracy=62.613, wps=14353.8, ups=1.14, wpb=12551.8, bsz=469.8, num_updates=12200, lr=0.000128037, gnorm=0.417, clip=0, loss_scale=16, train_wall=87, gb_free=16.8, wall=10570
2023-08-23 04:41:19 | INFO | train_inner | epoch 009:    515 / 1474 loss=2.085, trans_loss=3.394, nll_loss=1.575, w2v_ctc_loss=1.096, task_loss=0.923, contrastive_loss=0.221, total=4112.78, n_correct=2574.1, ppl=2.98, accuracy=62.588, wps=14249.2, ups=1.16, wpb=12275.6, bsz=437.7, num_updates=12300, lr=0.000127515, gnorm=0.418, clip=0, loss_scale=32, train_wall=86, gb_free=15.8, wall=10656
2023-08-23 04:42:46 | INFO | train_inner | epoch 009:    615 / 1474 loss=2.045, trans_loss=3.384, nll_loss=1.566, w2v_ctc_loss=1.063, task_loss=0.896, contrastive_loss=0.18, total=4131.32, n_correct=2598.28, ppl=2.96, accuracy=62.892, wps=14279.1, ups=1.16, wpb=12347.4, bsz=455, num_updates=12400, lr=0.000127, gnorm=0.413, clip=0, loss_scale=32, train_wall=86, gb_free=17.5, wall=10742
2023-08-23 04:44:12 | INFO | train_inner | epoch 009:    715 / 1474 loss=2.084, trans_loss=3.393, nll_loss=1.577, w2v_ctc_loss=1.088, task_loss=0.899, contrastive_loss=0.261, total=4082.11, n_correct=2555.38, ppl=2.98, accuracy=62.599, wps=14192.2, ups=1.16, wpb=12194.8, bsz=449.7, num_updates=12500, lr=0.000126491, gnorm=0.419, clip=0, loss_scale=32, train_wall=85, gb_free=16.7, wall=10828
2023-08-23 04:45:39 | INFO | train_inner | epoch 009:    815 / 1474 loss=2.119, trans_loss=3.385, nll_loss=1.568, w2v_ctc_loss=1.08, task_loss=0.791, contrastive_loss=0.404, total=4221.08, n_correct=2650.59, ppl=2.96, accuracy=62.794, wps=14454.1, ups=1.15, wpb=12613.9, bsz=501.6, num_updates=12600, lr=0.000125988, gnorm=0.42, clip=0, loss_scale=32, train_wall=87, gb_free=17.4, wall=10915
2023-08-23 04:47:06 | INFO | train_inner | epoch 009:    915 / 1474 loss=2.092, trans_loss=3.391, nll_loss=1.571, w2v_ctc_loss=1.073, task_loss=0.909, contrastive_loss=0.383, total=4142.34, n_correct=2600.83, ppl=2.97, accuracy=62.786, wps=14158.6, ups=1.15, wpb=12359.9, bsz=448.9, num_updates=12700, lr=0.000125491, gnorm=0.411, clip=0, loss_scale=32, train_wall=87, gb_free=16.9, wall=11003
2023-08-23 04:48:33 | INFO | train_inner | epoch 009:   1015 / 1474 loss=2.061, trans_loss=3.397, nll_loss=1.579, w2v_ctc_loss=1.086, task_loss=0.986, contrastive_loss=0.168, total=4097.15, n_correct=2564.73, ppl=2.99, accuracy=62.598, wps=14167.9, ups=1.16, wpb=12228.7, bsz=422.6, num_updates=12800, lr=0.000125, gnorm=0.418, clip=0, loss_scale=32, train_wall=86, gb_free=16.5, wall=11089
2023-08-23 04:49:59 | INFO | train_inner | epoch 009:   1115 / 1474 loss=2.057, trans_loss=3.394, nll_loss=1.573, w2v_ctc_loss=1.071, task_loss=0.819, contrastive_loss=0.19, total=4182.29, n_correct=2630.75, ppl=2.98, accuracy=62.902, wps=14352.1, ups=1.15, wpb=12467.1, bsz=477.6, num_updates=12900, lr=0.000124515, gnorm=0.411, clip=0, loss_scale=32, train_wall=86, gb_free=16.9, wall=11176
2023-08-23 04:51:27 | INFO | train_inner | epoch 009:   1215 / 1474 loss=2.066, trans_loss=3.392, nll_loss=1.574, w2v_ctc_loss=1.091, task_loss=0.934, contrastive_loss=0.173, total=4141.43, n_correct=2598.26, ppl=2.98, accuracy=62.738, wps=14184.9, ups=1.15, wpb=12364.7, bsz=446.6, num_updates=13000, lr=0.000124035, gnorm=0.417, clip=0, loss_scale=32, train_wall=87, gb_free=17.2, wall=11263
2023-08-23 04:52:53 | INFO | train_inner | epoch 009:   1315 / 1474 loss=2.092, trans_loss=3.387, nll_loss=1.568, w2v_ctc_loss=1.066, task_loss=0.797, contrastive_loss=0.365, total=4203.91, n_correct=2646.23, ppl=2.96, accuracy=62.947, wps=14514.7, ups=1.16, wpb=12545.2, bsz=492.3, num_updates=13100, lr=0.00012356, gnorm=0.413, clip=0, loss_scale=32, train_wall=86, gb_free=16.9, wall=11350
2023-08-23 04:54:19 | INFO | train_inner | epoch 009:   1415 / 1474 loss=2.051, trans_loss=3.396, nll_loss=1.578, w2v_ctc_loss=1.079, task_loss=0.949, contrastive_loss=0.15, total=4077.08, n_correct=2555.5, ppl=2.99, accuracy=62.68, wps=14181.3, ups=1.17, wpb=12165, bsz=429.1, num_updates=13200, lr=0.000123091, gnorm=0.411, clip=0, loss_scale=32, train_wall=85, gb_free=17, wall=11435
2023-08-23 04:55:09 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 04:55:42 | INFO | dev_st | epoch 009 | valid on 'dev_st' subset | loss 4.024 | trans_loss 5.23 | nll_loss 2.517 | w2v_ctc_loss 1.347 | task_loss 4.643 | contrastive_loss 0.332 | total 4003.4 | n_correct 2608 | ppl 5.72 | accuracy 65.145 | uer 19.144 | wer 20.946 | raw_wer 20.946 | bleu 20.9 | wps 1645.5 | wpb 4003.4 | bsz 141.8 | num_updates 13259 | best_bleu 20.9
2023-08-23 04:55:42 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 9 @ 13259 updates
2023-08-23 04:55:42 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 04:55:48 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 04:55:53 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 9 @ 13259 updates, score 20.9) (writing took 11.498548886971548 seconds)
2023-08-23 04:55:54 | INFO | fairseq_cli.train | end of epoch 9 (average epoch stats below)
2023-08-23 04:55:54 | INFO | train | epoch 009 | loss 2.069 | trans_loss 3.39 | nll_loss 1.571 | w2v_ctc_loss 1.076 | task_loss 0.878 | contrastive_loss 0.235 | total 4138.65 | n_correct 2599.2 | ppl 2.97 | accuracy 62.803 | wps 13253.6 | ups 1.07 | wpb 12355.8 | bsz 458.5 | num_updates 13259 | lr 0.000122817 | gnorm 0.415 | clip 0 | loss_scale 32 | train_wall 1266 | gb_free 11.2 | wall 11531
2023-08-23 04:55:54 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 04:55:54 | INFO | fairseq.trainer | begin training epoch 10
2023-08-23 04:55:54 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 04:56:37 | INFO | train_inner | epoch 010:     41 / 1474 loss=2.051, trans_loss=3.381, nll_loss=1.559, w2v_ctc_loss=1.056, task_loss=0.837, contrastive_loss=0.243, total=4100.86, n_correct=2594.6, ppl=2.95, accuracy=63.27, wps=8877.5, ups=0.73, wpb=12239.9, bsz=470.2, num_updates=13300, lr=0.000122628, gnorm=0.414, clip=0, loss_scale=32, train_wall=85, gb_free=16, wall=11573
2023-08-23 04:58:04 | INFO | train_inner | epoch 010:    141 / 1474 loss=2.005, trans_loss=3.362, nll_loss=1.536, w2v_ctc_loss=1.027, task_loss=0.829, contrastive_loss=0.168, total=4240.18, n_correct=2702.77, ppl=2.9, accuracy=63.742, wps=14537.9, ups=1.15, wpb=12664, bsz=479.1, num_updates=13400, lr=0.000122169, gnorm=0.402, clip=0, loss_scale=32, train_wall=86, gb_free=14.6, wall=11660
2023-08-23 04:59:30 | INFO | train_inner | epoch 010:    241 / 1474 loss=2.038, trans_loss=3.361, nll_loss=1.533, w2v_ctc_loss=1.04, task_loss=0.87, contrastive_loss=0.29, total=4126.3, n_correct=2630.05, ppl=2.89, accuracy=63.739, wps=14278.9, ups=1.16, wpb=12312.3, bsz=460.9, num_updates=13500, lr=0.000121716, gnorm=0.406, clip=0, loss_scale=32, train_wall=86, gb_free=15.2, wall=11747
2023-08-23 05:00:57 | INFO | train_inner | epoch 010:    341 / 1474 loss=2.012, trans_loss=3.361, nll_loss=1.537, w2v_ctc_loss=1.03, task_loss=0.892, contrastive_loss=0.203, total=4132.25, n_correct=2629.64, ppl=2.9, accuracy=63.637, wps=14183.8, ups=1.15, wpb=12352, bsz=452.8, num_updates=13600, lr=0.000121268, gnorm=0.409, clip=0, loss_scale=32, train_wall=86, gb_free=14.3, wall=11834
2023-08-23 05:02:25 | INFO | train_inner | epoch 010:    441 / 1474 loss=2.038, trans_loss=3.366, nll_loss=1.541, w2v_ctc_loss=1.019, task_loss=0.843, contrastive_loss=0.37, total=4203.14, n_correct=2674.92, ppl=2.91, accuracy=63.641, wps=14301.1, ups=1.14, wpb=12548.6, bsz=481.7, num_updates=13700, lr=0.000120824, gnorm=0.408, clip=0, loss_scale=32, train_wall=87, gb_free=16, wall=11921
2023-08-23 05:03:52 | INFO | train_inner | epoch 010:    541 / 1474 loss=2.027, trans_loss=3.376, nll_loss=1.55, w2v_ctc_loss=1.058, task_loss=0.935, contrastive_loss=0.156, total=4106.5, n_correct=2602.68, ppl=2.93, accuracy=63.38, wps=14087, ups=1.15, wpb=12244.6, bsz=440, num_updates=13800, lr=0.000120386, gnorm=0.414, clip=0, loss_scale=32, train_wall=86, gb_free=16.1, wall=12008
2023-08-23 05:05:19 | INFO | train_inner | epoch 010:    641 / 1474 loss=2.045, trans_loss=3.371, nll_loss=1.547, w2v_ctc_loss=1.046, task_loss=0.836, contrastive_loss=0.272, total=4170.61, n_correct=2649.34, ppl=2.92, accuracy=63.524, wps=14325.2, ups=1.15, wpb=12448.2, bsz=476.1, num_updates=13900, lr=0.000119952, gnorm=0.411, clip=0, loss_scale=32, train_wall=86, gb_free=10.3, wall=12095
2023-08-23 05:06:45 | INFO | train_inner | epoch 010:    741 / 1474 loss=2.025, trans_loss=3.37, nll_loss=1.545, w2v_ctc_loss=1.059, task_loss=0.883, contrastive_loss=0.154, total=4123.31, n_correct=2616.55, ppl=2.92, accuracy=63.458, wps=14213.9, ups=1.15, wpb=12306.7, bsz=453, num_updates=14000, lr=0.000119523, gnorm=0.416, clip=0, loss_scale=32, train_wall=86, gb_free=16.6, wall=12182
2023-08-23 05:06:45 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 05:07:18 | INFO | dev_st | epoch 010 | valid on 'dev_st' subset | loss 4.016 | trans_loss 5.227 | nll_loss 2.51 | w2v_ctc_loss 1.332 | task_loss 4.624 | contrastive_loss 0.33 | total 4003.4 | n_correct 2615.1 | ppl 5.69 | accuracy 65.322 | uer 19.391 | wer 21.297 | raw_wer 21.297 | bleu 21.32 | wps 1609.8 | wpb 4003.4 | bsz 141.8 | num_updates 14000 | best_bleu 21.32
2023-08-23 05:07:18 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 10 @ 14000 updates
2023-08-23 05:07:18 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_10_14000.pt
2023-08-23 05:07:21 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_10_14000.pt
2023-08-23 05:07:32 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_10_14000.pt (epoch 10 @ 14000 updates, score 21.32) (writing took 13.274086127988994 seconds)
2023-08-23 05:08:58 | INFO | train_inner | epoch 010:    841 / 1474 loss=2.004, trans_loss=3.365, nll_loss=1.541, w2v_ctc_loss=1.032, task_loss=0.868, contrastive_loss=0.156, total=4125.69, n_correct=2625.99, ppl=2.91, accuracy=63.65, wps=9259.3, ups=0.75, wpb=12321, bsz=456.1, num_updates=14100, lr=0.000119098, gnorm=0.405, clip=0, loss_scale=32, train_wall=85, gb_free=15.4, wall=12315
2023-08-23 05:10:24 | INFO | train_inner | epoch 010:    941 / 1474 loss=2.022, trans_loss=3.367, nll_loss=1.539, w2v_ctc_loss=1.041, task_loss=0.839, contrastive_loss=0.193, total=4170.41, n_correct=2656.71, ppl=2.91, accuracy=63.704, wps=14487.1, ups=1.16, wpb=12437.5, bsz=470.8, num_updates=14200, lr=0.000118678, gnorm=0.408, clip=0, loss_scale=32, train_wall=85, gb_free=15.8, wall=12401
2023-08-23 05:11:51 | INFO | train_inner | epoch 010:   1041 / 1474 loss=2.015, trans_loss=3.365, nll_loss=1.54, w2v_ctc_loss=1.045, task_loss=0.952, contrastive_loss=0.167, total=4072.57, n_correct=2586.25, ppl=2.91, accuracy=63.504, wps=14060.7, ups=1.16, wpb=12161.8, bsz=434.8, num_updates=14300, lr=0.000118262, gnorm=0.416, clip=0, loss_scale=32, train_wall=86, gb_free=16.5, wall=12487
2023-08-23 05:13:16 | INFO | train_inner | epoch 010:   1141 / 1474 loss=2.023, trans_loss=3.375, nll_loss=1.552, w2v_ctc_loss=1.057, task_loss=0.978, contrastive_loss=0.15, total=4041.97, n_correct=2557.82, ppl=2.93, accuracy=63.282, wps=14076.7, ups=1.17, wpb=12067, bsz=421.9, num_updates=14400, lr=0.000117851, gnorm=0.413, clip=0, loss_scale=64, train_wall=85, gb_free=16.2, wall=12573
2023-08-23 05:14:43 | INFO | train_inner | epoch 010:   1241 / 1474 loss=2.009, trans_loss=3.359, nll_loss=1.536, w2v_ctc_loss=1.049, task_loss=0.904, contrastive_loss=0.145, total=4103.65, n_correct=2613.14, ppl=2.9, accuracy=63.678, wps=14156.1, ups=1.15, wpb=12271.8, bsz=443.9, num_updates=14500, lr=0.000117444, gnorm=0.41, clip=0, loss_scale=64, train_wall=86, gb_free=15.2, wall=12660
2023-08-23 05:16:10 | INFO | train_inner | epoch 010:   1341 / 1474 loss=2.012, trans_loss=3.366, nll_loss=1.542, w2v_ctc_loss=1.045, task_loss=0.897, contrastive_loss=0.157, total=4121.93, n_correct=2625.66, ppl=2.91, accuracy=63.7, wps=14254.2, ups=1.16, wpb=12309.4, bsz=451.2, num_updates=14600, lr=0.000117041, gnorm=0.412, clip=0, loss_scale=64, train_wall=86, gb_free=16.3, wall=12746
2023-08-23 05:16:48 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 05:17:37 | INFO | train_inner | epoch 010:   1442 / 1474 loss=2.053, trans_loss=3.375, nll_loss=1.551, w2v_ctc_loss=1.026, task_loss=0.84, contrastive_loss=0.353, total=4181.55, n_correct=2655.2, ppl=2.93, accuracy=63.498, wps=14253.3, ups=1.14, wpb=12473.5, bsz=475, num_updates=14700, lr=0.000116642, gnorm=0.411, clip=0, loss_scale=32, train_wall=87, gb_free=16.7, wall=12834
2023-08-23 05:18:04 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 05:18:37 | INFO | dev_st | epoch 010 | valid on 'dev_st' subset | loss 4.01 | trans_loss 5.205 | nll_loss 2.48 | w2v_ctc_loss 1.365 | task_loss 4.628 | contrastive_loss 0.328 | total 4003.4 | n_correct 2630.8 | ppl 5.58 | accuracy 65.714 | uer 18.634 | wer 20.301 | raw_wer 20.301 | bleu 21.56 | wps 1642.6 | wpb 4003.4 | bsz 141.8 | num_updates 14732 | best_bleu 21.56
2023-08-23 05:18:37 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 10 @ 14732 updates
2023-08-23 05:18:37 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 05:18:43 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 05:18:48 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 10 @ 14732 updates, score 21.56) (writing took 11.3230907660909 seconds)
2023-08-23 05:18:49 | INFO | fairseq_cli.train | end of epoch 10 (average epoch stats below)
2023-08-23 05:18:49 | INFO | train | epoch 010 | loss 2.024 | trans_loss 3.367 | nll_loss 1.542 | w2v_ctc_loss 1.039 | task_loss 0.879 | contrastive_loss 0.22 | total 4137.97 | n_correct 2631.43 | ppl 2.91 | accuracy 63.592 | wps 13238.1 | ups 1.07 | wpb 12353.8 | bsz 458.1 | num_updates 14732 | lr 0.000116516 | gnorm 0.41 | clip 0 | loss_scale 32 | train_wall 1266 | gb_free 17 | wall 12905
2023-08-23 05:18:49 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 05:18:49 | INFO | fairseq.trainer | begin training epoch 11
2023-08-23 05:18:49 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 05:19:54 | INFO | train_inner | epoch 011:     68 / 1474 loss=1.992, trans_loss=3.346, nll_loss=1.515, w2v_ctc_loss=1.009, task_loss=0.811, contrastive_loss=0.229, total=4175.24, n_correct=2683.53, ppl=2.86, accuracy=64.272, wps=9109.7, ups=0.73, wpb=12463.5, bsz=478.8, num_updates=14800, lr=0.000116248, gnorm=0.401, clip=0, loss_scale=32, train_wall=84, gb_free=16.4, wall=12970
2023-08-23 05:21:20 | INFO | train_inner | epoch 011:    168 / 1474 loss=1.979, trans_loss=3.347, nll_loss=1.519, w2v_ctc_loss=1.014, task_loss=0.907, contrastive_loss=0.149, total=4087.78, n_correct=2622.76, ppl=2.87, accuracy=64.161, wps=14159.7, ups=1.16, wpb=12214.2, bsz=445.9, num_updates=14900, lr=0.000115857, gnorm=0.415, clip=0, loss_scale=32, train_wall=85, gb_free=16, wall=13057
2023-08-23 05:21:36 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 16.0
2023-08-23 05:22:47 | INFO | train_inner | epoch 011:    269 / 1474 loss=1.968, trans_loss=3.345, nll_loss=1.514, w2v_ctc_loss=1.006, task_loss=0.905, contrastive_loss=0.142, total=4124.44, n_correct=2650.31, ppl=2.86, accuracy=64.259, wps=14140.4, ups=1.15, wpb=12316, bsz=446.2, num_updates=15000, lr=0.00011547, gnorm=0.407, clip=0, loss_scale=16, train_wall=86, gb_free=15.7, wall=13144
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 05:23:48 | INFO | train_inner | epoch 011:    369 / 1474 loss=2.051, trans_loss=4.974, nll_loss=2.253, w2v_ctc_loss=0.753, task_loss=1.353, contrastive_loss=0.112, total=4094.16, n_correct=2628.27, ppl=4.77, accuracy=64.196, wps=13450.4, ups=1.63, wpb=8227.1, bsz=296.5, num_updates=15100, lr=0.000115087, gnorm=0.535, clip=0, loss_scale=16, train_wall=61, gb_free=12.3, wall=13205
2023-08-23 05:24:50 | INFO | train_inner | epoch 011:    469 / 1474 loss=2.073, trans_loss=5.008, nll_loss=2.278, w2v_ctc_loss=0.757, task_loss=1.364, contrastive_loss=0.232, total=4112.8, n_correct=2626.66, ppl=4.85, accuracy=63.865, wps=13281.1, ups=1.61, wpb=8225.6, bsz=302.2, num_updates=15200, lr=0.000114708, gnorm=0.54, clip=0, loss_scale=16, train_wall=61, gb_free=16.8, wall=13267
2023-08-23 05:25:52 | INFO | train_inner | epoch 011:    569 / 1474 loss=2.071, trans_loss=5.005, nll_loss=2.274, w2v_ctc_loss=0.761, task_loss=1.421, contrastive_loss=0.228, total=4071.06, n_correct=2603.54, ppl=4.84, accuracy=63.952, wps=13167.1, ups=1.62, wpb=8142.1, bsz=292.6, num_updates=15300, lr=0.000114332, gnorm=0.538, clip=0, loss_scale=16, train_wall=61, gb_free=16, wall=13329
2023-08-23 05:26:54 | INFO | train_inner | epoch 011:    669 / 1474 loss=2.072, trans_loss=4.996, nll_loss=2.263, w2v_ctc_loss=0.756, task_loss=1.293, contrastive_loss=0.29, total=4156.4, n_correct=2664.76, ppl=4.8, accuracy=64.112, wps=13463, ups=1.62, wpb=8312.8, bsz=310.2, num_updates=15400, lr=0.000113961, gnorm=0.534, clip=0, loss_scale=16, train_wall=61, gb_free=15.9, wall=13390
2023-08-23 05:27:56 | INFO | train_inner | epoch 011:    769 / 1474 loss=2.062, trans_loss=5.007, nll_loss=2.278, w2v_ctc_loss=0.767, task_loss=1.336, contrastive_loss=0.111, total=4169.17, n_correct=2670.55, ppl=4.85, accuracy=64.055, wps=13388.7, ups=1.61, wpb=8338.3, bsz=304.8, num_updates=15500, lr=0.000113592, gnorm=0.529, clip=0, loss_scale=16, train_wall=62, gb_free=11.7, wall=13453
2023-08-23 05:28:57 | INFO | train_inner | epoch 011:    869 / 1474 loss=2.06, trans_loss=5.006, nll_loss=2.276, w2v_ctc_loss=0.762, task_loss=1.381, contrastive_loss=0.101, total=4120.01, n_correct=2633.58, ppl=4.84, accuracy=63.922, wps=13456.7, ups=1.63, wpb=8240, bsz=293.5, num_updates=15600, lr=0.000113228, gnorm=0.532, clip=0, loss_scale=16, train_wall=61, gb_free=13, wall=13514
2023-08-23 05:29:59 | INFO | train_inner | epoch 011:    969 / 1474 loss=2.061, trans_loss=5.006, nll_loss=2.276, w2v_ctc_loss=0.765, task_loss=1.331, contrastive_loss=0.114, total=4145.45, n_correct=2651.6, ppl=4.84, accuracy=63.964, wps=13433.6, ups=1.62, wpb=8290.9, bsz=303.7, num_updates=15700, lr=0.000112867, gnorm=0.538, clip=0, loss_scale=16, train_wall=61, gb_free=16.7, wall=13576
2023-08-23 05:31:00 | INFO | train_inner | epoch 011:   1069 / 1474 loss=2.059, trans_loss=5, nll_loss=2.269, w2v_ctc_loss=0.764, task_loss=1.292, contrastive_loss=0.132, total=4141.18, n_correct=2656.5, ppl=4.82, accuracy=64.148, wps=13531.7, ups=1.63, wpb=8282.4, bsz=309.4, num_updates=15800, lr=0.000112509, gnorm=0.534, clip=0, loss_scale=16, train_wall=61, gb_free=16.3, wall=13637
2023-08-23 05:32:02 | INFO | train_inner | epoch 011:   1169 / 1474 loss=2.063, trans_loss=5.009, nll_loss=2.281, w2v_ctc_loss=0.769, task_loss=1.324, contrastive_loss=0.117, total=4173.93, n_correct=2666.34, ppl=4.86, accuracy=63.881, wps=13521.6, ups=1.62, wpb=8347.9, bsz=307.2, num_updates=15900, lr=0.000112154, gnorm=0.538, clip=0, loss_scale=16, train_wall=61, gb_free=16.6, wall=13699
2023-08-23 05:33:05 | INFO | train_inner | epoch 011:   1269 / 1474 loss=2.068, trans_loss=5.001, nll_loss=2.271, w2v_ctc_loss=0.768, task_loss=1.265, contrastive_loss=0.188, total=4174.26, n_correct=2670.48, ppl=4.83, accuracy=63.975, wps=13345.9, ups=1.6, wpb=8348.5, bsz=314.4, num_updates=16000, lr=0.000111803, gnorm=0.54, clip=0, loss_scale=16, train_wall=62, gb_free=17.1, wall=13761
2023-08-23 05:33:05 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
2023-08-23 05:33:38 | INFO | dev_st | epoch 011 | valid on 'dev_st' subset | loss 4.02 | trans_loss 5.211 | nll_loss 2.49 | w2v_ctc_loss 1.392 | task_loss 4.635 | contrastive_loss 0.322 | total 4003.4 | n_correct 2624.5 | ppl 5.62 | accuracy 65.557 | uer 18.65 | wer 20.454 | raw_wer 20.454 | bleu 21.37 | wps 1611.6 | wpb 4003.4 | bsz 141.8 | num_updates 16000 | best_bleu 21.56
2023-08-23 05:33:38 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 11 @ 16000 updates
2023-08-23 05:33:38 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_11_16000.pt
2023-08-23 05:33:40 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_11_16000.pt
2023-08-23 05:33:46 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_11_16000.pt (epoch 11 @ 16000 updates, score 21.37) (writing took 8.520537490025163 seconds)
2023-08-23 05:34:49 | INFO | train_inner | epoch 011:   1369 / 1474 loss=2.075, trans_loss=5, nll_loss=2.27, w2v_ctc_loss=0.751, task_loss=1.216, contrastive_loss=0.346, total=4191.56, n_correct=2683.86, ppl=4.82, accuracy=64.03, wps=8054.9, ups=0.96, wpb=8383.1, bsz=327.7, num_updates=16100, lr=0.000111456, gnorm=0.537, clip=0, loss_scale=16, train_wall=61, gb_free=17.2, wall=13865
2023-08-23 05:35:51 | INFO | train_inner | epoch 011:   1469 / 1474 loss=2.054, trans_loss=5.003, nll_loss=2.273, w2v_ctc_loss=0.757, task_loss=1.265, contrastive_loss=0.121, total=4161.81, n_correct=2669.84, ppl=4.83, accuracy=64.151, wps=13446.3, ups=1.62, wpb=8323.6, bsz=313.2, num_updates=16200, lr=0.000111111, gnorm=0.531, clip=0, loss_scale=16, train_wall=61, gb_free=16.4, wall=13927
2023-08-23 05:35:54 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 05:36:27 | INFO | dev_st | epoch 011 | valid on 'dev_st' subset | loss 3.994 | trans_loss 5.204 | nll_loss 2.479 | w2v_ctc_loss 1.321 | task_loss 4.631 | contrastive_loss 0.32 | total 4003.4 | n_correct 2635.2 | ppl 5.57 | accuracy 65.824 | uer 18.467 | wer 20.245 | raw_wer 20.245 | bleu 21.52 | wps 1558.3 | wpb 4003.4 | bsz 141.8 | num_updates 16205 | best_bleu 21.56
2023-08-23 05:36:27 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 11 @ 16205 updates
2023-08-23 05:36:27 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.5204.pt
2023-08-23 05:36:30 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.5204.pt
2023-08-23 05:36:35 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.5204.pt (epoch 11 @ 16205 updates, score 21.52) (writing took 7.618640549015254 seconds)
2023-08-23 05:36:35 | INFO | fairseq_cli.train | end of epoch 11 (average epoch stats below)
2023-08-23 05:36:35 | INFO | train | epoch 011 | loss 2.042 | trans_loss 4.589 | nll_loss 2.083 | w2v_ctc_loss 0.822 | task_loss 1.208 | contrastive_loss 0.168 | total 4138.69 | n_correct 2651.3 | ppl 4.24 | accuracy 64.061 | wps 12462.2 | ups 1.38 | wpb 9021.6 | bsz 333.3 | num_updates 16205 | lr 0.000111094 | gnorm 0.513 | clip 0 | loss_scale 16 | train_wall 967 | gb_free 16.8 | wall 13972
2023-08-23 05:36:35 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 05:36:35 | INFO | fairseq.trainer | begin training epoch 12
2023-08-23 05:36:35 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 05:37:41 | INFO | train_inner | epoch 012:     95 / 1474 loss=2.038, trans_loss=4.964, nll_loss=2.222, w2v_ctc_loss=0.744, task_loss=1.271, contrastive_loss=0.151, total=4139.2, n_correct=2683.22, ppl=4.66, accuracy=64.825, wps=7516.9, ups=0.91, wpb=8278.4, bsz=312.5, num_updates=16300, lr=0.00011077, gnorm=0.527, clip=0, loss_scale=16, train_wall=60, gb_free=15.6, wall=14037
2023-08-23 05:38:42 | INFO | train_inner | epoch 012:    195 / 1474 loss=2.04, trans_loss=4.97, nll_loss=2.229, w2v_ctc_loss=0.75, task_loss=1.353, contrastive_loss=0.103, total=4126.87, n_correct=2665.59, ppl=4.69, accuracy=64.591, wps=13467.1, ups=1.63, wpb=8253.7, bsz=295.9, num_updates=16400, lr=0.000110432, gnorm=0.534, clip=0, loss_scale=16, train_wall=61, gb_free=16.1, wall=14099
2023-08-23 05:39:44 | INFO | train_inner | epoch 012:    295 / 1474 loss=2.034, trans_loss=4.968, nll_loss=2.228, w2v_ctc_loss=0.734, task_loss=1.231, contrastive_loss=0.132, total=4203.54, n_correct=2723.95, ppl=4.68, accuracy=64.801, wps=13544.3, ups=1.61, wpb=8407.1, bsz=321.1, num_updates=16500, lr=0.000110096, gnorm=0.53, clip=0, loss_scale=16, train_wall=62, gb_free=14.3, wall=14161
2023-08-23 05:40:46 | INFO | train_inner | epoch 012:    395 / 1474 loss=2.038, trans_loss=4.972, nll_loss=2.232, w2v_ctc_loss=0.744, task_loss=1.293, contrastive_loss=0.118, total=4149.28, n_correct=2684.22, ppl=4.7, accuracy=64.691, wps=13419.2, ups=1.62, wpb=8298.6, bsz=307.1, num_updates=16600, lr=0.000109764, gnorm=0.534, clip=0, loss_scale=16, train_wall=61, gb_free=14.8, wall=14223
2023-08-23 05:41:47 | INFO | train_inner | epoch 012:    495 / 1474 loss=2.05, trans_loss=4.987, nll_loss=2.252, w2v_ctc_loss=0.757, task_loss=1.328, contrastive_loss=0.125, total=4106.46, n_correct=2650.07, ppl=4.76, accuracy=64.534, wps=13469.1, ups=1.64, wpb=8212.9, bsz=301.2, num_updates=16700, lr=0.000109435, gnorm=0.528, clip=0, loss_scale=16, train_wall=60, gb_free=17.5, wall=14284
2023-08-23 05:42:49 | INFO | train_inner | epoch 012:    595 / 1474 loss=2.048, trans_loss=4.975, nll_loss=2.236, w2v_ctc_loss=0.747, task_loss=1.258, contrastive_loss=0.19, total=4190.91, n_correct=2709.38, ppl=4.71, accuracy=64.649, wps=13521.8, ups=1.61, wpb=8381.8, bsz=316.5, num_updates=16800, lr=0.000109109, gnorm=0.531, clip=0, loss_scale=16, train_wall=61, gb_free=15.6, wall=14346
2023-08-23 05:43:50 | INFO | train_inner | epoch 012:    695 / 1474 loss=2.046, trans_loss=4.971, nll_loss=2.233, w2v_ctc_loss=0.733, task_loss=1.212, contrastive_loss=0.276, total=4203.66, n_correct=2722.57, ppl=4.7, accuracy=64.767, wps=13823, ups=1.64, wpb=8407.3, bsz=324.4, num_updates=16900, lr=0.000108786, gnorm=0.534, clip=0, loss_scale=16, train_wall=60, gb_free=17.1, wall=14406
2023-08-23 05:44:51 | INFO | train_inner | epoch 012:    795 / 1474 loss=2.039, trans_loss=4.97, nll_loss=2.229, w2v_ctc_loss=0.75, task_loss=1.333, contrastive_loss=0.115, total=4095.72, n_correct=2651.22, ppl=4.69, accuracy=64.731, wps=13325.5, ups=1.63, wpb=8191.4, bsz=298.9, num_updates=17000, lr=0.000108465, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=16.9, wall=14468
2023-08-23 05:45:54 | INFO | train_inner | epoch 012:    895 / 1474 loss=2.049, trans_loss=4.977, nll_loss=2.239, w2v_ctc_loss=0.749, task_loss=1.352, contrastive_loss=0.166, total=4162.82, n_correct=2687.86, ppl=4.72, accuracy=64.568, wps=13269.4, ups=1.59, wpb=8325.6, bsz=305.4, num_updates=17100, lr=0.000108148, gnorm=0.537, clip=0, loss_scale=32, train_wall=62, gb_free=15.8, wall=14531
2023-08-23 05:46:55 | INFO | train_inner | epoch 012:    995 / 1474 loss=2.049, trans_loss=4.979, nll_loss=2.242, w2v_ctc_loss=0.752, task_loss=1.344, contrastive_loss=0.174, total=4117.63, n_correct=2657.01, ppl=4.73, accuracy=64.528, wps=13440.7, ups=1.63, wpb=8235.3, bsz=301.6, num_updates=17200, lr=0.000107833, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=16.6, wall=14592
2023-08-23 05:47:57 | INFO | train_inner | epoch 012:   1095 / 1474 loss=2.06, trans_loss=4.983, nll_loss=2.247, w2v_ctc_loss=0.757, task_loss=1.386, contrastive_loss=0.222, total=4046.48, n_correct=2608.62, ppl=4.75, accuracy=64.466, wps=13150.4, ups=1.62, wpb=8093, bsz=289.6, num_updates=17300, lr=0.000107521, gnorm=0.546, clip=0, loss_scale=32, train_wall=61, gb_free=15.6, wall=14653
2023-08-23 05:48:59 | INFO | train_inner | epoch 012:   1195 / 1474 loss=2.062, trans_loss=4.999, nll_loss=2.269, w2v_ctc_loss=0.764, task_loss=1.282, contrastive_loss=0.187, total=4201.13, n_correct=2698.86, ppl=4.82, accuracy=64.241, wps=13612.5, ups=1.62, wpb=8402.3, bsz=319.2, num_updates=17400, lr=0.000107211, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=17, wall=14715
2023-08-23 05:50:00 | INFO | train_inner | epoch 012:   1295 / 1474 loss=2.049, trans_loss=4.98, nll_loss=2.243, w2v_ctc_loss=0.765, task_loss=1.47, contrastive_loss=0.102, total=4070.27, n_correct=2625.01, ppl=4.73, accuracy=64.492, wps=13183.3, ups=1.62, wpb=8140.5, bsz=286.1, num_updates=17500, lr=0.000106904, gnorm=0.549, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=14777
2023-08-23 05:51:02 | INFO | train_inner | epoch 012:   1395 / 1474 loss=2.052, trans_loss=4.987, nll_loss=2.251, w2v_ctc_loss=0.747, task_loss=1.327, contrastive_loss=0.206, total=4139.63, n_correct=2667.9, ppl=4.76, accuracy=64.448, wps=13335.8, ups=1.61, wpb=8279.3, bsz=305.8, num_updates=17600, lr=0.0001066, gnorm=0.53, clip=0, loss_scale=32, train_wall=62, gb_free=16.7, wall=14839
2023-08-23 05:51:51 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 05:52:25 | INFO | dev_st | epoch 012 | valid on 'dev_st' subset | loss 3.998 | trans_loss 5.19 | nll_loss 2.464 | w2v_ctc_loss 1.37 | task_loss 4.628 | contrastive_loss 0.315 | total 4003.4 | n_correct 2640.9 | ppl 5.52 | accuracy 65.966 | uer 18.711 | wer 20.514 | raw_wer 20.514 | bleu 21.58 | wps 1570.4 | wpb 4003.4 | bsz 141.8 | num_updates 17679 | best_bleu 21.58
2023-08-23 05:52:25 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 12 @ 17679 updates
2023-08-23 05:52:25 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 05:52:30 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 05:52:35 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 12 @ 17679 updates, score 21.58) (writing took 10.401859897072427 seconds)
2023-08-23 05:52:35 | INFO | fairseq_cli.train | end of epoch 12 (average epoch stats below)
2023-08-23 05:52:35 | INFO | train | epoch 012 | loss 2.047 | trans_loss 4.978 | nll_loss 2.24 | w2v_ctc_loss 0.75 | task_loss 1.317 | contrastive_loss 0.16 | total 4138.65 | n_correct 2673.13 | ppl 4.72 | accuracy 64.59 | wps 12708 | ups 1.54 | wpb 8277.3 | bsz 305.7 | num_updates 17679 | lr 0.000106362 | gnorm 0.534 | clip 0 | loss_scale 32 | train_wall 899 | gb_free 12.5 | wall 14932
2023-08-23 05:52:35 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 05:52:35 | INFO | fairseq.trainer | begin training epoch 13
2023-08-23 05:52:35 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 05:52:55 | INFO | train_inner | epoch 013:     21 / 1474 loss=2.048, trans_loss=4.986, nll_loss=2.25, w2v_ctc_loss=0.763, task_loss=1.369, contrastive_loss=0.108, total=4096.49, n_correct=2639.04, ppl=4.76, accuracy=64.422, wps=7246.2, ups=0.88, wpb=8193, bsz=295.4, num_updates=17700, lr=0.000106299, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=14.2, wall=14952
2023-08-23 05:53:57 | INFO | train_inner | epoch 013:    121 / 1474 loss=2.028, trans_loss=4.952, nll_loss=2.206, w2v_ctc_loss=0.736, task_loss=1.325, contrastive_loss=0.122, total=4160.97, n_correct=2706.52, ppl=4.62, accuracy=65.045, wps=13505.8, ups=1.62, wpb=8321.9, bsz=302.9, num_updates=17800, lr=0.000106, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=15014
2023-08-23 05:54:59 | INFO | train_inner | epoch 013:    221 / 1474 loss=2.048, trans_loss=4.962, nll_loss=2.22, w2v_ctc_loss=0.733, task_loss=1.215, contrastive_loss=0.333, total=4212.08, n_correct=2735.09, ppl=4.66, accuracy=64.934, wps=13686.2, ups=1.62, wpb=8424.2, bsz=329.7, num_updates=17900, lr=0.000105703, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=14.3, wall=15075
2023-08-23 05:56:00 | INFO | train_inner | epoch 013:    321 / 1474 loss=2.022, trans_loss=4.946, nll_loss=2.198, w2v_ctc_loss=0.734, task_loss=1.367, contrastive_loss=0.105, total=4102.3, n_correct=2676.18, ppl=4.59, accuracy=65.236, wps=13338.6, ups=1.63, wpb=8204.6, bsz=294.1, num_updates=18000, lr=0.000105409, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.9, wall=15137
2023-08-23 05:56:00 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 05:56:34 | INFO | dev_st | epoch 013 | valid on 'dev_st' subset | loss 3.994 | trans_loss 5.196 | nll_loss 2.469 | w2v_ctc_loss 1.34 | task_loss 4.653 | contrastive_loss 0.326 | total 4003.4 | n_correct 2636.6 | ppl 5.54 | accuracy 65.859 | uer 18.546 | wer 20.391 | raw_wer 20.391 | bleu 21.45 | wps 1581.8 | wpb 4003.4 | bsz 141.8 | num_updates 18000 | best_bleu 21.58
2023-08-23 05:56:34 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 13 @ 18000 updates
2023-08-23 05:56:34 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_13_18000.pt
2023-08-23 05:56:36 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_13_18000.pt
2023-08-23 05:56:43 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_13_18000.pt (epoch 13 @ 18000 updates, score 21.45) (writing took 8.828516528010368 seconds)
2023-08-23 05:57:45 | INFO | train_inner | epoch 013:    421 / 1474 loss=2.025, trans_loss=4.951, nll_loss=2.205, w2v_ctc_loss=0.73, task_loss=1.235, contrastive_loss=0.153, total=4177.29, n_correct=2726, ppl=4.61, accuracy=65.258, wps=7999.3, ups=0.96, wpb=8354.6, bsz=318.4, num_updates=18100, lr=0.000105118, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=17.2, wall=15241
2023-08-23 05:58:46 | INFO | train_inner | epoch 013:    521 / 1474 loss=2.036, trans_loss=4.96, nll_loss=2.217, w2v_ctc_loss=0.741, task_loss=1.277, contrastive_loss=0.185, total=4201.22, n_correct=2726.85, ppl=4.65, accuracy=64.906, wps=13638.4, ups=1.62, wpb=8402.4, bsz=319, num_updates=18200, lr=0.000104828, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=12.5, wall=15303
2023-08-23 05:59:48 | INFO | train_inner | epoch 013:    621 / 1474 loss=2.019, trans_loss=4.951, nll_loss=2.206, w2v_ctc_loss=0.731, task_loss=1.282, contrastive_loss=0.101, total=4161.98, n_correct=2717.01, ppl=4.61, accuracy=65.282, wps=13569.2, ups=1.63, wpb=8324, bsz=308.3, num_updates=18300, lr=0.000104542, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=15364
2023-08-23 06:00:49 | INFO | train_inner | epoch 013:    721 / 1474 loss=2.037, trans_loss=4.959, nll_loss=2.215, w2v_ctc_loss=0.756, task_loss=1.467, contrastive_loss=0.102, total=4096.76, n_correct=2658.07, ppl=4.64, accuracy=64.882, wps=13290.5, ups=1.62, wpb=8193.5, bsz=284.6, num_updates=18400, lr=0.000104257, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=15426
2023-08-23 06:01:52 | INFO | train_inner | epoch 013:    821 / 1474 loss=2.034, trans_loss=4.96, nll_loss=2.218, w2v_ctc_loss=0.737, task_loss=1.332, contrastive_loss=0.148, total=4121.73, n_correct=2673.13, ppl=4.65, accuracy=64.855, wps=13227.4, ups=1.6, wpb=8243.5, bsz=306.7, num_updates=18500, lr=0.000103975, gnorm=0.539, clip=0, loss_scale=32, train_wall=62, gb_free=14.5, wall=15488
2023-08-23 06:02:54 | INFO | train_inner | epoch 013:    921 / 1474 loss=2.026, trans_loss=4.957, nll_loss=2.213, w2v_ctc_loss=0.736, task_loss=1.342, contrastive_loss=0.11, total=4107.01, n_correct=2673.44, ppl=4.64, accuracy=65.095, wps=13169.5, ups=1.6, wpb=8214, bsz=296.5, num_updates=18600, lr=0.000103695, gnorm=0.529, clip=0, loss_scale=32, train_wall=62, gb_free=15.6, wall=15550
2023-08-23 06:03:55 | INFO | train_inner | epoch 013:   1021 / 1474 loss=2.043, trans_loss=4.965, nll_loss=2.223, w2v_ctc_loss=0.752, task_loss=1.394, contrastive_loss=0.162, total=4081.02, n_correct=2644.86, ppl=4.67, accuracy=64.809, wps=13316.2, ups=1.63, wpb=8162, bsz=293.4, num_updates=18700, lr=0.000103418, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=15612
2023-08-23 06:04:57 | INFO | train_inner | epoch 013:   1121 / 1474 loss=2.024, trans_loss=4.95, nll_loss=2.204, w2v_ctc_loss=0.732, task_loss=1.297, contrastive_loss=0.143, total=4105.62, n_correct=2678.55, ppl=4.61, accuracy=65.241, wps=13394.9, ups=1.63, wpb=8211.2, bsz=305.9, num_updates=18800, lr=0.000103142, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=15673
2023-08-23 06:05:58 | INFO | train_inner | epoch 013:   1221 / 1474 loss=2.033, trans_loss=4.962, nll_loss=2.22, w2v_ctc_loss=0.745, task_loss=1.403, contrastive_loss=0.102, total=4110.35, n_correct=2668.8, ppl=4.66, accuracy=64.929, wps=13371.9, ups=1.63, wpb=8220.7, bsz=295.1, num_updates=18900, lr=0.000102869, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=14.6, wall=15735
2023-08-23 06:07:00 | INFO | train_inner | epoch 013:   1321 / 1474 loss=2.036, trans_loss=4.954, nll_loss=2.21, w2v_ctc_loss=0.742, task_loss=1.296, contrastive_loss=0.2, total=4112.2, n_correct=2679.61, ppl=4.63, accuracy=65.162, wps=13355.7, ups=1.62, wpb=8224.4, bsz=308.2, num_updates=19000, lr=0.000102598, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=17.3, wall=15796
2023-08-23 06:08:01 | INFO | train_inner | epoch 013:   1421 / 1474 loss=2.039, trans_loss=4.961, nll_loss=2.22, w2v_ctc_loss=0.735, task_loss=1.294, contrastive_loss=0.21, total=4180.88, n_correct=2716.6, ppl=4.66, accuracy=64.977, wps=13518, ups=1.62, wpb=8361.8, bsz=312.2, num_updates=19100, lr=0.000102329, gnorm=0.535, clip=0, loss_scale=64, train_wall=61, gb_free=14.9, wall=15858
2023-08-23 06:08:34 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 06:09:08 | INFO | dev_st | epoch 013 | valid on 'dev_st' subset | loss 3.979 | trans_loss 5.184 | nll_loss 2.451 | w2v_ctc_loss 1.326 | task_loss 4.645 | contrastive_loss 0.311 | total 4003.4 | n_correct 2646.9 | ppl 5.47 | accuracy 66.116 | uer 18.188 | wer 19.996 | raw_wer 19.996 | bleu 21.77 | wps 1596.9 | wpb 4003.4 | bsz 141.8 | num_updates 19153 | best_bleu 21.77
2023-08-23 06:09:08 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 13 @ 19153 updates
2023-08-23 06:09:08 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 06:09:13 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 06:09:19 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 13 @ 19153 updates, score 21.77) (writing took 11.544573031016625 seconds)
2023-08-23 06:09:19 | INFO | fairseq_cli.train | end of epoch 13 (average epoch stats below)
2023-08-23 06:09:19 | INFO | train | epoch 013 | loss 2.032 | trans_loss 4.956 | nll_loss 2.212 | w2v_ctc_loss 0.739 | task_loss 1.318 | contrastive_loss 0.156 | total 4138.65 | n_correct 2691.93 | ppl 4.63 | accuracy 65.044 | wps 12148.6 | ups 1.47 | wpb 8277.3 | bsz 305.7 | num_updates 19153 | lr 0.000102187 | gnorm 0.53 | clip 0 | loss_scale 64 | train_wall 901 | gb_free 17.4 | wall 15936
2023-08-23 06:09:20 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 06:09:20 | INFO | fairseq.trainer | begin training epoch 14
2023-08-23 06:09:20 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 06:09:55 | INFO | train_inner | epoch 014:     47 / 1474 loss=2.011, trans_loss=4.929, nll_loss=2.179, w2v_ctc_loss=0.729, task_loss=1.204, contrastive_loss=0.116, total=4176.2, n_correct=2738.76, ppl=4.53, accuracy=65.58, wps=7343.6, ups=0.88, wpb=8352.4, bsz=322.3, num_updates=19200, lr=0.000102062, gnorm=0.532, clip=0, loss_scale=64, train_wall=61, gb_free=10.1, wall=15972
2023-08-23 06:10:56 | INFO | train_inner | epoch 014:    147 / 1474 loss=2.006, trans_loss=4.921, nll_loss=2.166, w2v_ctc_loss=0.726, task_loss=1.329, contrastive_loss=0.097, total=4080.86, n_correct=2682.64, ppl=4.49, accuracy=65.737, wps=13435.6, ups=1.65, wpb=8161.7, bsz=299.6, num_updates=19300, lr=0.000101797, gnorm=0.527, clip=0, loss_scale=64, train_wall=60, gb_free=16.7, wall=16033
2023-08-23 06:11:57 | INFO | train_inner | epoch 014:    247 / 1474 loss=2.026, trans_loss=4.94, nll_loss=2.192, w2v_ctc_loss=0.728, task_loss=1.384, contrastive_loss=0.198, total=4106.97, n_correct=2682.22, ppl=4.57, accuracy=65.309, wps=13425, ups=1.63, wpb=8213.9, bsz=293.3, num_updates=19400, lr=0.000101535, gnorm=0.535, clip=0, loss_scale=64, train_wall=61, gb_free=11.9, wall=16094
2023-08-23 06:12:58 | INFO | train_inner | epoch 014:    347 / 1474 loss=2.01, trans_loss=4.934, nll_loss=2.184, w2v_ctc_loss=0.72, task_loss=1.208, contrastive_loss=0.131, total=4179.8, n_correct=2743.36, ppl=4.54, accuracy=65.634, wps=13624.6, ups=1.63, wpb=8359.6, bsz=322.5, num_updates=19500, lr=0.000101274, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=17, wall=16155
2023-08-23 06:14:00 | INFO | train_inner | epoch 014:    447 / 1474 loss=2.012, trans_loss=4.94, nll_loss=2.191, w2v_ctc_loss=0.723, task_loss=1.36, contrastive_loss=0.094, total=4120.38, n_correct=2695.01, ppl=4.57, accuracy=65.407, wps=13391.9, ups=1.63, wpb=8240.8, bsz=296.3, num_updates=19600, lr=0.000101015, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=16.8, wall=16217
2023-08-23 06:15:02 | INFO | train_inner | epoch 014:    547 / 1474 loss=2.028, trans_loss=4.941, nll_loss=2.193, w2v_ctc_loss=0.746, task_loss=1.394, contrastive_loss=0.129, total=4089.86, n_correct=2668.44, ppl=4.57, accuracy=65.245, wps=13130.5, ups=1.61, wpb=8179.7, bsz=295.5, num_updates=19700, lr=0.000100759, gnorm=0.54, clip=0, loss_scale=64, train_wall=62, gb_free=11.6, wall=16279
2023-08-23 06:16:04 | INFO | train_inner | epoch 014:    647 / 1474 loss=2.025, trans_loss=4.941, nll_loss=2.193, w2v_ctc_loss=0.732, task_loss=1.316, contrastive_loss=0.173, total=4158.94, n_correct=2717.61, ppl=4.57, accuracy=65.344, wps=13463.8, ups=1.62, wpb=8317.9, bsz=306.7, num_updates=19800, lr=0.000100504, gnorm=0.534, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=16341
2023-08-23 06:17:05 | INFO | train_inner | epoch 014:    747 / 1474 loss=2.012, trans_loss=4.929, nll_loss=2.178, w2v_ctc_loss=0.73, task_loss=1.279, contrastive_loss=0.105, total=4150.03, n_correct=2724.42, ppl=4.53, accuracy=65.648, wps=13601.3, ups=1.64, wpb=8300.1, bsz=310.4, num_updates=19900, lr=0.000100251, gnorm=0.531, clip=0, loss_scale=64, train_wall=61, gb_free=15.3, wall=16402
2023-08-23 06:18:06 | INFO | train_inner | epoch 014:    847 / 1474 loss=2.022, trans_loss=4.931, nll_loss=2.18, w2v_ctc_loss=0.725, task_loss=1.261, contrastive_loss=0.216, total=4162.8, n_correct=2728.06, ppl=4.53, accuracy=65.534, wps=13627.6, ups=1.64, wpb=8325.6, bsz=317.2, num_updates=20000, lr=0.0001, gnorm=0.522, clip=0, loss_scale=64, train_wall=61, gb_free=16.8, wall=16463
2023-08-23 06:18:06 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 06:18:39 | INFO | dev_st | epoch 014 | valid on 'dev_st' subset | loss 3.985 | trans_loss 5.177 | nll_loss 2.445 | w2v_ctc_loss 1.364 | task_loss 4.657 | contrastive_loss 0.309 | total 4003.4 | n_correct 2651.9 | ppl 5.44 | accuracy 66.241 | uer 18.366 | wer 20.32 | raw_wer 20.32 | bleu 21.98 | wps 1644.8 | wpb 4003.4 | bsz 141.8 | num_updates 20000 | best_bleu 21.98
2023-08-23 06:18:39 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 14 @ 20000 updates
2023-08-23 06:18:39 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_14_20000.pt
2023-08-23 06:18:41 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_14_20000.pt
2023-08-23 06:18:53 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_14_20000.pt (epoch 14 @ 20000 updates, score 21.98) (writing took 13.71952548599802 seconds)
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 06:19:55 | INFO | train_inner | epoch 014:    947 / 1474 loss=2.013, trans_loss=4.935, nll_loss=2.185, w2v_ctc_loss=0.728, task_loss=1.342, contrastive_loss=0.104, total=4159.46, n_correct=2722.1, ppl=4.55, accuracy=65.444, wps=7663.2, ups=0.92, wpb=8318.9, bsz=306.7, num_updates=20100, lr=9.97509e-05, gnorm=0.521, clip=0, loss_scale=64, train_wall=61, gb_free=15, wall=16571
2023-08-23 06:20:57 | INFO | train_inner | epoch 014:   1047 / 1474 loss=2.023, trans_loss=4.94, nll_loss=2.192, w2v_ctc_loss=0.726, task_loss=1.311, contrastive_loss=0.173, total=4155.93, n_correct=2721.63, ppl=4.57, accuracy=65.488, wps=13341.1, ups=1.61, wpb=8311.9, bsz=305.9, num_updates=20200, lr=9.95037e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=62, gb_free=16, wall=16634
2023-08-23 06:21:59 | INFO | train_inner | epoch 014:   1147 / 1474 loss=2.045, trans_loss=4.94, nll_loss=2.193, w2v_ctc_loss=0.735, task_loss=1.238, contrastive_loss=0.393, total=4228.09, n_correct=2765, ppl=4.57, accuracy=65.396, wps=13579.8, ups=1.61, wpb=8456.2, bsz=326.3, num_updates=20300, lr=9.92583e-05, gnorm=0.521, clip=0, loss_scale=64, train_wall=62, gb_free=17.2, wall=16696
2023-08-23 06:23:01 | INFO | train_inner | epoch 014:   1247 / 1474 loss=2.025, trans_loss=4.944, nll_loss=2.197, w2v_ctc_loss=0.746, task_loss=1.536, contrastive_loss=0.089, total=4027.71, n_correct=2629.21, ppl=4.58, accuracy=65.278, wps=13153.6, ups=1.63, wpb=8055.4, bsz=273.6, num_updates=20400, lr=9.90148e-05, gnorm=0.54, clip=0, loss_scale=64, train_wall=61, gb_free=16.3, wall=16757
2023-08-23 06:24:02 | INFO | train_inner | epoch 014:   1347 / 1474 loss=2.011, trans_loss=4.937, nll_loss=2.189, w2v_ctc_loss=0.725, task_loss=1.26, contrastive_loss=0.103, total=4198.71, n_correct=2750.02, ppl=4.56, accuracy=65.497, wps=13702.2, ups=1.63, wpb=8397.4, bsz=315.4, num_updates=20500, lr=9.8773e-05, gnorm=0.524, clip=0, loss_scale=64, train_wall=61, gb_free=16, wall=16818
2023-08-23 06:25:04 | INFO | train_inner | epoch 014:   1447 / 1474 loss=2.022, trans_loss=4.946, nll_loss=2.2, w2v_ctc_loss=0.728, task_loss=1.297, contrastive_loss=0.145, total=4140.5, n_correct=2705.14, ppl=4.59, accuracy=65.334, wps=13437.9, ups=1.62, wpb=8281, bsz=307.1, num_updates=20600, lr=9.85329e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=17.3, wall=16880
2023-08-23 06:25:20 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
2023-08-23 06:25:54 | INFO | dev_st | epoch 014 | valid on 'dev_st' subset | loss 3.983 | trans_loss 5.175 | nll_loss 2.443 | w2v_ctc_loss 1.363 | task_loss 4.633 | contrastive_loss 0.312 | total 4003.4 | n_correct 2657.1 | ppl 5.44 | accuracy 66.371 | uer 18.249 | wer 20.26 | raw_wer 20.26 | bleu 21.72 | wps 1551.3 | wpb 4003.4 | bsz 141.8 | num_updates 20627 | best_bleu 21.98
2023-08-23 06:25:54 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 14 @ 20627 updates
2023-08-23 06:25:54 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.7203.pt
2023-08-23 06:25:57 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.7203.pt
2023-08-23 06:26:01 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.7203.pt (epoch 14 @ 20627 updates, score 21.72) (writing took 7.378343140007928 seconds)
2023-08-23 06:26:02 | INFO | fairseq_cli.train | end of epoch 14 (average epoch stats below)
2023-08-23 06:26:02 | INFO | train | epoch 014 | loss 2.019 | trans_loss 4.937 | nll_loss 2.188 | w2v_ctc_loss 0.73 | task_loss 1.317 | contrastive_loss 0.153 | total 4138.65 | n_correct 2709.11 | ppl 4.56 | accuracy 65.459 | wps 12173 | ups 1.47 | wpb 8277.3 | bsz 305.7 | num_updates 20627 | lr 9.84684e-05 | gnorm 0.529 | clip 0 | loss_scale 64 | train_wall 898 | gb_free 16.1 | wall 16938
2023-08-23 06:26:02 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 06:26:02 | INFO | fairseq.trainer | begin training epoch 15
2023-08-23 06:26:02 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 06:26:53 | INFO | train_inner | epoch 015:     73 / 1474 loss=2.014, trans_loss=4.926, nll_loss=2.173, w2v_ctc_loss=0.717, task_loss=1.322, contrastive_loss=0.191, total=4083.93, n_correct=2682.61, ppl=4.51, accuracy=65.687, wps=7452.6, ups=0.91, wpb=8167.9, bsz=300.1, num_updates=20700, lr=9.82946e-05, gnorm=0.534, clip=0, loss_scale=64, train_wall=60, gb_free=15.3, wall=16990
2023-08-23 06:27:54 | INFO | train_inner | epoch 015:    173 / 1474 loss=2.002, trans_loss=4.916, nll_loss=2.16, w2v_ctc_loss=0.721, task_loss=1.366, contrastive_loss=0.101, total=4122.67, n_correct=2719.24, ppl=4.47, accuracy=65.958, wps=13449.9, ups=1.63, wpb=8245.3, bsz=299.1, num_updates=20800, lr=9.80581e-05, gnorm=0.523, clip=0, loss_scale=64, train_wall=61, gb_free=16.9, wall=17051
2023-08-23 06:28:56 | INFO | train_inner | epoch 015:    273 / 1474 loss=1.996, trans_loss=4.916, nll_loss=2.16, w2v_ctc_loss=0.713, task_loss=1.27, contrastive_loss=0.093, total=4190.11, n_correct=2765.06, ppl=4.47, accuracy=65.99, wps=13683.5, ups=1.63, wpb=8380.2, bsz=312.6, num_updates=20900, lr=9.78232e-05, gnorm=0.519, clip=0, loss_scale=64, train_wall=61, gb_free=16.8, wall=17112
2023-08-23 06:29:57 | INFO | train_inner | epoch 015:    373 / 1474 loss=2, trans_loss=4.91, nll_loss=2.153, w2v_ctc_loss=0.713, task_loss=1.353, contrastive_loss=0.114, total=4150.33, n_correct=2737.88, ppl=4.45, accuracy=65.968, wps=13574.3, ups=1.64, wpb=8300.7, bsz=301, num_updates=21000, lr=9.759e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=15.2, wall=17173
2023-08-23 06:30:58 | INFO | train_inner | epoch 015:    473 / 1474 loss=2.01, trans_loss=4.916, nll_loss=2.16, w2v_ctc_loss=0.708, task_loss=1.354, contrastive_loss=0.206, total=4082.7, n_correct=2687.54, ppl=4.47, accuracy=65.828, wps=13319.4, ups=1.63, wpb=8165.4, bsz=298.5, num_updates=21100, lr=9.73585e-05, gnorm=0.524, clip=0, loss_scale=128, train_wall=61, gb_free=16.8, wall=17235
2023-08-23 06:32:00 | INFO | train_inner | epoch 015:    573 / 1474 loss=2.002, trans_loss=4.916, nll_loss=2.16, w2v_ctc_loss=0.72, task_loss=1.392, contrastive_loss=0.096, total=4130.96, n_correct=2720.47, ppl=4.47, accuracy=65.856, wps=13316.4, ups=1.61, wpb=8261.9, bsz=293.4, num_updates=21200, lr=9.71286e-05, gnorm=0.525, clip=0, loss_scale=128, train_wall=61, gb_free=16.9, wall=17297
2023-08-23 06:33:01 | INFO | train_inner | epoch 015:    673 / 1474 loss=2.007, trans_loss=4.912, nll_loss=2.156, w2v_ctc_loss=0.717, task_loss=1.311, contrastive_loss=0.169, total=4138.41, n_correct=2730.7, ppl=4.46, accuracy=65.984, wps=13544.5, ups=1.64, wpb=8276.8, bsz=309.4, num_updates=21300, lr=9.69003e-05, gnorm=0.531, clip=0, loss_scale=128, train_wall=61, gb_free=16.5, wall=17358
2023-08-23 06:34:03 | INFO | train_inner | epoch 015:    773 / 1474 loss=2.008, trans_loss=4.923, nll_loss=2.169, w2v_ctc_loss=0.725, task_loss=1.326, contrastive_loss=0.118, total=4186.48, n_correct=2752.36, ppl=4.5, accuracy=65.744, wps=13542.5, ups=1.62, wpb=8373, bsz=307.9, num_updates=21400, lr=9.66736e-05, gnorm=0.525, clip=0, loss_scale=128, train_wall=61, gb_free=16.4, wall=17420
2023-08-23 06:35:04 | INFO | train_inner | epoch 015:    873 / 1474 loss=2.008, trans_loss=4.925, nll_loss=2.172, w2v_ctc_loss=0.726, task_loss=1.436, contrastive_loss=0.096, total=4054.09, n_correct=2661.87, ppl=4.51, accuracy=65.659, wps=13338.5, ups=1.65, wpb=8108.2, bsz=286.2, num_updates=21500, lr=9.64486e-05, gnorm=0.533, clip=0, loss_scale=128, train_wall=60, gb_free=15.6, wall=17481
2023-08-23 06:35:50 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 64.0
2023-08-23 06:36:06 | INFO | train_inner | epoch 015:    974 / 1474 loss=2.002, trans_loss=4.916, nll_loss=2.161, w2v_ctc_loss=0.712, task_loss=1.331, contrastive_loss=0.158, total=4112.28, n_correct=2709.26, ppl=4.47, accuracy=65.882, wps=13300.8, ups=1.62, wpb=8224.6, bsz=299.3, num_updates=21600, lr=9.6225e-05, gnorm=0.523, clip=0, loss_scale=64, train_wall=61, gb_free=17.3, wall=17542
2023-08-23 06:37:09 | INFO | train_inner | epoch 015:   1074 / 1474 loss=2.026, trans_loss=4.928, nll_loss=2.177, w2v_ctc_loss=0.718, task_loss=1.235, contrastive_loss=0.335, total=4192.24, n_correct=2752.89, ppl=4.52, accuracy=65.666, wps=13341.6, ups=1.59, wpb=8384.5, bsz=325.2, num_updates=21700, lr=9.60031e-05, gnorm=0.523, clip=0, loss_scale=64, train_wall=62, gb_free=16.9, wall=17605
2023-08-23 06:38:10 | INFO | train_inner | epoch 015:   1174 / 1474 loss=1.995, trans_loss=4.916, nll_loss=2.161, w2v_ctc_loss=0.704, task_loss=1.179, contrastive_loss=0.144, total=4185, n_correct=2765.01, ppl=4.47, accuracy=66.07, wps=13712.8, ups=1.64, wpb=8370, bsz=329.3, num_updates=21800, lr=9.57826e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=60, gb_free=16, wall=17666
2023-08-23 06:39:11 | INFO | train_inner | epoch 015:   1274 / 1474 loss=2.008, trans_loss=4.917, nll_loss=2.162, w2v_ctc_loss=0.732, task_loss=1.346, contrastive_loss=0.101, total=4152.04, n_correct=2730.77, ppl=4.47, accuracy=65.769, wps=13534.3, ups=1.63, wpb=8304.1, bsz=303.7, num_updates=21900, lr=9.55637e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=16.1, wall=17728
2023-08-23 06:40:12 | INFO | train_inner | epoch 015:   1374 / 1474 loss=2, trans_loss=4.916, nll_loss=2.161, w2v_ctc_loss=0.717, task_loss=1.36, contrastive_loss=0.088, total=4100.21, n_correct=2701.7, ppl=4.47, accuracy=65.892, wps=13436.5, ups=1.64, wpb=8200.4, bsz=293.6, num_updates=22000, lr=9.53463e-05, gnorm=0.532, clip=0, loss_scale=64, train_wall=60, gb_free=17.2, wall=17789
2023-08-23 06:40:12 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 06:40:45 | INFO | dev_st | epoch 015 | valid on 'dev_st' subset | loss 3.959 | trans_loss 5.177 | nll_loss 2.443 | w2v_ctc_loss 1.282 | task_loss 4.62 | contrastive_loss 0.304 | total 4003.4 | n_correct 2652 | ppl 5.44 | accuracy 66.244 | uer 17.875 | wer 19.776 | raw_wer 19.776 | bleu 22.03 | wps 1608.5 | wpb 4003.4 | bsz 141.8 | num_updates 22000 | best_bleu 22.03
2023-08-23 06:40:45 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 15 @ 22000 updates
2023-08-23 06:40:45 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_15_22000.pt
2023-08-23 06:40:47 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_15_22000.pt
2023-08-23 06:40:59 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_15_22000.pt (epoch 15 @ 22000 updates, score 22.03) (writing took 14.296733501018025 seconds)
2023-08-23 06:42:03 | INFO | train_inner | epoch 015:   1474 / 1474 loss=2.011, trans_loss=4.925, nll_loss=2.174, w2v_ctc_loss=0.717, task_loss=1.276, contrastive_loss=0.177, total=4141.17, n_correct=2722.92, ppl=4.51, accuracy=65.752, wps=7483.7, ups=0.9, wpb=8282.3, bsz=314.3, num_updates=22100, lr=9.51303e-05, gnorm=0.542, clip=0, loss_scale=64, train_wall=62, gb_free=16.5, wall=17899
2023-08-23 06:42:03 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 06:42:36 | INFO | dev_st | epoch 015 | valid on 'dev_st' subset | loss 3.964 | trans_loss 5.175 | nll_loss 2.442 | w2v_ctc_loss 1.301 | task_loss 4.646 | contrastive_loss 0.311 | total 4003.4 | n_correct 2650.6 | ppl 5.43 | accuracy 66.209 | uer 17.835 | wer 19.705 | raw_wer 19.705 | bleu 21.94 | wps 1593.2 | wpb 4003.4 | bsz 141.8 | num_updates 22100 | best_bleu 22.03
2023-08-23 06:42:36 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 15 @ 22100 updates
2023-08-23 06:42:36 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9408.pt
2023-08-23 06:42:39 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9408.pt
2023-08-23 06:42:44 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9408.pt (epoch 15 @ 22100 updates, score 21.94) (writing took 7.466881332104094 seconds)
2023-08-23 06:42:44 | INFO | fairseq_cli.train | end of epoch 15 (average epoch stats below)
2023-08-23 06:42:44 | INFO | train | epoch 015 | loss 2.006 | trans_loss 4.918 | nll_loss 2.163 | w2v_ctc_loss 0.717 | task_loss 1.319 | contrastive_loss 0.148 | total 4137.64 | n_correct 2725.12 | ppl 4.48 | accuracy 65.862 | wps 12163 | ups 1.47 | wpb 8275.3 | bsz 305.4 | num_updates 22100 | lr 9.51303e-05 | gnorm 0.527 | clip 0 | loss_scale 64 | train_wall 898 | gb_free 16.5 | wall 17941
2023-08-23 06:42:44 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 06:42:44 | INFO | fairseq.trainer | begin training epoch 16
2023-08-23 06:42:44 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 06:43:53 | INFO | train_inner | epoch 016:    100 / 1474 loss=1.988, trans_loss=4.899, nll_loss=2.139, w2v_ctc_loss=0.705, task_loss=1.258, contrastive_loss=0.117, total=4126.22, n_correct=2736.28, ppl=4.41, accuracy=66.314, wps=7500.6, ups=0.91, wpb=8252.4, bsz=315.6, num_updates=22200, lr=9.49158e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=18009
2023-08-23 06:44:54 | INFO | train_inner | epoch 016:    200 / 1474 loss=1.982, trans_loss=4.889, nll_loss=2.126, w2v_ctc_loss=0.698, task_loss=1.354, contrastive_loss=0.092, total=4100.6, n_correct=2723.01, ppl=4.36, accuracy=66.405, wps=13403.7, ups=1.63, wpb=8201.2, bsz=296.8, num_updates=22300, lr=9.47027e-05, gnorm=0.529, clip=0, loss_scale=64, train_wall=61, gb_free=12.3, wall=18071
2023-08-23 06:45:55 | INFO | train_inner | epoch 016:    300 / 1474 loss=1.998, trans_loss=4.9, nll_loss=2.141, w2v_ctc_loss=0.712, task_loss=1.311, contrastive_loss=0.167, total=4166.94, n_correct=2760.14, ppl=4.41, accuracy=66.239, wps=13553.2, ups=1.63, wpb=8333.9, bsz=308.9, num_updates=22400, lr=9.44911e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=16.9, wall=18132
2023-08-23 06:46:57 | INFO | train_inner | epoch 016:    400 / 1474 loss=2, trans_loss=4.898, nll_loss=2.137, w2v_ctc_loss=0.713, task_loss=1.403, contrastive_loss=0.179, total=4073.3, n_correct=2698.7, ppl=4.4, accuracy=66.253, wps=13336.8, ups=1.64, wpb=8146.6, bsz=288.1, num_updates=22500, lr=9.42809e-05, gnorm=0.531, clip=0, loss_scale=64, train_wall=60, gb_free=16.6, wall=18193
2023-08-23 06:47:58 | INFO | train_inner | epoch 016:    500 / 1474 loss=1.989, trans_loss=4.901, nll_loss=2.142, w2v_ctc_loss=0.703, task_loss=1.269, contrastive_loss=0.124, total=4174.67, n_correct=2769.02, ppl=4.41, accuracy=66.329, wps=13488, ups=1.62, wpb=8349.3, bsz=319.1, num_updates=22600, lr=9.40721e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=61, gb_free=15.7, wall=18255
2023-08-23 06:49:00 | INFO | train_inner | epoch 016:    600 / 1474 loss=1.994, trans_loss=4.906, nll_loss=2.147, w2v_ctc_loss=0.715, task_loss=1.333, contrastive_loss=0.089, total=4124.65, n_correct=2728.28, ppl=4.43, accuracy=66.146, wps=13472.2, ups=1.63, wpb=8249.3, bsz=297.6, num_updates=22700, lr=9.38647e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=60, gb_free=15.9, wall=18316
2023-08-23 06:50:01 | INFO | train_inner | epoch 016:    700 / 1474 loss=1.99, trans_loss=4.9, nll_loss=2.139, w2v_ctc_loss=0.712, task_loss=1.349, contrastive_loss=0.09, total=4095.49, n_correct=2712.26, ppl=4.41, accuracy=66.226, wps=13404.9, ups=1.64, wpb=8191, bsz=296.3, num_updates=22800, lr=9.36586e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=18377
2023-08-23 06:51:02 | INFO | train_inner | epoch 016:    800 / 1474 loss=1.993, trans_loss=4.901, nll_loss=2.141, w2v_ctc_loss=0.703, task_loss=1.267, contrastive_loss=0.151, total=4174.94, n_correct=2764.05, ppl=4.41, accuracy=66.206, wps=13571.9, ups=1.63, wpb=8349.9, bsz=310.9, num_updates=22900, lr=9.34539e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=16.1, wall=18439
2023-08-23 06:52:04 | INFO | train_inner | epoch 016:    900 / 1474 loss=1.993, trans_loss=4.901, nll_loss=2.141, w2v_ctc_loss=0.705, task_loss=1.279, contrastive_loss=0.143, total=4163.19, n_correct=2756.94, ppl=4.41, accuracy=66.222, wps=13596.7, ups=1.63, wpb=8326.4, bsz=310.6, num_updates=23000, lr=9.32505e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=16.5, wall=18500
2023-08-23 06:53:05 | INFO | train_inner | epoch 016:   1000 / 1474 loss=2.002, trans_loss=4.908, nll_loss=2.15, w2v_ctc_loss=0.72, task_loss=1.376, contrastive_loss=0.141, total=4103.45, n_correct=2707.02, ppl=4.44, accuracy=65.969, wps=13255.8, ups=1.62, wpb=8206.9, bsz=298.1, num_updates=23100, lr=9.30484e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=14.5, wall=18562
2023-08-23 06:54:07 | INFO | train_inner | epoch 016:   1100 / 1474 loss=2.002, trans_loss=4.912, nll_loss=2.156, w2v_ctc_loss=0.719, task_loss=1.407, contrastive_loss=0.116, total=4119.27, n_correct=2718.38, ppl=4.46, accuracy=65.992, wps=13350.4, ups=1.62, wpb=8238.5, bsz=295.3, num_updates=23200, lr=9.28477e-05, gnorm=0.531, clip=0, loss_scale=64, train_wall=61, gb_free=17.5, wall=18624
2023-08-23 06:54:30 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 06:55:10 | INFO | train_inner | epoch 016:   1201 / 1474 loss=1.988, trans_loss=4.906, nll_loss=2.148, w2v_ctc_loss=0.701, task_loss=1.377, contrastive_loss=0.095, total=4132.57, n_correct=2735.99, ppl=4.43, accuracy=66.206, wps=13065.1, ups=1.58, wpb=8265.1, bsz=298.8, num_updates=23300, lr=9.26482e-05, gnorm=0.522, clip=0, loss_scale=32, train_wall=63, gb_free=14.5, wall=18687
2023-08-23 06:56:12 | INFO | train_inner | epoch 016:   1301 / 1474 loss=2.001, trans_loss=4.903, nll_loss=2.145, w2v_ctc_loss=0.715, task_loss=1.279, contrastive_loss=0.19, total=4151.03, n_correct=2747.13, ppl=4.42, accuracy=66.179, wps=13539.6, ups=1.63, wpb=8302.1, bsz=314.5, num_updates=23400, lr=9.245e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=15.8, wall=18748
2023-08-23 06:57:13 | INFO | train_inner | epoch 016:   1401 / 1474 loss=1.991, trans_loss=4.902, nll_loss=2.144, w2v_ctc_loss=0.711, task_loss=1.255, contrastive_loss=0.119, total=4201.47, n_correct=2782.77, ppl=4.42, accuracy=66.233, wps=13637.7, ups=1.62, wpb=8402.9, bsz=320.7, num_updates=23500, lr=9.22531e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=15.6, wall=18810
2023-08-23 06:57:58 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 06:58:32 | INFO | dev_st | epoch 016 | valid on 'dev_st' subset | loss 3.967 | trans_loss 5.165 | nll_loss 2.427 | w2v_ctc_loss 1.34 | task_loss 4.662 | contrastive_loss 0.303 | total 4003.4 | n_correct 2662.2 | ppl 5.38 | accuracy 66.498 | uer 18.122 | wer 19.988 | raw_wer 19.988 | bleu 21.98 | wps 1602.9 | wpb 4003.4 | bsz 141.8 | num_updates 23573 | best_bleu 22.03
2023-08-23 06:58:32 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 16 @ 23573 updates
2023-08-23 06:58:32 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9808.pt
2023-08-23 06:58:35 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9808.pt
2023-08-23 06:58:40 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9808.pt (epoch 16 @ 23573 updates, score 21.98) (writing took 8.207074707956053 seconds)
2023-08-23 06:58:40 | INFO | fairseq_cli.train | end of epoch 16 (average epoch stats below)
2023-08-23 06:58:40 | INFO | train | epoch 016 | loss 1.994 | trans_loss 4.902 | nll_loss 2.143 | w2v_ctc_loss 0.709 | task_loss 1.321 | contrastive_loss 0.139 | total 4137.02 | n_correct 2739.15 | ppl 4.42 | accuracy 66.211 | wps 12742.9 | ups 1.54 | wpb 8274 | bsz 305.1 | num_updates 23573 | lr 9.21102e-05 | gnorm 0.528 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 15.1 | wall 18897
2023-08-23 06:58:41 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 06:58:41 | INFO | fairseq.trainer | begin training epoch 17
2023-08-23 06:58:41 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 06:59:04 | INFO | train_inner | epoch 017:     27 / 1474 loss=1.995, trans_loss=4.891, nll_loss=2.128, w2v_ctc_loss=0.695, task_loss=1.348, contrastive_loss=0.253, total=4145.04, n_correct=2753.22, ppl=4.37, accuracy=66.422, wps=7472.3, ups=0.9, wpb=8290.1, bsz=302.4, num_updates=23600, lr=9.20575e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=15.3, wall=18921
2023-08-23 07:00:05 | INFO | train_inner | epoch 017:    127 / 1474 loss=1.979, trans_loss=4.879, nll_loss=2.112, w2v_ctc_loss=0.701, task_loss=1.357, contrastive_loss=0.092, total=4117.27, n_correct=2743.38, ppl=4.32, accuracy=66.631, wps=13473.8, ups=1.64, wpb=8234.5, bsz=296.2, num_updates=23700, lr=9.1863e-05, gnorm=0.522, clip=0, loss_scale=32, train_wall=60, gb_free=17.5, wall=18982
2023-08-23 07:01:08 | INFO | train_inner | epoch 017:    227 / 1474 loss=1.991, trans_loss=4.879, nll_loss=2.113, w2v_ctc_loss=0.69, task_loss=1.251, contrastive_loss=0.256, total=4159.6, n_correct=2770.9, ppl=4.32, accuracy=66.615, wps=13396.6, ups=1.61, wpb=8319.2, bsz=317.6, num_updates=23800, lr=9.16698e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=62, gb_free=16.5, wall=19044
2023-08-23 07:02:09 | INFO | train_inner | epoch 017:    327 / 1474 loss=1.992, trans_loss=4.885, nll_loss=2.121, w2v_ctc_loss=0.695, task_loss=1.31, contrastive_loss=0.259, total=4156.91, n_correct=2766.19, ppl=4.35, accuracy=66.544, wps=13554.7, ups=1.63, wpb=8313.8, bsz=305.7, num_updates=23900, lr=9.14779e-05, gnorm=0.522, clip=0, loss_scale=32, train_wall=61, gb_free=17.1, wall=19105
2023-08-23 07:03:10 | INFO | train_inner | epoch 017:    427 / 1474 loss=1.977, trans_loss=4.884, nll_loss=2.119, w2v_ctc_loss=0.7, task_loss=1.305, contrastive_loss=0.09, total=4146.43, n_correct=2766.21, ppl=4.34, accuracy=66.713, wps=13527.2, ups=1.63, wpb=8292.9, bsz=308, num_updates=24000, lr=9.12871e-05, gnorm=0.523, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=19167
2023-08-23 07:03:10 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 07:03:43 | INFO | dev_st | epoch 017 | valid on 'dev_st' subset | loss 3.984 | trans_loss 5.167 | nll_loss 2.427 | w2v_ctc_loss 1.392 | task_loss 4.631 | contrastive_loss 0.303 | total 4003.4 | n_correct 2662.3 | ppl 5.38 | accuracy 66.501 | uer 18.607 | wer 20.536 | raw_wer 20.536 | bleu 22.02 | wps 1636.8 | wpb 4003.4 | bsz 141.8 | num_updates 24000 | best_bleu 22.03
2023-08-23 07:03:43 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 17 @ 24000 updates
2023-08-23 07:03:43 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_17_24000.pt
2023-08-23 07:03:45 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_17_24000.pt
2023-08-23 07:03:52 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_17_24000.pt (epoch 17 @ 24000 updates, score 22.02) (writing took 8.52687803003937 seconds)
2023-08-23 07:04:55 | INFO | train_inner | epoch 017:    527 / 1474 loss=1.985, trans_loss=4.887, nll_loss=2.123, w2v_ctc_loss=0.7, task_loss=1.372, contrastive_loss=0.136, total=4182.1, n_correct=2778.47, ppl=4.36, accuracy=66.437, wps=8005, ups=0.96, wpb=8364.2, bsz=307.9, num_updates=24100, lr=9.10975e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=62, gb_free=16.5, wall=19271
2023-08-23 07:05:56 | INFO | train_inner | epoch 017:    627 / 1474 loss=1.976, trans_loss=4.886, nll_loss=2.122, w2v_ctc_loss=0.694, task_loss=1.331, contrastive_loss=0.085, total=4167.27, n_correct=2776.5, ppl=4.35, accuracy=66.626, wps=13575.7, ups=1.63, wpb=8334.5, bsz=302.2, num_updates=24200, lr=9.09091e-05, gnorm=0.513, clip=0, loss_scale=32, train_wall=61, gb_free=10.3, wall=19333
2023-08-23 07:06:58 | INFO | train_inner | epoch 017:    727 / 1474 loss=1.993, trans_loss=4.891, nll_loss=2.128, w2v_ctc_loss=0.716, task_loss=1.304, contrastive_loss=0.134, total=4166.12, n_correct=2765.49, ppl=4.37, accuracy=66.38, wps=13456.4, ups=1.61, wpb=8332.2, bsz=308.1, num_updates=24300, lr=9.07218e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=19395
2023-08-23 07:07:59 | INFO | train_inner | epoch 017:    827 / 1474 loss=1.982, trans_loss=4.888, nll_loss=2.124, w2v_ctc_loss=0.702, task_loss=1.337, contrastive_loss=0.098, total=4091.64, n_correct=2722.57, ppl=4.36, accuracy=66.54, wps=13446.1, ups=1.64, wpb=8183.3, bsz=295.3, num_updates=24400, lr=9.05357e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=60, gb_free=17, wall=19455
2023-08-23 07:09:00 | INFO | train_inner | epoch 017:    927 / 1474 loss=1.977, trans_loss=4.887, nll_loss=2.124, w2v_ctc_loss=0.697, task_loss=1.303, contrastive_loss=0.095, total=4106.83, n_correct=2729.25, ppl=4.36, accuracy=66.456, wps=13510.1, ups=1.64, wpb=8213.7, bsz=304.6, num_updates=24500, lr=9.03508e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=60, gb_free=15.5, wall=19516
2023-08-23 07:10:01 | INFO | train_inner | epoch 017:   1027 / 1474 loss=1.981, trans_loss=4.888, nll_loss=2.126, w2v_ctc_loss=0.704, task_loss=1.301, contrastive_loss=0.099, total=4115.49, n_correct=2733.89, ppl=4.36, accuracy=66.429, wps=13477.7, ups=1.64, wpb=8231, bsz=305.8, num_updates=24600, lr=9.0167e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=19577
2023-08-23 07:11:02 | INFO | train_inner | epoch 017:   1127 / 1474 loss=1.977, trans_loss=4.885, nll_loss=2.121, w2v_ctc_loss=0.695, task_loss=1.37, contrastive_loss=0.086, total=4078.39, n_correct=2716.37, ppl=4.35, accuracy=66.604, wps=13360.6, ups=1.64, wpb=8156.8, bsz=293.7, num_updates=24700, lr=8.99843e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=15.2, wall=19638
2023-08-23 07:12:04 | INFO | train_inner | epoch 017:   1227 / 1474 loss=2.006, trans_loss=4.896, nll_loss=2.135, w2v_ctc_loss=0.695, task_loss=1.277, contrastive_loss=0.329, total=4173.49, n_correct=2764.21, ppl=4.39, accuracy=66.233, wps=13392.3, ups=1.6, wpb=8347, bsz=323.7, num_updates=24800, lr=8.98027e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=62, gb_free=15.7, wall=19701
2023-08-23 07:13:06 | INFO | train_inner | epoch 017:   1327 / 1474 loss=1.987, trans_loss=4.891, nll_loss=2.129, w2v_ctc_loss=0.692, task_loss=1.307, contrastive_loss=0.171, total=4156.28, n_correct=2762.23, ppl=4.37, accuracy=66.459, wps=13515.4, ups=1.63, wpb=8312.6, bsz=308, num_updates=24900, lr=8.96221e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=17.5, wall=19762
2023-08-23 07:14:07 | INFO | train_inner | epoch 017:   1427 / 1474 loss=1.98, trans_loss=4.891, nll_loss=2.129, w2v_ctc_loss=0.697, task_loss=1.328, contrastive_loss=0.093, total=4112.95, n_correct=2735.97, ppl=4.37, accuracy=66.521, wps=13365.6, ups=1.62, wpb=8225.9, bsz=303.2, num_updates=25000, lr=8.94427e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.5, wall=19824
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 07:14:36 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
2023-08-23 07:15:09 | INFO | dev_st | epoch 017 | valid on 'dev_st' subset | loss 3.972 | trans_loss 5.166 | nll_loss 2.43 | w2v_ctc_loss 1.353 | task_loss 4.653 | contrastive_loss 0.305 | total 4003.4 | n_correct 2662.6 | ppl 5.39 | accuracy 66.508 | uer 18.164 | wer 20.107 | raw_wer 20.107 | bleu 21.91 | wps 1638.2 | wpb 4003.4 | bsz 141.8 | num_updates 25047 | best_bleu 22.03
2023-08-23 07:15:09 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 17 @ 25047 updates
2023-08-23 07:15:09 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9102.pt
2023-08-23 07:15:12 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9102.pt
2023-08-23 07:15:17 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9102.pt (epoch 17 @ 25047 updates, score 21.91) (writing took 7.787852736073546 seconds)
2023-08-23 07:15:17 | INFO | fairseq_cli.train | end of epoch 17 (average epoch stats below)
2023-08-23 07:15:17 | INFO | train | epoch 017 | loss 1.984 | trans_loss 4.887 | nll_loss 2.123 | w2v_ctc_loss 0.699 | task_loss 1.319 | contrastive_loss 0.143 | total 4138.65 | n_correct 2753.12 | ppl 4.36 | accuracy 66.522 | wps 12239.8 | ups 1.48 | wpb 8277.3 | bsz 305.7 | num_updates 25047 | lr 8.93588e-05 | gnorm 0.526 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 16.1 | wall 19894
2023-08-23 07:15:17 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 07:15:17 | INFO | fairseq.trainer | begin training epoch 18
2023-08-23 07:15:17 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 07:15:58 | INFO | train_inner | epoch 018:     53 / 1474 loss=1.977, trans_loss=4.879, nll_loss=2.113, w2v_ctc_loss=0.701, task_loss=1.344, contrastive_loss=0.1, total=4139.04, n_correct=2761.53, ppl=4.33, accuracy=66.719, wps=7473.6, ups=0.9, wpb=8278.1, bsz=303.3, num_updates=25100, lr=8.92644e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=16.8, wall=19935
2023-08-23 07:16:59 | INFO | train_inner | epoch 018:    153 / 1474 loss=1.971, trans_loss=4.86, nll_loss=2.088, w2v_ctc_loss=0.669, task_loss=1.26, contrastive_loss=0.223, total=4154.85, n_correct=2785.65, ppl=4.25, accuracy=67.046, wps=13534.8, ups=1.63, wpb=8309.7, bsz=312.7, num_updates=25200, lr=8.90871e-05, gnorm=0.518, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=19996
2023-08-23 07:18:01 | INFO | train_inner | epoch 018:    253 / 1474 loss=1.964, trans_loss=4.863, nll_loss=2.093, w2v_ctc_loss=0.687, task_loss=1.279, contrastive_loss=0.092, total=4162.72, n_correct=2793.69, ppl=4.27, accuracy=67.112, wps=13428.5, ups=1.61, wpb=8325.4, bsz=312.9, num_updates=25300, lr=8.89108e-05, gnorm=0.52, clip=0, loss_scale=64, train_wall=61, gb_free=15.7, wall=20058
2023-08-23 07:19:03 | INFO | train_inner | epoch 018:    353 / 1474 loss=1.968, trans_loss=4.869, nll_loss=2.099, w2v_ctc_loss=0.685, task_loss=1.336, contrastive_loss=0.105, total=4161.22, n_correct=2783.43, ppl=4.29, accuracy=66.89, wps=13469, ups=1.62, wpb=8322.4, bsz=301.5, num_updates=25400, lr=8.87357e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=14, wall=20120
2023-08-23 07:20:05 | INFO | train_inner | epoch 018:    453 / 1474 loss=1.982, trans_loss=4.876, nll_loss=2.109, w2v_ctc_loss=0.686, task_loss=1.407, contrastive_loss=0.196, total=4092.36, n_correct=2732.52, ppl=4.31, accuracy=66.771, wps=13230.9, ups=1.62, wpb=8184.7, bsz=295.3, num_updates=25500, lr=8.85615e-05, gnorm=0.532, clip=0, loss_scale=64, train_wall=61, gb_free=16.3, wall=20182
2023-08-23 07:21:06 | INFO | train_inner | epoch 018:    553 / 1474 loss=1.957, trans_loss=4.858, nll_loss=2.087, w2v_ctc_loss=0.675, task_loss=1.183, contrastive_loss=0.103, total=4206.45, n_correct=2824.56, ppl=4.25, accuracy=67.148, wps=13744, ups=1.63, wpb=8412.9, bsz=328.9, num_updates=25600, lr=8.83883e-05, gnorm=0.515, clip=0, loss_scale=64, train_wall=61, gb_free=17.5, wall=20243
2023-08-23 07:21:25 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 07:22:08 | INFO | train_inner | epoch 018:    654 / 1474 loss=1.985, trans_loss=4.88, nll_loss=2.115, w2v_ctc_loss=0.701, task_loss=1.357, contrastive_loss=0.172, total=4094.82, n_correct=2732.91, ppl=4.33, accuracy=66.741, wps=13205.7, ups=1.61, wpb=8189.6, bsz=299.1, num_updates=25700, lr=8.82162e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=20305
2023-08-23 07:23:10 | INFO | train_inner | epoch 018:    754 / 1474 loss=1.989, trans_loss=4.879, nll_loss=2.113, w2v_ctc_loss=0.696, task_loss=1.256, contrastive_loss=0.261, total=4208.29, n_correct=2809.82, ppl=4.33, accuracy=66.769, wps=13654.3, ups=1.62, wpb=8416.6, bsz=322.8, num_updates=25800, lr=8.80451e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=17.5, wall=20366
2023-08-23 07:24:12 | INFO | train_inner | epoch 018:    854 / 1474 loss=1.969, trans_loss=4.873, nll_loss=2.105, w2v_ctc_loss=0.69, task_loss=1.339, contrastive_loss=0.082, total=4166.81, n_correct=2783.44, ppl=4.3, accuracy=66.8, wps=13528.3, ups=1.62, wpb=8333.6, bsz=301.9, num_updates=25900, lr=8.7875e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=12.2, wall=20428
2023-08-23 07:25:12 | INFO | train_inner | epoch 018:    954 / 1474 loss=1.962, trans_loss=4.867, nll_loss=2.098, w2v_ctc_loss=0.677, task_loss=1.224, contrastive_loss=0.104, total=4142.65, n_correct=2775.34, ppl=4.28, accuracy=66.994, wps=13704, ups=1.65, wpb=8285.3, bsz=316.1, num_updates=26000, lr=8.77058e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=60, gb_free=14.5, wall=20489
2023-08-23 07:25:12 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 07:25:45 | INFO | dev_st | epoch 018 | valid on 'dev_st' subset | loss 3.962 | trans_loss 5.164 | nll_loss 2.424 | w2v_ctc_loss 1.327 | task_loss 4.63 | contrastive_loss 0.304 | total 4003.4 | n_correct 2667.1 | ppl 5.37 | accuracy 66.621 | uer 18.093 | wer 20.133 | raw_wer 20.133 | bleu 22.1 | wps 1644.8 | wpb 4003.4 | bsz 141.8 | num_updates 26000 | best_bleu 22.1
2023-08-23 07:25:45 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 18 @ 26000 updates
2023-08-23 07:25:45 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_18_26000.pt
2023-08-23 07:25:47 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_18_26000.pt
2023-08-23 07:26:01 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_18_26000.pt (epoch 18 @ 26000 updates, score 22.1) (writing took 16.373361150035635 seconds)
2023-08-23 07:27:04 | INFO | train_inner | epoch 018:   1054 / 1474 loss=1.967, trans_loss=4.871, nll_loss=2.103, w2v_ctc_loss=0.683, task_loss=1.37, contrastive_loss=0.091, total=4137.77, n_correct=2767.21, ppl=4.3, accuracy=66.877, wps=7420, ups=0.9, wpb=8275.5, bsz=300.5, num_updates=26100, lr=8.75376e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=17.1, wall=20600
2023-08-23 07:28:05 | INFO | train_inner | epoch 018:   1154 / 1474 loss=1.976, trans_loss=4.863, nll_loss=2.094, w2v_ctc_loss=0.688, task_loss=1.246, contrastive_loss=0.197, total=4153.69, n_correct=2782.56, ppl=4.27, accuracy=66.99, wps=13470.2, ups=1.62, wpb=8307.4, bsz=314.9, num_updates=26200, lr=8.73704e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=14.8, wall=20662
2023-08-23 07:29:06 | INFO | train_inner | epoch 018:   1254 / 1474 loss=1.973, trans_loss=4.882, nll_loss=2.117, w2v_ctc_loss=0.69, task_loss=1.417, contrastive_loss=0.086, total=4087.62, n_correct=2726.27, ppl=4.34, accuracy=66.696, wps=13357, ups=1.63, wpb=8175.2, bsz=287.1, num_updates=26300, lr=8.72041e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=20723
2023-08-23 07:30:08 | INFO | train_inner | epoch 018:   1354 / 1474 loss=1.984, trans_loss=4.883, nll_loss=2.118, w2v_ctc_loss=0.71, task_loss=1.407, contrastive_loss=0.111, total=4070.69, n_correct=2711.65, ppl=4.34, accuracy=66.614, wps=13246.5, ups=1.63, wpb=8141.4, bsz=291.7, num_updates=26400, lr=8.70388e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=17.1, wall=20784
2023-08-23 07:31:09 | INFO | train_inner | epoch 018:   1454 / 1474 loss=1.977, trans_loss=4.88, nll_loss=2.114, w2v_ctc_loss=0.701, task_loss=1.394, contrastive_loss=0.098, total=4113.2, n_correct=2744.99, ppl=4.33, accuracy=66.736, wps=13375.6, ups=1.63, wpb=8226.4, bsz=297.5, num_updates=26500, lr=8.68744e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.1, wall=20846
2023-08-23 07:31:22 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 07:31:54 | INFO | dev_st | epoch 018 | valid on 'dev_st' subset | loss 3.971 | trans_loss 5.163 | nll_loss 2.425 | w2v_ctc_loss 1.364 | task_loss 4.636 | contrastive_loss 0.295 | total 4003.4 | n_correct 2667 | ppl 5.37 | accuracy 66.618 | uer 17.872 | wer 19.872 | raw_wer 19.872 | bleu 22.18 | wps 1622.7 | wpb 4003.4 | bsz 141.8 | num_updates 26520 | best_bleu 22.18
2023-08-23 07:31:54 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 18 @ 26520 updates
2023-08-23 07:31:54 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 07:32:02 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 07:32:08 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 18 @ 26520 updates, score 22.18) (writing took 13.72594183892943 seconds)
2023-08-23 07:32:09 | INFO | fairseq_cli.train | end of epoch 18 (average epoch stats below)
2023-08-23 07:32:09 | INFO | train | epoch 018 | loss 1.973 | trans_loss 4.872 | nll_loss 2.104 | w2v_ctc_loss 0.688 | task_loss 1.318 | contrastive_loss 0.14 | total 4138.72 | n_correct 2767.44 | ppl 4.3 | accuracy 66.867 | wps 12053.2 | ups 1.46 | wpb 8277.4 | bsz 305.7 | num_updates 26520 | lr 8.68417e-05 | gnorm 0.526 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 15.5 | wall 20905
2023-08-23 07:32:09 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 07:32:09 | INFO | fairseq.trainer | begin training epoch 19
2023-08-23 07:32:09 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 07:33:05 | INFO | train_inner | epoch 019:     80 / 1474 loss=1.966, trans_loss=4.856, nll_loss=2.083, w2v_ctc_loss=0.681, task_loss=1.321, contrastive_loss=0.147, total=4102.06, n_correct=2755.25, ppl=4.24, accuracy=67.167, wps=7089.2, ups=0.86, wpb=8204.1, bsz=296.9, num_updates=26600, lr=8.6711e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=17.1, wall=20962
2023-08-23 07:34:07 | INFO | train_inner | epoch 019:    180 / 1474 loss=1.968, trans_loss=4.856, nll_loss=2.084, w2v_ctc_loss=0.692, task_loss=1.228, contrastive_loss=0.139, total=4227.7, n_correct=2841.62, ppl=4.24, accuracy=67.214, wps=13612.4, ups=1.61, wpb=8455.4, bsz=324.8, num_updates=26700, lr=8.65485e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=62, gb_free=16.7, wall=21024
2023-08-23 07:35:08 | INFO | train_inner | epoch 019:    280 / 1474 loss=1.954, trans_loss=4.848, nll_loss=2.072, w2v_ctc_loss=0.679, task_loss=1.3, contrastive_loss=0.082, total=4187.34, n_correct=2818.97, ppl=4.2, accuracy=67.321, wps=13675.8, ups=1.63, wpb=8374.7, bsz=306.4, num_updates=26800, lr=8.63868e-05, gnorm=0.52, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=21085
2023-08-23 07:36:10 | INFO | train_inner | epoch 019:    380 / 1474 loss=1.968, trans_loss=4.853, nll_loss=2.079, w2v_ctc_loss=0.677, task_loss=1.298, contrastive_loss=0.192, total=4170.52, n_correct=2800.51, ppl=4.23, accuracy=67.15, wps=13467.1, ups=1.61, wpb=8341, bsz=311, num_updates=26900, lr=8.62261e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=21147
2023-08-23 07:37:11 | INFO | train_inner | epoch 019:    480 / 1474 loss=1.967, trans_loss=4.861, nll_loss=2.089, w2v_ctc_loss=0.694, task_loss=1.35, contrastive_loss=0.098, total=4113.89, n_correct=2761.67, ppl=4.25, accuracy=67.13, wps=13531.7, ups=1.64, wpb=8227.8, bsz=301.5, num_updates=27000, lr=8.60663e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=60, gb_free=16.9, wall=21208
2023-08-23 07:38:12 | INFO | train_inner | epoch 019:    580 / 1474 loss=1.963, trans_loss=4.855, nll_loss=2.082, w2v_ctc_loss=0.677, task_loss=1.291, contrastive_loss=0.159, total=4128.58, n_correct=2774.28, ppl=4.23, accuracy=67.197, wps=13605, ups=1.65, wpb=8257.2, bsz=306.2, num_updates=27100, lr=8.59074e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=60, gb_free=16.3, wall=21268
2023-08-23 07:39:13 | INFO | train_inner | epoch 019:    680 / 1474 loss=1.952, trans_loss=4.86, nll_loss=2.089, w2v_ctc_loss=0.666, task_loss=1.199, contrastive_loss=0.089, total=4201.56, n_correct=2823.93, ppl=4.25, accuracy=67.211, wps=13747.8, ups=1.64, wpb=8403.1, bsz=321.5, num_updates=27200, lr=8.57493e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=17.5, wall=21330
2023-08-23 07:40:15 | INFO | train_inner | epoch 019:    780 / 1474 loss=1.962, trans_loss=4.857, nll_loss=2.084, w2v_ctc_loss=0.686, task_loss=1.36, contrastive_loss=0.094, total=4124.03, n_correct=2767, ppl=4.24, accuracy=67.095, wps=13415.3, ups=1.63, wpb=8248.1, bsz=299, num_updates=27300, lr=8.55921e-05, gnorm=0.519, clip=0, loss_scale=32, train_wall=61, gb_free=17.1, wall=21391
2023-08-23 07:41:17 | INFO | train_inner | epoch 019:    880 / 1474 loss=1.964, trans_loss=4.865, nll_loss=2.094, w2v_ctc_loss=0.686, task_loss=1.315, contrastive_loss=0.091, total=4177.8, n_correct=2800.67, ppl=4.27, accuracy=67.037, wps=13451.7, ups=1.61, wpb=8355.6, bsz=309.6, num_updates=27400, lr=8.54358e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=62, gb_free=14.5, wall=21453
2023-08-23 07:42:19 | INFO | train_inner | epoch 019:    980 / 1474 loss=1.985, trans_loss=4.87, nll_loss=2.102, w2v_ctc_loss=0.679, task_loss=1.338, contrastive_loss=0.317, total=4084.26, n_correct=2734.61, ppl=4.29, accuracy=66.955, wps=13164.6, ups=1.61, wpb=8168.5, bsz=305.8, num_updates=27500, lr=8.52803e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=62, gb_free=15.8, wall=21515
2023-08-23 07:43:20 | INFO | train_inner | epoch 019:   1080 / 1474 loss=1.965, trans_loss=4.866, nll_loss=2.096, w2v_ctc_loss=0.675, task_loss=1.383, contrastive_loss=0.128, total=4042.73, n_correct=2708.41, ppl=4.28, accuracy=66.995, wps=13150.1, ups=1.63, wpb=8085.5, bsz=294, num_updates=27600, lr=8.51257e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=17, wall=21577
2023-08-23 07:44:22 | INFO | train_inner | epoch 019:   1180 / 1474 loss=1.982, trans_loss=4.869, nll_loss=2.1, w2v_ctc_loss=0.692, task_loss=1.343, contrastive_loss=0.212, total=4140.95, n_correct=2767.74, ppl=4.29, accuracy=66.838, wps=13392.5, ups=1.62, wpb=8281.9, bsz=307.9, num_updates=27700, lr=8.49719e-05, gnorm=0.531, clip=0, loss_scale=64, train_wall=61, gb_free=12.3, wall=21639
2023-08-23 07:45:23 | INFO | train_inner | epoch 019:   1280 / 1474 loss=1.965, trans_loss=4.866, nll_loss=2.097, w2v_ctc_loss=0.679, task_loss=1.336, contrastive_loss=0.108, total=4135.79, n_correct=2766.96, ppl=4.28, accuracy=66.903, wps=13599.4, ups=1.64, wpb=8271.6, bsz=299.5, num_updates=27800, lr=8.48189e-05, gnorm=0.534, clip=0, loss_scale=64, train_wall=60, gb_free=17.6, wall=21699
2023-08-23 07:45:29 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 07:46:25 | INFO | train_inner | epoch 019:   1381 / 1474 loss=1.964, trans_loss=4.863, nll_loss=2.092, w2v_ctc_loss=0.685, task_loss=1.342, contrastive_loss=0.095, total=4139.76, n_correct=2774.57, ppl=4.26, accuracy=67.022, wps=13311.4, ups=1.61, wpb=8279.5, bsz=301.2, num_updates=27900, lr=8.46668e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=62, gb_free=15.9, wall=21762
2023-08-23 07:47:22 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 07:47:55 | INFO | dev_st | epoch 019 | valid on 'dev_st' subset | loss 3.971 | trans_loss 5.164 | nll_loss 2.425 | w2v_ctc_loss 1.363 | task_loss 4.649 | contrastive_loss 0.298 | total 4003.4 | n_correct 2663.7 | ppl 5.37 | accuracy 66.536 | uer 17.848 | wer 19.82 | raw_wer 19.82 | bleu 22.19 | wps 1645 | wpb 4003.4 | bsz 141.8 | num_updates 27993 | best_bleu 22.19
2023-08-23 07:47:55 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 19 @ 27993 updates
2023-08-23 07:47:55 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 07:48:01 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 07:48:07 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 19 @ 27993 updates, score 22.19) (writing took 12.764961283071898 seconds)
2023-08-23 07:48:08 | INFO | fairseq_cli.train | end of epoch 19 (average epoch stats below)
2023-08-23 07:48:08 | INFO | train | epoch 019 | loss 1.966 | trans_loss 4.86 | nll_loss 2.088 | w2v_ctc_loss 0.682 | task_loss 1.317 | contrastive_loss 0.139 | total 4138.84 | n_correct 2777.25 | ppl 4.25 | accuracy 67.102 | wps 12713.8 | ups 1.54 | wpb 8277.7 | bsz 305.7 | num_updates 27993 | lr 8.4526e-05 | gnorm 0.528 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 17.1 | wall 21864
2023-08-23 07:48:08 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 07:48:08 | INFO | fairseq.trainer | begin training epoch 20
2023-08-23 07:48:08 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 07:48:20 | INFO | train_inner | epoch 020:      7 / 1474 loss=1.963, trans_loss=4.853, nll_loss=2.08, w2v_ctc_loss=0.674, task_loss=1.331, contrastive_loss=0.176, total=4119.08, n_correct=2769.59, ppl=4.23, accuracy=67.238, wps=7194.6, ups=0.87, wpb=8238.2, bsz=304.1, num_updates=28000, lr=8.45154e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=21876
2023-08-23 07:48:20 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 07:48:52 | INFO | dev_st | epoch 020 | valid on 'dev_st' subset | loss 3.958 | trans_loss 5.16 | nll_loss 2.421 | w2v_ctc_loss 1.327 | task_loss 4.667 | contrastive_loss 0.297 | total 4003.4 | n_correct 2665.8 | ppl 5.35 | accuracy 66.588 | uer 17.564 | wer 19.6 | raw_wer 19.6 | bleu 22.1 | wps 1635.4 | wpb 4003.4 | bsz 141.8 | num_updates 28000 | best_bleu 22.19
2023-08-23 07:48:52 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 20 @ 28000 updates
2023-08-23 07:48:52 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_20_28000.pt
2023-08-23 07:48:55 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_20_28000.pt
2023-08-23 07:49:00 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_20_28000.pt (epoch 20 @ 28000 updates, score 22.1) (writing took 7.517138193012215 seconds)
2023-08-23 07:50:02 | INFO | train_inner | epoch 020:    107 / 1474 loss=1.942, trans_loss=4.833, nll_loss=2.053, w2v_ctc_loss=0.661, task_loss=1.272, contrastive_loss=0.1, total=4195.03, n_correct=2838.12, ppl=4.15, accuracy=67.654, wps=8177, ups=0.97, wpb=8390.1, bsz=313.7, num_updates=28100, lr=8.43649e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=14.7, wall=21979
2023-08-23 07:51:04 | INFO | train_inner | epoch 020:    207 / 1474 loss=1.958, trans_loss=4.844, nll_loss=2.067, w2v_ctc_loss=0.674, task_loss=1.365, contrastive_loss=0.152, total=4154.14, n_correct=2798.67, ppl=4.19, accuracy=67.371, wps=13403, ups=1.61, wpb=8308.3, bsz=301, num_updates=28200, lr=8.42152e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=16.9, wall=22041
2023-08-23 07:52:05 | INFO | train_inner | epoch 020:    307 / 1474 loss=1.942, trans_loss=4.837, nll_loss=2.059, w2v_ctc_loss=0.667, task_loss=1.19, contrastive_loss=0.09, total=4188.05, n_correct=2834.19, ppl=4.17, accuracy=67.673, wps=13804.8, ups=1.65, wpb=8376.1, bsz=326.2, num_updates=28300, lr=8.40663e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=60, gb_free=15.3, wall=22101
2023-08-23 07:53:07 | INFO | train_inner | epoch 020:    407 / 1474 loss=1.946, trans_loss=4.837, nll_loss=2.058, w2v_ctc_loss=0.665, task_loss=1.338, contrastive_loss=0.088, total=4115.16, n_correct=2780.21, ppl=4.16, accuracy=67.56, wps=13302.7, ups=1.62, wpb=8230.3, bsz=297, num_updates=28400, lr=8.39181e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=15.2, wall=22163
2023-08-23 07:54:08 | INFO | train_inner | epoch 020:    507 / 1474 loss=1.959, trans_loss=4.849, nll_loss=2.075, w2v_ctc_loss=0.666, task_loss=1.351, contrastive_loss=0.177, total=4108.46, n_correct=2766.83, ppl=4.21, accuracy=67.345, wps=13371.1, ups=1.63, wpb=8216.9, bsz=300.4, num_updates=28500, lr=8.37708e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=16.1, wall=22225
2023-08-23 07:55:09 | INFO | train_inner | epoch 020:    607 / 1474 loss=1.963, trans_loss=4.847, nll_loss=2.071, w2v_ctc_loss=0.672, task_loss=1.386, contrastive_loss=0.178, total=4094.9, n_correct=2760.49, ppl=4.2, accuracy=67.413, wps=13425.4, ups=1.64, wpb=8189.8, bsz=296.1, num_updates=28600, lr=8.36242e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=60, gb_free=11.5, wall=22286
2023-08-23 07:56:10 | INFO | train_inner | epoch 020:    707 / 1474 loss=1.956, trans_loss=4.85, nll_loss=2.076, w2v_ctc_loss=0.681, task_loss=1.319, contrastive_loss=0.083, total=4140.23, n_correct=2784.7, ppl=4.22, accuracy=67.26, wps=13541.8, ups=1.64, wpb=8280.5, bsz=300.6, num_updates=28700, lr=8.34784e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=22347
2023-08-23 07:57:11 | INFO | train_inner | epoch 020:    807 / 1474 loss=1.953, trans_loss=4.85, nll_loss=2.076, w2v_ctc_loss=0.677, task_loss=1.306, contrastive_loss=0.085, total=4140.66, n_correct=2789.77, ppl=4.22, accuracy=67.375, wps=13582.2, ups=1.64, wpb=8281.3, bsz=305.6, num_updates=28800, lr=8.33333e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=60, gb_free=17.2, wall=22408
2023-08-23 07:58:14 | INFO | train_inner | epoch 020:    907 / 1474 loss=1.986, trans_loss=4.858, nll_loss=2.087, w2v_ctc_loss=0.675, task_loss=1.261, contrastive_loss=0.375, total=4157.15, n_correct=2789.31, ppl=4.25, accuracy=67.097, wps=13298.3, ups=1.6, wpb=8314.3, bsz=322.6, num_updates=28900, lr=8.3189e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=62, gb_free=17.4, wall=22470
2023-08-23 07:59:16 | INFO | train_inner | epoch 020:   1007 / 1474 loss=1.948, trans_loss=4.847, nll_loss=2.072, w2v_ctc_loss=0.666, task_loss=1.302, contrastive_loss=0.091, total=4171.86, n_correct=2812.56, ppl=4.2, accuracy=67.417, wps=13438.7, ups=1.61, wpb=8343.7, bsz=308.6, num_updates=29000, lr=8.30455e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=62, gb_free=15.3, wall=22532
2023-08-23 08:00:17 | INFO | train_inner | epoch 020:   1107 / 1474 loss=1.969, trans_loss=4.85, nll_loss=2.076, w2v_ctc_loss=0.673, task_loss=1.272, contrastive_loss=0.229, total=4162.96, n_correct=2800.43, ppl=4.22, accuracy=67.27, wps=13628.6, ups=1.64, wpb=8325.9, bsz=314.9, num_updates=29100, lr=8.29027e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=60, gb_free=16.7, wall=22594
2023-08-23 08:01:19 | INFO | train_inner | epoch 020:   1207 / 1474 loss=1.955, trans_loss=4.84, nll_loss=2.063, w2v_ctc_loss=0.684, task_loss=1.444, contrastive_loss=0.08, total=4033.74, n_correct=2716.72, ppl=4.18, accuracy=67.35, wps=13073.9, ups=1.62, wpb=8067.5, bsz=285.2, num_updates=29200, lr=8.27606e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=61, gb_free=16.9, wall=22655
2023-08-23 08:02:21 | INFO | train_inner | epoch 020:   1307 / 1474 loss=1.954, trans_loss=4.852, nll_loss=2.078, w2v_ctc_loss=0.673, task_loss=1.396, contrastive_loss=0.085, total=4124.42, n_correct=2776.45, ppl=4.22, accuracy=67.317, wps=13306.7, ups=1.61, wpb=8248.8, bsz=297, num_updates=29300, lr=8.26192e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=22717
2023-08-23 08:03:22 | INFO | train_inner | epoch 020:   1407 / 1474 loss=1.958, trans_loss=4.853, nll_loss=2.079, w2v_ctc_loss=0.68, task_loss=1.402, contrastive_loss=0.083, total=4114.1, n_correct=2764.36, ppl=4.23, accuracy=67.192, wps=13392.2, ups=1.63, wpb=8228.2, bsz=293.7, num_updates=29400, lr=8.24786e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=14, wall=22779
2023-08-23 08:04:03 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:04:37 | INFO | dev_st | epoch 020 | valid on 'dev_st' subset | loss 3.948 | trans_loss 5.157 | nll_loss 2.412 | w2v_ctc_loss 1.305 | task_loss 4.656 | contrastive_loss 0.294 | total 4003.4 | n_correct 2669 | ppl 5.32 | accuracy 66.668 | uer 17.522 | wer 19.28 | raw_wer 19.28 | bleu 21.93 | wps 1589.6 | wpb 4003.4 | bsz 141.8 | num_updates 29467 | best_bleu 22.19
2023-08-23 08:04:37 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 20 @ 29467 updates
2023-08-23 08:04:37 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9300.pt
2023-08-23 08:04:40 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9300.pt
2023-08-23 08:04:44 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_21.9300.pt (epoch 20 @ 29467 updates, score 21.93) (writing took 7.642237010993995 seconds)
2023-08-23 08:04:45 | INFO | fairseq_cli.train | end of epoch 20 (average epoch stats below)
2023-08-23 08:04:45 | INFO | train | epoch 020 | loss 1.956 | trans_loss 4.846 | nll_loss 2.071 | w2v_ctc_loss 0.672 | task_loss 1.319 | contrastive_loss 0.136 | total 4138.65 | n_correct 2788.57 | ppl 4.2 | accuracy 67.379 | wps 12239.9 | ups 1.48 | wpb 8277.3 | bsz 305.7 | num_updates 29467 | lr 8.23848e-05 | gnorm 0.528 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 15.9 | wall 22861
2023-08-23 08:04:45 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 08:04:45 | INFO | fairseq.trainer | begin training epoch 21
2023-08-23 08:04:45 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 08:05:13 | INFO | train_inner | epoch 021:     33 / 1474 loss=1.961, trans_loss=4.848, nll_loss=2.073, w2v_ctc_loss=0.668, task_loss=1.246, contrastive_loss=0.204, total=4155.01, n_correct=2799.19, ppl=4.21, accuracy=67.369, wps=7525.7, ups=0.91, wpb=8310, bsz=317.6, num_updates=29500, lr=8.23387e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=22889
2023-08-23 08:06:14 | INFO | train_inner | epoch 021:    133 / 1474 loss=1.949, trans_loss=4.826, nll_loss=2.044, w2v_ctc_loss=0.659, task_loss=1.244, contrastive_loss=0.193, total=4186.67, n_correct=2834.61, ppl=4.12, accuracy=67.706, wps=13652.9, ups=1.63, wpb=8373.3, bsz=317.4, num_updates=29600, lr=8.21995e-05, gnorm=0.52, clip=0, loss_scale=32, train_wall=61, gb_free=12.5, wall=22950
2023-08-23 08:07:15 | INFO | train_inner | epoch 021:    233 / 1474 loss=1.939, trans_loss=4.83, nll_loss=2.049, w2v_ctc_loss=0.652, task_loss=1.244, contrastive_loss=0.146, total=4166.37, n_correct=2823.85, ppl=4.14, accuracy=67.777, wps=13720.7, ups=1.65, wpb=8332.7, bsz=315.2, num_updates=29700, lr=8.2061e-05, gnorm=0.519, clip=0, loss_scale=32, train_wall=60, gb_free=13.7, wall=23011
2023-08-23 08:08:17 | INFO | train_inner | epoch 021:    333 / 1474 loss=1.951, trans_loss=4.834, nll_loss=2.054, w2v_ctc_loss=0.669, task_loss=1.339, contrastive_loss=0.149, total=4132.25, n_correct=2791.21, ppl=4.15, accuracy=67.547, wps=13339.5, ups=1.61, wpb=8264.5, bsz=305, num_updates=29800, lr=8.19232e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=23073
2023-08-23 08:09:18 | INFO | train_inner | epoch 021:    433 / 1474 loss=1.937, trans_loss=4.829, nll_loss=2.048, w2v_ctc_loss=0.656, task_loss=1.255, contrastive_loss=0.082, total=4195.53, n_correct=2845.55, ppl=4.14, accuracy=67.823, wps=13782.4, ups=1.64, wpb=8391.1, bsz=311.6, num_updates=29900, lr=8.17861e-05, gnorm=0.518, clip=0, loss_scale=64, train_wall=60, gb_free=16, wall=23134
2023-08-23 08:10:20 | INFO | train_inner | epoch 021:    533 / 1474 loss=1.938, trans_loss=4.823, nll_loss=2.04, w2v_ctc_loss=0.666, task_loss=1.362, contrastive_loss=0.077, total=4085.05, n_correct=2773.76, ppl=4.11, accuracy=67.9, wps=13166.1, ups=1.61, wpb=8170.1, bsz=296.1, num_updates=30000, lr=8.16497e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=62, gb_free=15.9, wall=23196
2023-08-23 08:10:20 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:10:53 | INFO | dev_st | epoch 021 | valid on 'dev_st' subset | loss 3.948 | trans_loss 5.159 | nll_loss 2.417 | w2v_ctc_loss 1.303 | task_loss 4.662 | contrastive_loss 0.291 | total 4003.4 | n_correct 2669.4 | ppl 5.34 | accuracy 66.678 | uer 17.49 | wer 19.399 | raw_wer 19.399 | bleu 22.01 | wps 1633.3 | wpb 4003.4 | bsz 141.8 | num_updates 30000 | best_bleu 22.19
2023-08-23 08:10:53 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 21 @ 30000 updates
2023-08-23 08:10:53 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_21_30000.pt
2023-08-23 08:10:55 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_21_30000.pt
2023-08-23 08:11:01 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_21_30000.pt (epoch 21 @ 30000 updates, score 22.01) (writing took 8.475676998961717 seconds)
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 08:12:04 | INFO | train_inner | epoch 021:    633 / 1474 loss=1.955, trans_loss=4.831, nll_loss=2.05, w2v_ctc_loss=0.66, task_loss=1.304, contrastive_loss=0.247, total=4220.3, n_correct=2858.93, ppl=4.14, accuracy=67.742, wps=8112.6, ups=0.96, wpb=8440.6, bsz=315.8, num_updates=30100, lr=8.15139e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=15.3, wall=23300
2023-08-23 08:13:05 | INFO | train_inner | epoch 021:    733 / 1474 loss=1.947, trans_loss=4.84, nll_loss=2.063, w2v_ctc_loss=0.662, task_loss=1.321, contrastive_loss=0.11, total=4148.18, n_correct=2803.75, ppl=4.18, accuracy=67.59, wps=13480.9, ups=1.62, wpb=8296.4, bsz=308.3, num_updates=30200, lr=8.13788e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=11.5, wall=23362
2023-08-23 08:14:07 | INFO | train_inner | epoch 021:    833 / 1474 loss=1.954, trans_loss=4.844, nll_loss=2.068, w2v_ctc_loss=0.671, task_loss=1.406, contrastive_loss=0.122, total=4062.56, n_correct=2741.17, ppl=4.19, accuracy=67.474, wps=13218, ups=1.63, wpb=8125.1, bsz=293, num_updates=30300, lr=8.12444e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=15.9, wall=23423
2023-08-23 08:15:07 | INFO | train_inner | epoch 021:    933 / 1474 loss=1.941, trans_loss=4.832, nll_loss=2.052, w2v_ctc_loss=0.662, task_loss=1.314, contrastive_loss=0.094, total=4103.66, n_correct=2779.02, ppl=4.15, accuracy=67.721, wps=13502.4, ups=1.65, wpb=8207.3, bsz=301.5, num_updates=30400, lr=8.11107e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=60, gb_free=16.9, wall=23484
2023-08-23 08:16:09 | INFO | train_inner | epoch 021:   1033 / 1474 loss=1.947, trans_loss=4.843, nll_loss=2.066, w2v_ctc_loss=0.668, task_loss=1.348, contrastive_loss=0.091, total=4100.54, n_correct=2769.2, ppl=4.19, accuracy=67.533, wps=13423.5, ups=1.64, wpb=8201.1, bsz=298.2, num_updates=30500, lr=8.09776e-05, gnorm=0.531, clip=0, loss_scale=64, train_wall=60, gb_free=17.6, wall=23545
2023-08-23 08:17:10 | INFO | train_inner | epoch 021:   1133 / 1474 loss=1.945, trans_loss=4.832, nll_loss=2.051, w2v_ctc_loss=0.667, task_loss=1.417, contrastive_loss=0.095, total=4119.98, n_correct=2789.51, ppl=4.14, accuracy=67.707, wps=13440.6, ups=1.63, wpb=8240, bsz=294, num_updates=30600, lr=8.08452e-05, gnorm=0.52, clip=0, loss_scale=64, train_wall=61, gb_free=17.5, wall=23606
2023-08-23 08:18:11 | INFO | train_inner | epoch 021:   1233 / 1474 loss=1.95, trans_loss=4.838, nll_loss=2.06, w2v_ctc_loss=0.664, task_loss=1.244, contrastive_loss=0.146, total=4161.49, n_correct=2811.27, ppl=4.17, accuracy=67.554, wps=13634.6, ups=1.64, wpb=8323, bsz=313, num_updates=30700, lr=8.07134e-05, gnorm=0.524, clip=0, loss_scale=64, train_wall=60, gb_free=16.5, wall=23667
2023-08-23 08:19:12 | INFO | train_inner | epoch 021:   1333 / 1474 loss=1.945, trans_loss=4.837, nll_loss=2.059, w2v_ctc_loss=0.663, task_loss=1.276, contrastive_loss=0.108, total=4141.76, n_correct=2803.39, ppl=4.17, accuracy=67.686, wps=13485.6, ups=1.63, wpb=8283.5, bsz=311.7, num_updates=30800, lr=8.05823e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=17.1, wall=23729
2023-08-23 08:19:31 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 08:20:15 | INFO | train_inner | epoch 021:   1434 / 1474 loss=1.958, trans_loss=4.844, nll_loss=2.067, w2v_ctc_loss=0.687, task_loss=1.424, contrastive_loss=0.098, total=4116, n_correct=2772.42, ppl=4.19, accuracy=67.357, wps=13236, ups=1.61, wpb=8232, bsz=296.9, num_updates=30900, lr=8.04518e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=62, gb_free=15.2, wall=23791
2023-08-23 08:20:39 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
2023-08-23 08:21:12 | INFO | dev_st | epoch 021 | valid on 'dev_st' subset | loss 3.954 | trans_loss 5.162 | nll_loss 2.421 | w2v_ctc_loss 1.309 | task_loss 4.654 | contrastive_loss 0.301 | total 4003.4 | n_correct 2662.2 | ppl 5.36 | accuracy 66.498 | uer 17.601 | wer 19.544 | raw_wer 19.544 | bleu 22.09 | wps 1652.9 | wpb 4003.4 | bsz 141.8 | num_updates 30940 | best_bleu 22.19
2023-08-23 08:21:12 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 21 @ 30940 updates
2023-08-23 08:21:12 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.0900.pt
2023-08-23 08:21:15 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.0900.pt
2023-08-23 08:21:19 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.0900.pt (epoch 21 @ 30940 updates, score 22.09) (writing took 7.375109995016828 seconds)
2023-08-23 08:21:20 | INFO | fairseq_cli.train | end of epoch 21 (average epoch stats below)
2023-08-23 08:21:20 | INFO | train | epoch 021 | loss 1.947 | trans_loss 4.834 | nll_loss 2.055 | w2v_ctc_loss 0.664 | task_loss 1.322 | contrastive_loss 0.13 | total 4137.4 | n_correct 2799.01 | ppl 4.16 | accuracy 67.652 | wps 12242.2 | ups 1.48 | wpb 8274.8 | bsz 305.2 | num_updates 30940 | lr 8.03998e-05 | gnorm 0.525 | clip 0 | loss_scale 32 | train_wall 897 | gb_free 15.1 | wall 23857
2023-08-23 08:21:21 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 08:21:21 | INFO | fairseq.trainer | begin training epoch 22
2023-08-23 08:21:21 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 08:22:04 | INFO | train_inner | epoch 022:     60 / 1474 loss=1.935, trans_loss=4.82, nll_loss=2.036, w2v_ctc_loss=0.661, task_loss=1.342, contrastive_loss=0.077, total=4128.84, n_correct=2808.31, ppl=4.1, accuracy=68.017, wps=7521.5, ups=0.91, wpb=8257.7, bsz=297.7, num_updates=31000, lr=8.03219e-05, gnorm=0.519, clip=0, loss_scale=32, train_wall=61, gb_free=13.8, wall=23901
2023-08-23 08:23:06 | INFO | train_inner | epoch 022:    160 / 1474 loss=1.942, trans_loss=4.819, nll_loss=2.036, w2v_ctc_loss=0.661, task_loss=1.33, contrastive_loss=0.157, total=4123.35, n_correct=2800.12, ppl=4.1, accuracy=67.909, wps=13362.2, ups=1.62, wpb=8246.7, bsz=310.3, num_updates=31100, lr=8.01927e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=14.3, wall=23963
2023-08-23 08:24:07 | INFO | train_inner | epoch 022:    260 / 1474 loss=1.926, trans_loss=4.812, nll_loss=2.027, w2v_ctc_loss=0.648, task_loss=1.162, contrastive_loss=0.099, total=4267.16, n_correct=2912.65, ppl=4.08, accuracy=68.257, wps=13888.2, ups=1.63, wpb=8534.3, bsz=329.9, num_updates=31200, lr=8.00641e-05, gnorm=0.516, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=24024
2023-08-23 08:25:10 | INFO | train_inner | epoch 022:    360 / 1474 loss=1.957, trans_loss=4.826, nll_loss=2.044, w2v_ctc_loss=0.661, task_loss=1.341, contrastive_loss=0.253, total=4180.09, n_correct=2829.65, ppl=4.12, accuracy=67.694, wps=13332.1, ups=1.59, wpb=8360.2, bsz=310, num_updates=31300, lr=7.99361e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=62, gb_free=17.3, wall=24087
2023-08-23 08:26:12 | INFO | train_inner | epoch 022:    460 / 1474 loss=1.947, trans_loss=4.826, nll_loss=2.043, w2v_ctc_loss=0.662, task_loss=1.39, contrastive_loss=0.142, total=4132.62, n_correct=2804.29, ppl=4.12, accuracy=67.857, wps=13448.8, ups=1.63, wpb=8265.2, bsz=297.2, num_updates=31400, lr=7.98087e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=24148
2023-08-23 08:27:14 | INFO | train_inner | epoch 022:    560 / 1474 loss=1.933, trans_loss=4.818, nll_loss=2.034, w2v_ctc_loss=0.657, task_loss=1.326, contrastive_loss=0.088, total=4155.5, n_correct=2827.57, ppl=4.1, accuracy=68.044, wps=13383.7, ups=1.61, wpb=8311, bsz=307.3, num_updates=31500, lr=7.96819e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=62, gb_free=16, wall=24210
2023-08-23 08:28:15 | INFO | train_inner | epoch 022:    660 / 1474 loss=1.934, trans_loss=4.814, nll_loss=2.029, w2v_ctc_loss=0.645, task_loss=1.245, contrastive_loss=0.169, total=4147.84, n_correct=2825.34, ppl=4.08, accuracy=68.116, wps=13568.4, ups=1.64, wpb=8295.7, bsz=313.1, num_updates=31600, lr=7.95557e-05, gnorm=0.522, clip=0, loss_scale=32, train_wall=61, gb_free=12.7, wall=24271
2023-08-23 08:29:17 | INFO | train_inner | epoch 022:    760 / 1474 loss=1.933, trans_loss=4.816, nll_loss=2.031, w2v_ctc_loss=0.656, task_loss=1.35, contrastive_loss=0.088, total=4166.89, n_correct=2834.08, ppl=4.09, accuracy=68.014, wps=13506.9, ups=1.62, wpb=8333.8, bsz=304.3, num_updates=31700, lr=7.94301e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=15.6, wall=24333
2023-08-23 08:30:19 | INFO | train_inner | epoch 022:    860 / 1474 loss=1.941, trans_loss=4.83, nll_loss=2.05, w2v_ctc_loss=0.664, task_loss=1.435, contrastive_loss=0.076, total=4074.75, n_correct=2756.4, ppl=4.14, accuracy=67.646, wps=13133.5, ups=1.61, wpb=8149.5, bsz=288.4, num_updates=31800, lr=7.93052e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=62, gb_free=17.2, wall=24395
2023-08-23 08:31:20 | INFO | train_inner | epoch 022:    960 / 1474 loss=1.931, trans_loss=4.82, nll_loss=2.036, w2v_ctc_loss=0.653, task_loss=1.325, contrastive_loss=0.077, total=4136.34, n_correct=2810.16, ppl=4.1, accuracy=67.938, wps=13500.8, ups=1.63, wpb=8272.7, bsz=303.7, num_updates=31900, lr=7.91808e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=16.2, wall=24456
2023-08-23 08:32:21 | INFO | train_inner | epoch 022:   1060 / 1474 loss=1.942, trans_loss=4.816, nll_loss=2.032, w2v_ctc_loss=0.647, task_loss=1.257, contrastive_loss=0.244, total=4157.21, n_correct=2827.24, ppl=4.09, accuracy=68.008, wps=13535.8, ups=1.63, wpb=8314.4, bsz=315.4, num_updates=32000, lr=7.90569e-05, gnorm=0.52, clip=0, loss_scale=32, train_wall=61, gb_free=11.7, wall=24518
2023-08-23 08:32:21 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:32:54 | INFO | dev_st | epoch 022 | valid on 'dev_st' subset | loss 3.95 | trans_loss 5.157 | nll_loss 2.417 | w2v_ctc_loss 1.317 | task_loss 4.654 | contrastive_loss 0.292 | total 4003.4 | n_correct 2670 | ppl 5.34 | accuracy 66.693 | uer 17.835 | wer 19.884 | raw_wer 19.884 | bleu 22.46 | wps 1627.3 | wpb 4003.4 | bsz 141.8 | num_updates 32000 | best_bleu 22.46
2023-08-23 08:32:54 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 22 @ 32000 updates
2023-08-23 08:32:54 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_22_32000.pt
2023-08-23 08:32:57 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_22_32000.pt
2023-08-23 08:33:07 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_22_32000.pt (epoch 22 @ 32000 updates, score 22.46) (writing took 12.965930729056709 seconds)
2023-08-23 08:34:09 | INFO | train_inner | epoch 022:   1160 / 1474 loss=1.95, trans_loss=4.839, nll_loss=2.061, w2v_ctc_loss=0.666, task_loss=1.375, contrastive_loss=0.128, total=4092.91, n_correct=2766.27, ppl=4.17, accuracy=67.587, wps=7596.9, ups=0.93, wpb=8185.8, bsz=294.3, num_updates=32100, lr=7.89337e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=15.6, wall=24626
2023-08-23 08:35:11 | INFO | train_inner | epoch 022:   1260 / 1474 loss=1.947, trans_loss=4.839, nll_loss=2.063, w2v_ctc_loss=0.665, task_loss=1.219, contrastive_loss=0.123, total=4182.65, n_correct=2826.74, ppl=4.18, accuracy=67.583, wps=13599.7, ups=1.63, wpb=8365.3, bsz=323.6, num_updates=32200, lr=7.8811e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=24687
2023-08-23 08:36:12 | INFO | train_inner | epoch 022:   1360 / 1474 loss=1.938, trans_loss=4.823, nll_loss=2.041, w2v_ctc_loss=0.653, task_loss=1.31, contrastive_loss=0.143, total=4071.58, n_correct=2763.42, ppl=4.12, accuracy=67.871, wps=13358.2, ups=1.64, wpb=8143.2, bsz=300.6, num_updates=32300, lr=7.86889e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=60, gb_free=16.3, wall=24748
2023-08-23 08:37:13 | INFO | train_inner | epoch 022:   1460 / 1474 loss=1.946, trans_loss=4.835, nll_loss=2.055, w2v_ctc_loss=0.671, task_loss=1.409, contrastive_loss=0.092, total=4077.83, n_correct=2759.9, ppl=4.16, accuracy=67.681, wps=13363.2, ups=1.64, wpb=8155.7, bsz=288, num_updates=32400, lr=7.85674e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=61, gb_free=15.8, wall=24809
2023-08-23 08:37:21 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:37:54 | INFO | dev_st | epoch 022 | valid on 'dev_st' subset | loss 3.946 | trans_loss 5.153 | nll_loss 2.41 | w2v_ctc_loss 1.311 | task_loss 4.616 | contrastive_loss 0.294 | total 4003.4 | n_correct 2672.4 | ppl 5.31 | accuracy 66.753 | uer 17.692 | wer 19.66 | raw_wer 19.66 | bleu 22.31 | wps 1614.8 | wpb 4003.4 | bsz 141.8 | num_updates 32414 | best_bleu 22.46
2023-08-23 08:37:54 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 22 @ 32414 updates
2023-08-23 08:37:54 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.3109.pt
2023-08-23 08:37:57 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.3109.pt
2023-08-23 08:38:01 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.3109.pt (epoch 22 @ 32414 updates, score 22.31) (writing took 7.036329783964902 seconds)
2023-08-23 08:38:02 | INFO | fairseq_cli.train | end of epoch 22 (average epoch stats below)
2023-08-23 08:38:02 | INFO | train | epoch 022 | loss 1.94 | trans_loss 4.823 | nll_loss 2.041 | w2v_ctc_loss 0.658 | task_loss 1.319 | contrastive_loss 0.132 | total 4138.65 | n_correct 2809.43 | ppl 4.12 | accuracy 67.883 | wps 12182.4 | ups 1.47 | wpb 8277.3 | bsz 305.7 | num_updates 32414 | lr 7.85505e-05 | gnorm 0.527 | clip 0 | loss_scale 32 | train_wall 899 | gb_free 11.3 | wall 24858
2023-08-23 08:38:02 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 08:38:02 | INFO | fairseq.trainer | begin training epoch 23
2023-08-23 08:38:02 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 08:39:03 | INFO | train_inner | epoch 023:     86 / 1474 loss=1.931, trans_loss=4.808, nll_loss=2.021, w2v_ctc_loss=0.661, task_loss=1.364, contrastive_loss=0.083, total=4089.8, n_correct=2787.09, ppl=4.06, accuracy=68.147, wps=7437.8, ups=0.91, wpb=8179.6, bsz=299.5, num_updates=32500, lr=7.84465e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=61, gb_free=16.2, wall=24919
2023-08-23 08:40:04 | INFO | train_inner | epoch 023:    186 / 1474 loss=1.924, trans_loss=4.8, nll_loss=2.011, w2v_ctc_loss=0.647, task_loss=1.388, contrastive_loss=0.08, total=4117.76, n_correct=2812.76, ppl=4.03, accuracy=68.308, wps=13341.2, ups=1.62, wpb=8235.5, bsz=296, num_updates=32600, lr=7.8326e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=15.2, wall=24981
2023-08-23 08:41:06 | INFO | train_inner | epoch 023:    286 / 1474 loss=1.935, trans_loss=4.814, nll_loss=2.029, w2v_ctc_loss=0.644, task_loss=1.343, contrastive_loss=0.157, total=4144.73, n_correct=2822.55, ppl=4.08, accuracy=68.1, wps=13388.6, ups=1.62, wpb=8289.5, bsz=304, num_updates=32700, lr=7.82062e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=17.2, wall=25043
2023-08-23 08:42:07 | INFO | train_inner | epoch 023:    386 / 1474 loss=1.921, trans_loss=4.801, nll_loss=2.012, w2v_ctc_loss=0.645, task_loss=1.355, contrastive_loss=0.072, total=4126.79, n_correct=2819.46, ppl=4.03, accuracy=68.321, wps=13484.6, ups=1.63, wpb=8253.6, bsz=296.4, num_updates=32800, lr=7.80869e-05, gnorm=0.517, clip=0, loss_scale=32, train_wall=61, gb_free=16.8, wall=25104
2023-08-23 08:43:09 | INFO | train_inner | epoch 023:    486 / 1474 loss=1.931, trans_loss=4.813, nll_loss=2.027, w2v_ctc_loss=0.647, task_loss=1.288, contrastive_loss=0.13, total=4150.15, n_correct=2827.15, ppl=4.08, accuracy=68.122, wps=13552.4, ups=1.63, wpb=8300.3, bsz=312.1, num_updates=32900, lr=7.79681e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=16, wall=25165
2023-08-23 08:44:10 | INFO | train_inner | epoch 023:    586 / 1474 loss=1.919, trans_loss=4.803, nll_loss=2.014, w2v_ctc_loss=0.643, task_loss=1.244, contrastive_loss=0.078, total=4174.6, n_correct=2853.52, ppl=4.04, accuracy=68.354, wps=13627.2, ups=1.63, wpb=8349.2, bsz=316.3, num_updates=33000, lr=7.78499e-05, gnorm=0.522, clip=0, loss_scale=64, train_wall=61, gb_free=16, wall=25227
2023-08-23 08:45:11 | INFO | train_inner | epoch 023:    686 / 1474 loss=1.933, trans_loss=4.814, nll_loss=2.029, w2v_ctc_loss=0.65, task_loss=1.327, contrastive_loss=0.118, total=4136.6, n_correct=2820, ppl=4.08, accuracy=68.172, wps=13469.5, ups=1.63, wpb=8273.2, bsz=301.2, num_updates=33100, lr=7.77322e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=17.4, wall=25288
2023-08-23 08:46:13 | INFO | train_inner | epoch 023:    786 / 1474 loss=1.932, trans_loss=4.814, nll_loss=2.029, w2v_ctc_loss=0.655, task_loss=1.329, contrastive_loss=0.097, total=4147.22, n_correct=2821.82, ppl=4.08, accuracy=68.041, wps=13524.9, ups=1.63, wpb=8294.4, bsz=305.1, num_updates=33200, lr=7.76151e-05, gnorm=0.521, clip=0, loss_scale=64, train_wall=61, gb_free=17, wall=25349
2023-08-23 08:47:14 | INFO | train_inner | epoch 023:    886 / 1474 loss=1.93, trans_loss=4.808, nll_loss=2.022, w2v_ctc_loss=0.644, task_loss=1.191, contrastive_loss=0.173, total=4193.16, n_correct=2863.58, ppl=4.06, accuracy=68.292, wps=13694, ups=1.63, wpb=8386.3, bsz=327.3, num_updates=33300, lr=7.74984e-05, gnorm=0.522, clip=0, loss_scale=64, train_wall=61, gb_free=15.6, wall=25411
2023-08-23 08:48:16 | INFO | train_inner | epoch 023:    986 / 1474 loss=1.949, trans_loss=4.813, nll_loss=2.028, w2v_ctc_loss=0.644, task_loss=1.315, contrastive_loss=0.328, total=4164.33, n_correct=2833.18, ppl=4.08, accuracy=68.034, wps=13423.8, ups=1.61, wpb=8328.7, bsz=310.1, num_updates=33400, lr=7.73823e-05, gnorm=0.522, clip=0, loss_scale=64, train_wall=61, gb_free=17.4, wall=25473
2023-08-23 08:49:18 | INFO | train_inner | epoch 023:   1086 / 1474 loss=1.938, trans_loss=4.82, nll_loss=2.036, w2v_ctc_loss=0.663, task_loss=1.417, contrastive_loss=0.085, total=4088.37, n_correct=2776.46, ppl=4.1, accuracy=67.911, wps=13219.1, ups=1.62, wpb=8176.7, bsz=289.6, num_updates=33500, lr=7.72667e-05, gnorm=0.532, clip=0, loss_scale=64, train_wall=61, gb_free=15.2, wall=25534
2023-08-23 08:50:21 | INFO | train_inner | epoch 023:   1186 / 1474 loss=1.93, trans_loss=4.819, nll_loss=2.036, w2v_ctc_loss=0.657, task_loss=1.31, contrastive_loss=0.077, total=4162.3, n_correct=2830.89, ppl=4.1, accuracy=68.013, wps=13294.9, ups=1.6, wpb=8324.6, bsz=309, num_updates=33600, lr=7.71517e-05, gnorm=0.529, clip=0, loss_scale=64, train_wall=62, gb_free=15.3, wall=25597
2023-08-23 08:51:21 | INFO | train_inner | epoch 023:   1286 / 1474 loss=1.925, trans_loss=4.813, nll_loss=2.028, w2v_ctc_loss=0.647, task_loss=1.284, contrastive_loss=0.089, total=4131.74, n_correct=2818.41, ppl=4.08, accuracy=68.214, wps=13556.7, ups=1.64, wpb=8263.5, bsz=308.7, num_updates=33700, lr=7.70371e-05, gnorm=0.524, clip=0, loss_scale=64, train_wall=60, gb_free=16.8, wall=25658
2023-08-23 08:52:23 | INFO | train_inner | epoch 023:   1386 / 1474 loss=1.942, trans_loss=4.827, nll_loss=2.045, w2v_ctc_loss=0.655, task_loss=1.333, contrastive_loss=0.144, total=4141.25, n_correct=2809.33, ppl=4.13, accuracy=67.838, wps=13480.3, ups=1.63, wpb=8282.5, bsz=304.7, num_updates=33800, lr=7.69231e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=16.4, wall=25719
2023-08-23 08:52:44 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 08:53:18 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:53:51 | INFO | dev_st | epoch 023 | valid on 'dev_st' subset | loss 3.931 | trans_loss 5.151 | nll_loss 2.407 | w2v_ctc_loss 1.272 | task_loss 4.672 | contrastive_loss 0.287 | total 4003.4 | n_correct 2676.2 | ppl 5.3 | accuracy 66.848 | uer 17.373 | wer 19.298 | raw_wer 19.298 | bleu 22.29 | wps 1566.4 | wpb 4003.4 | bsz 141.8 | num_updates 33887 | best_bleu 22.46
2023-08-23 08:53:51 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 23 @ 33887 updates
2023-08-23 08:53:51 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2902.pt
2023-08-23 08:53:54 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2902.pt
2023-08-23 08:53:59 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2902.pt (epoch 23 @ 33887 updates, score 22.29) (writing took 7.217349193990231 seconds)
2023-08-23 08:53:59 | INFO | fairseq_cli.train | end of epoch 23 (average epoch stats below)
2023-08-23 08:53:59 | INFO | train | epoch 023 | loss 1.932 | trans_loss 4.812 | nll_loss 2.027 | w2v_ctc_loss 0.65 | task_loss 1.322 | contrastive_loss 0.123 | total 4136.71 | n_correct 2818.09 | ppl 4.07 | accuracy 68.124 | wps 12728.5 | ups 1.54 | wpb 8273.4 | bsz 305 | num_updates 33887 | lr 7.68243e-05 | gnorm 0.527 | clip 0 | loss_scale 32 | train_wall 900 | gb_free 13.2 | wall 25816
2023-08-23 08:53:59 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 08:53:59 | INFO | fairseq.trainer | begin training epoch 24
2023-08-23 08:53:59 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 08:54:15 | INFO | train_inner | epoch 024:     13 / 1474 loss=1.934, trans_loss=4.82, nll_loss=2.037, w2v_ctc_loss=0.65, task_loss=1.37, contrastive_loss=0.108, total=4062.78, n_correct=2761.37, ppl=4.1, accuracy=67.968, wps=7239.7, ups=0.89, wpb=8125.6, bsz=295.2, num_updates=33900, lr=7.68095e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=62, gb_free=12.2, wall=25832
2023-08-23 08:55:17 | INFO | train_inner | epoch 024:    113 / 1474 loss=1.928, trans_loss=4.793, nll_loss=2.001, w2v_ctc_loss=0.635, task_loss=1.219, contrastive_loss=0.239, total=4171.44, n_correct=2857.31, ppl=4, accuracy=68.497, wps=13554.2, ups=1.62, wpb=8342.9, bsz=324.6, num_updates=34000, lr=7.66965e-05, gnorm=0.522, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=25893
2023-08-23 08:55:17 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 08:55:50 | INFO | dev_st | epoch 024 | valid on 'dev_st' subset | loss 3.954 | trans_loss 5.157 | nll_loss 2.411 | w2v_ctc_loss 1.33 | task_loss 4.683 | contrastive_loss 0.294 | total 4003.4 | n_correct 2671 | ppl 5.32 | accuracy 66.718 | uer 17.209 | wer 19.138 | raw_wer 19.138 | bleu 22.1 | wps 1637.1 | wpb 4003.4 | bsz 141.8 | num_updates 34000 | best_bleu 22.46
2023-08-23 08:55:50 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 24 @ 34000 updates
2023-08-23 08:55:50 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_24_34000.pt
2023-08-23 08:55:52 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_24_34000.pt
2023-08-23 08:55:57 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_24_34000.pt (epoch 24 @ 34000 updates, score 22.1) (writing took 7.740185391972773 seconds)
2023-08-23 08:57:00 | INFO | train_inner | epoch 024:    213 / 1474 loss=1.933, trans_loss=4.8, nll_loss=2.011, w2v_ctc_loss=0.628, task_loss=1.149, contrastive_loss=0.292, total=4251.29, n_correct=2909.12, ppl=4.03, accuracy=68.429, wps=8250.1, ups=0.97, wpb=8502.6, bsz=340.8, num_updates=34100, lr=7.6584e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=25996
2023-08-23 08:58:01 | INFO | train_inner | epoch 024:    313 / 1474 loss=1.918, trans_loss=4.799, nll_loss=2.009, w2v_ctc_loss=0.643, task_loss=1.291, contrastive_loss=0.074, total=4128.18, n_correct=2821.71, ppl=4.03, accuracy=68.352, wps=13562.6, ups=1.64, wpb=8256.4, bsz=305.5, num_updates=34200, lr=7.64719e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=60, gb_free=15.9, wall=26057
2023-08-23 08:59:02 | INFO | train_inner | epoch 024:    413 / 1474 loss=1.942, trans_loss=4.802, nll_loss=2.013, w2v_ctc_loss=0.65, task_loss=1.383, contrastive_loss=0.217, total=4158.92, n_correct=2838.07, ppl=4.04, accuracy=68.241, wps=13482.7, ups=1.62, wpb=8317.8, bsz=299.7, num_updates=34300, lr=7.63604e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=26119
2023-08-23 09:00:04 | INFO | train_inner | epoch 024:    513 / 1474 loss=1.925, trans_loss=4.797, nll_loss=2.007, w2v_ctc_loss=0.645, task_loss=1.339, contrastive_loss=0.141, total=4144.91, n_correct=2834.24, ppl=4.02, accuracy=68.379, wps=13410.6, ups=1.62, wpb=8289.8, bsz=303.3, num_updates=34400, lr=7.62493e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=16.7, wall=26181
2023-08-23 09:01:05 | INFO | train_inner | epoch 024:    613 / 1474 loss=1.92, trans_loss=4.798, nll_loss=2.009, w2v_ctc_loss=0.636, task_loss=1.322, contrastive_loss=0.106, total=4165.3, n_correct=2848.16, ppl=4.03, accuracy=68.378, wps=13610.4, ups=1.63, wpb=8330.6, bsz=307.7, num_updates=34500, lr=7.61387e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=15.3, wall=26242
2023-08-23 09:02:07 | INFO | train_inner | epoch 024:    713 / 1474 loss=1.927, trans_loss=4.806, nll_loss=2.019, w2v_ctc_loss=0.641, task_loss=1.361, contrastive_loss=0.119, total=4102.21, n_correct=2799.48, ppl=4.05, accuracy=68.243, wps=13298.4, ups=1.62, wpb=8204.4, bsz=295.1, num_updates=34600, lr=7.60286e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=16.6, wall=26304
2023-08-23 09:03:09 | INFO | train_inner | epoch 024:    813 / 1474 loss=1.925, trans_loss=4.81, nll_loss=2.024, w2v_ctc_loss=0.646, task_loss=1.331, contrastive_loss=0.093, total=4110.6, n_correct=2805.96, ppl=4.07, accuracy=68.262, wps=13360.1, ups=1.63, wpb=8221.2, bsz=305.3, num_updates=34700, lr=7.5919e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=61, gb_free=16.2, wall=26365
2023-08-23 09:04:10 | INFO | train_inner | epoch 024:    913 / 1474 loss=1.93, trans_loss=4.808, nll_loss=2.02, w2v_ctc_loss=0.658, task_loss=1.464, contrastive_loss=0.07, total=4043.03, n_correct=2752.41, ppl=4.06, accuracy=68.078, wps=13271.4, ups=1.64, wpb=8086.1, bsz=281, num_updates=34800, lr=7.58098e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=60, gb_free=10.8, wall=26426
2023-08-23 09:05:11 | INFO | train_inner | epoch 024:   1013 / 1474 loss=1.922, trans_loss=4.808, nll_loss=2.02, w2v_ctc_loss=0.643, task_loss=1.359, contrastive_loss=0.075, total=4136.81, n_correct=2828.2, ppl=4.06, accuracy=68.367, wps=13432.6, ups=1.62, wpb=8273.6, bsz=298.4, num_updates=34900, lr=7.57011e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=16.6, wall=26488
2023-08-23 09:06:13 | INFO | train_inner | epoch 024:   1113 / 1474 loss=1.922, trans_loss=4.794, nll_loss=2.003, w2v_ctc_loss=0.647, task_loss=1.269, contrastive_loss=0.117, total=4135.73, n_correct=2832.28, ppl=4.01, accuracy=68.483, wps=13441.9, ups=1.63, wpb=8271.5, bsz=308.9, num_updates=35000, lr=7.55929e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=16.7, wall=26549
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 09:07:15 | INFO | train_inner | epoch 024:   1213 / 1474 loss=1.926, trans_loss=4.807, nll_loss=2.02, w2v_ctc_loss=0.644, task_loss=1.305, contrastive_loss=0.105, total=4148.3, n_correct=2829.37, ppl=4.06, accuracy=68.206, wps=13397.5, ups=1.61, wpb=8296.6, bsz=310.8, num_updates=35100, lr=7.54851e-05, gnorm=0.542, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=26611
2023-08-23 09:08:17 | INFO | train_inner | epoch 024:   1313 / 1474 loss=1.929, trans_loss=4.809, nll_loss=2.022, w2v_ctc_loss=0.656, task_loss=1.406, contrastive_loss=0.078, total=4110.05, n_correct=2803.4, ppl=4.06, accuracy=68.208, wps=13158.2, ups=1.6, wpb=8220.1, bsz=294.3, num_updates=35200, lr=7.53778e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=62, gb_free=16.9, wall=26674
2023-08-23 09:09:18 | INFO | train_inner | epoch 024:   1413 / 1474 loss=1.93, trans_loss=4.81, nll_loss=2.024, w2v_ctc_loss=0.659, task_loss=1.381, contrastive_loss=0.077, total=4090.91, n_correct=2790.03, ppl=4.07, accuracy=68.201, wps=13406.1, ups=1.64, wpb=8181.8, bsz=292.7, num_updates=35300, lr=7.5271e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=60, gb_free=15.7, wall=26735
2023-08-23 09:09:55 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
2023-08-23 09:10:28 | INFO | dev_st | epoch 024 | valid on 'dev_st' subset | loss 3.945 | trans_loss 5.153 | nll_loss 2.41 | w2v_ctc_loss 1.312 | task_loss 4.655 | contrastive_loss 0.286 | total 4003.4 | n_correct 2684 | ppl 5.31 | accuracy 67.043 | uer 17.421 | wer 19.321 | raw_wer 19.321 | bleu 22.84 | wps 1657.5 | wpb 4003.4 | bsz 141.8 | num_updates 35361 | best_bleu 22.84
2023-08-23 09:10:28 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 24 @ 35361 updates
2023-08-23 09:10:28 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 09:10:34 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt
2023-08-23 09:10:40 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_best.pt (epoch 24 @ 35361 updates, score 22.84) (writing took 11.85986351093743 seconds)
2023-08-23 09:10:40 | INFO | fairseq_cli.train | end of epoch 24 (average epoch stats below)
2023-08-23 09:10:40 | INFO | train | epoch 024 | loss 1.926 | trans_loss 4.803 | nll_loss 2.014 | w2v_ctc_loss 0.644 | task_loss 1.318 | contrastive_loss 0.129 | total 4138.65 | n_correct 2827.4 | ppl 4.04 | accuracy 68.317 | wps 12191.6 | ups 1.47 | wpb 8277.3 | bsz 305.7 | num_updates 35361 | lr 7.5206e-05 | gnorm 0.53 | clip 0 | loss_scale 32 | train_wall 898 | gb_free 15.8 | wall 26817
2023-08-23 09:10:40 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 09:10:40 | INFO | fairseq.trainer | begin training epoch 25
2023-08-23 09:10:40 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 09:11:11 | INFO | train_inner | epoch 025:     39 / 1474 loss=1.912, trans_loss=4.795, nll_loss=2.004, w2v_ctc_loss=0.635, task_loss=1.263, contrastive_loss=0.083, total=4166.95, n_correct=2861.07, ppl=4.01, accuracy=68.661, wps=7389.7, ups=0.89, wpb=8333.9, bsz=312, num_updates=35400, lr=7.51646e-05, gnorm=0.519, clip=0, loss_scale=32, train_wall=60, gb_free=16.1, wall=26847
2023-08-23 09:12:12 | INFO | train_inner | epoch 025:    139 / 1474 loss=1.906, trans_loss=4.781, nll_loss=1.986, w2v_ctc_loss=0.63, task_loss=1.292, contrastive_loss=0.081, total=4133.64, n_correct=2846.33, ppl=3.96, accuracy=68.858, wps=13506.5, ups=1.63, wpb=8267.3, bsz=307.7, num_updates=35500, lr=7.50587e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=26909
2023-08-23 09:13:06 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 16.0
2023-08-23 09:13:15 | INFO | train_inner | epoch 025:    240 / 1474 loss=1.913, trans_loss=4.787, nll_loss=1.993, w2v_ctc_loss=0.639, task_loss=1.355, contrastive_loss=0.084, total=4117.21, n_correct=2825.64, ppl=3.98, accuracy=68.63, wps=13191.8, ups=1.6, wpb=8234.4, bsz=302.4, num_updates=35600, lr=7.49532e-05, gnorm=0.529, clip=0, loss_scale=16, train_wall=62, gb_free=16.9, wall=26971
2023-08-23 09:14:17 | INFO | train_inner | epoch 025:    340 / 1474 loss=1.918, trans_loss=4.789, nll_loss=1.995, w2v_ctc_loss=0.636, task_loss=1.408, contrastive_loss=0.114, total=4141.49, n_correct=2837.58, ppl=3.99, accuracy=68.516, wps=13290.6, ups=1.6, wpb=8283, bsz=294.2, num_updates=35700, lr=7.48481e-05, gnorm=0.532, clip=0, loss_scale=16, train_wall=62, gb_free=14.9, wall=27033
2023-08-23 09:15:19 | INFO | train_inner | epoch 025:    440 / 1474 loss=1.934, trans_loss=4.79, nll_loss=1.997, w2v_ctc_loss=0.652, task_loss=1.379, contrastive_loss=0.196, total=4167.4, n_correct=2854.3, ppl=3.99, accuracy=68.491, wps=13518.6, ups=1.62, wpb=8334.8, bsz=297.7, num_updates=35800, lr=7.47435e-05, gnorm=0.531, clip=0, loss_scale=16, train_wall=61, gb_free=15.5, wall=27095
2023-08-23 09:16:20 | INFO | train_inner | epoch 025:    540 / 1474 loss=1.917, trans_loss=4.799, nll_loss=2.01, w2v_ctc_loss=0.638, task_loss=1.287, contrastive_loss=0.086, total=4160.61, n_correct=2847.87, ppl=4.03, accuracy=68.448, wps=13505.8, ups=1.62, wpb=8321.2, bsz=313.9, num_updates=35900, lr=7.46393e-05, gnorm=0.525, clip=0, loss_scale=16, train_wall=61, gb_free=17.3, wall=27157
2023-08-23 09:17:22 | INFO | train_inner | epoch 025:    640 / 1474 loss=1.919, trans_loss=4.786, nll_loss=1.992, w2v_ctc_loss=0.641, task_loss=1.307, contrastive_loss=0.149, total=4153.68, n_correct=2849.59, ppl=3.98, accuracy=68.604, wps=13444.5, ups=1.62, wpb=8307.4, bsz=309.6, num_updates=36000, lr=7.45356e-05, gnorm=0.526, clip=0, loss_scale=16, train_wall=61, gb_free=16.1, wall=27218
2023-08-23 09:17:22 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 09:17:55 | INFO | dev_st | epoch 025 | valid on 'dev_st' subset | loss 3.954 | trans_loss 5.158 | nll_loss 2.413 | w2v_ctc_loss 1.331 | task_loss 4.652 | contrastive_loss 0.287 | total 4003.4 | n_correct 2676.8 | ppl 5.32 | accuracy 66.863 | uer 17.371 | wer 19.28 | raw_wer 19.28 | bleu 22.5 | wps 1613.1 | wpb 4003.4 | bsz 141.8 | num_updates 36000 | best_bleu 22.84
2023-08-23 09:17:55 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 25 @ 36000 updates
2023-08-23 09:17:55 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_25_36000.pt
2023-08-23 09:17:58 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_25_36000.pt
2023-08-23 09:18:03 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_25_36000.pt (epoch 25 @ 36000 updates, score 22.5) (writing took 8.132533363997936 seconds)
2023-08-23 09:19:05 | INFO | train_inner | epoch 025:    740 / 1474 loss=1.922, trans_loss=4.787, nll_loss=1.994, w2v_ctc_loss=0.639, task_loss=1.336, contrastive_loss=0.147, total=4128.34, n_correct=2829.94, ppl=3.98, accuracy=68.549, wps=8006.8, ups=0.97, wpb=8256.7, bsz=301.3, num_updates=36100, lr=7.44323e-05, gnorm=0.538, clip=0, loss_scale=16, train_wall=61, gb_free=16.8, wall=27322
2023-08-23 09:20:07 | INFO | train_inner | epoch 025:    840 / 1474 loss=1.914, trans_loss=4.794, nll_loss=2.004, w2v_ctc_loss=0.638, task_loss=1.213, contrastive_loss=0.093, total=4182.4, n_correct=2869.55, ppl=4.01, accuracy=68.61, wps=13578.3, ups=1.62, wpb=8364.8, bsz=326, num_updates=36200, lr=7.43294e-05, gnorm=0.529, clip=0, loss_scale=16, train_wall=61, gb_free=17.4, wall=27383
2023-08-23 09:21:08 | INFO | train_inner | epoch 025:    940 / 1474 loss=1.921, trans_loss=4.794, nll_loss=2.004, w2v_ctc_loss=0.639, task_loss=1.249, contrastive_loss=0.151, total=4155.21, n_correct=2849.89, ppl=4.01, accuracy=68.586, wps=13518.8, ups=1.63, wpb=8310.4, bsz=317, num_updates=36300, lr=7.4227e-05, gnorm=0.527, clip=0, loss_scale=16, train_wall=61, gb_free=13.7, wall=27445
2023-08-23 09:22:10 | INFO | train_inner | epoch 025:   1040 / 1474 loss=1.935, trans_loss=4.804, nll_loss=2.016, w2v_ctc_loss=0.634, task_loss=1.312, contrastive_loss=0.261, total=4177.7, n_correct=2852.25, ppl=4.04, accuracy=68.273, wps=13543.9, ups=1.62, wpb=8355.4, bsz=309.8, num_updates=36400, lr=7.41249e-05, gnorm=0.526, clip=0, loss_scale=16, train_wall=61, gb_free=15.3, wall=27506
2023-08-23 09:23:11 | INFO | train_inner | epoch 025:   1140 / 1474 loss=1.914, trans_loss=4.793, nll_loss=2.002, w2v_ctc_loss=0.635, task_loss=1.424, contrastive_loss=0.069, total=4039.24, n_correct=2768.9, ppl=4.01, accuracy=68.55, wps=13201.5, ups=1.63, wpb=8078.5, bsz=285.2, num_updates=36500, lr=7.40233e-05, gnorm=0.528, clip=0, loss_scale=16, train_wall=60, gb_free=16, wall=27568
2023-08-23 09:24:12 | INFO | train_inner | epoch 025:   1240 / 1474 loss=1.917, trans_loss=4.799, nll_loss=2.01, w2v_ctc_loss=0.638, task_loss=1.334, contrastive_loss=0.077, total=4090.59, n_correct=2800.55, ppl=4.03, accuracy=68.463, wps=13446.3, ups=1.64, wpb=8181.2, bsz=295.7, num_updates=36600, lr=7.39221e-05, gnorm=0.523, clip=0, loss_scale=16, train_wall=60, gb_free=16.9, wall=27628
2023-08-23 09:25:14 | INFO | train_inner | epoch 025:   1340 / 1474 loss=1.922, trans_loss=4.793, nll_loss=2.002, w2v_ctc_loss=0.637, task_loss=1.284, contrastive_loss=0.172, total=4164.34, n_correct=2855.05, ppl=4, accuracy=68.559, wps=13398.5, ups=1.61, wpb=8328.7, bsz=310.1, num_updates=36700, lr=7.38213e-05, gnorm=0.529, clip=0, loss_scale=16, train_wall=62, gb_free=16.5, wall=27691
2023-08-23 09:26:16 | INFO | train_inner | epoch 025:   1440 / 1474 loss=1.931, trans_loss=4.811, nll_loss=2.025, w2v_ctc_loss=0.647, task_loss=1.372, contrastive_loss=0.121, total=4099.11, n_correct=2790.41, ppl=4.07, accuracy=68.074, wps=13198, ups=1.61, wpb=8198.2, bsz=299.3, num_updates=36800, lr=7.3721e-05, gnorm=0.532, clip=0, loss_scale=16, train_wall=62, gb_free=11.8, wall=27753
2023-08-23 09:26:37 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 09:27:11 | INFO | dev_st | epoch 025 | valid on 'dev_st' subset | loss 3.948 | trans_loss 5.15 | nll_loss 2.405 | w2v_ctc_loss 1.329 | task_loss 4.665 | contrastive_loss 0.29 | total 4003.4 | n_correct 2674 | ppl 5.3 | accuracy 66.793 | uer 17.368 | wer 19.444 | raw_wer 19.444 | bleu 22.43 | wps 1600 | wpb 4003.4 | bsz 141.8 | num_updates 36834 | best_bleu 22.84
2023-08-23 09:27:11 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 25 @ 36834 updates
2023-08-23 09:27:11 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4309.pt
2023-08-23 09:27:13 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4309.pt
2023-08-23 09:27:18 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4309.pt (epoch 25 @ 36834 updates, score 22.43) (writing took 7.146354853059165 seconds)
2023-08-23 09:27:18 | INFO | fairseq_cli.train | end of epoch 25 (average epoch stats below)
2023-08-23 09:27:18 | INFO | train | epoch 025 | loss 1.92 | trans_loss 4.794 | nll_loss 2.002 | w2v_ctc_loss 0.639 | task_loss 1.318 | contrastive_loss 0.127 | total 4138.64 | n_correct 2835.82 | ppl 4.01 | accuracy 68.52 | wps 12217.2 | ups 1.48 | wpb 8277.3 | bsz 305.6 | num_updates 36834 | lr 7.36869e-05 | gnorm 0.528 | clip 0 | loss_scale 16 | train_wall 900 | gb_free 13.9 | wall 27815
2023-08-23 09:27:18 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 09:27:18 | INFO | fairseq.trainer | begin training epoch 26
2023-08-23 09:27:18 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 09:28:06 | INFO | train_inner | epoch 026:     66 / 1474 loss=1.906, trans_loss=4.779, nll_loss=1.984, w2v_ctc_loss=0.626, task_loss=1.236, contrastive_loss=0.107, total=4180.21, n_correct=2876.82, ppl=3.95, accuracy=68.82, wps=7625.1, ups=0.91, wpb=8360.4, bsz=318.3, num_updates=36900, lr=7.3621e-05, gnorm=0.53, clip=0, loss_scale=16, train_wall=61, gb_free=16.7, wall=27862
2023-08-23 09:29:07 | INFO | train_inner | epoch 026:    166 / 1474 loss=1.919, trans_loss=4.78, nll_loss=1.986, w2v_ctc_loss=0.616, task_loss=1.156, contrastive_loss=0.288, total=4270.78, n_correct=2943.49, ppl=3.96, accuracy=68.922, wps=13857.1, ups=1.62, wpb=8541.6, bsz=340.4, num_updates=37000, lr=7.35215e-05, gnorm=0.519, clip=0, loss_scale=16, train_wall=61, gb_free=14.9, wall=27924
2023-08-23 09:30:09 | INFO | train_inner | epoch 026:    266 / 1474 loss=1.918, trans_loss=4.778, nll_loss=1.982, w2v_ctc_loss=0.638, task_loss=1.307, contrastive_loss=0.165, total=4125.04, n_correct=2836.87, ppl=3.95, accuracy=68.772, wps=13418.5, ups=1.63, wpb=8250.1, bsz=307.1, num_updates=37100, lr=7.34223e-05, gnorm=0.529, clip=0, loss_scale=16, train_wall=61, gb_free=14.8, wall=27986
2023-08-23 09:31:11 | INFO | train_inner | epoch 026:    366 / 1474 loss=1.912, trans_loss=4.781, nll_loss=1.987, w2v_ctc_loss=0.632, task_loss=1.263, contrastive_loss=0.124, total=4165.74, n_correct=2865.21, ppl=3.96, accuracy=68.78, wps=13485.9, ups=1.62, wpb=8331.5, bsz=314.7, num_updates=37200, lr=7.33236e-05, gnorm=0.53, clip=0, loss_scale=16, train_wall=61, gb_free=16.5, wall=28047
2023-08-23 09:32:12 | INFO | train_inner | epoch 026:    466 / 1474 loss=1.912, trans_loss=4.771, nll_loss=1.973, w2v_ctc_loss=0.632, task_loss=1.257, contrastive_loss=0.168, total=4170.23, n_correct=2874.57, ppl=3.93, accuracy=68.931, wps=13607.1, ups=1.63, wpb=8340.5, bsz=315.4, num_updates=37300, lr=7.32252e-05, gnorm=0.526, clip=0, loss_scale=16, train_wall=61, gb_free=17.5, wall=28109
2023-08-23 09:33:13 | INFO | train_inner | epoch 026:    566 / 1474 loss=1.915, trans_loss=4.785, nll_loss=1.991, w2v_ctc_loss=0.644, task_loss=1.329, contrastive_loss=0.091, total=4155.02, n_correct=2851.98, ppl=3.97, accuracy=68.639, wps=13551.3, ups=1.63, wpb=8310, bsz=303.9, num_updates=37400, lr=7.31272e-05, gnorm=0.535, clip=0, loss_scale=16, train_wall=61, gb_free=17.5, wall=28170
2023-08-23 09:34:15 | INFO | train_inner | epoch 026:    666 / 1474 loss=1.906, trans_loss=4.781, nll_loss=1.985, w2v_ctc_loss=0.626, task_loss=1.345, contrastive_loss=0.076, total=4136.96, n_correct=2845.03, ppl=3.96, accuracy=68.771, wps=13508, ups=1.63, wpb=8273.9, bsz=299.2, num_updates=37500, lr=7.30297e-05, gnorm=0.53, clip=0, loss_scale=16, train_wall=61, gb_free=15, wall=28231
2023-08-23 09:35:16 | INFO | train_inner | epoch 026:    766 / 1474 loss=1.922, trans_loss=4.785, nll_loss=1.991, w2v_ctc_loss=0.632, task_loss=1.341, contrastive_loss=0.192, total=4086.28, n_correct=2804.72, ppl=3.97, accuracy=68.637, wps=13324.4, ups=1.63, wpb=8172.6, bsz=298.5, num_updates=37600, lr=7.29325e-05, gnorm=0.537, clip=0, loss_scale=16, train_wall=61, gb_free=14.7, wall=28293
2023-08-23 09:36:17 | INFO | train_inner | epoch 026:    866 / 1474 loss=1.914, trans_loss=4.784, nll_loss=1.99, w2v_ctc_loss=0.64, task_loss=1.306, contrastive_loss=0.091, total=4183.26, n_correct=2874.28, ppl=3.97, accuracy=68.709, wps=13686.9, ups=1.64, wpb=8366.5, bsz=308.1, num_updates=37700, lr=7.28357e-05, gnorm=0.545, clip=0, loss_scale=32, train_wall=60, gb_free=17, wall=28354
2023-08-23 09:37:19 | INFO | train_inner | epoch 026:    966 / 1474 loss=1.915, trans_loss=4.789, nll_loss=1.996, w2v_ctc_loss=0.624, task_loss=1.365, contrastive_loss=0.142, total=4137.96, n_correct=2837.49, ppl=3.99, accuracy=68.572, wps=13373.7, ups=1.62, wpb=8275.9, bsz=299, num_updates=37800, lr=7.27393e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=16.6, wall=28416
2023-08-23 09:38:21 | INFO | train_inner | epoch 026:   1066 / 1474 loss=1.91, trans_loss=4.784, nll_loss=1.99, w2v_ctc_loss=0.635, task_loss=1.383, contrastive_loss=0.074, total=4120.53, n_correct=2834.29, ppl=3.97, accuracy=68.785, wps=13373.2, ups=1.62, wpb=8241.1, bsz=294.3, num_updates=37900, lr=7.26433e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=28477
2023-08-23 09:39:23 | INFO | train_inner | epoch 026:   1166 / 1474 loss=1.916, trans_loss=4.791, nll_loss=1.999, w2v_ctc_loss=0.633, task_loss=1.38, contrastive_loss=0.115, total=4113.86, n_correct=2820.75, ppl=4, accuracy=68.567, wps=13293.8, ups=1.62, wpb=8227.7, bsz=298.5, num_updates=38000, lr=7.25476e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.2, wall=28539
2023-08-23 09:39:23 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 09:39:57 | INFO | dev_st | epoch 026 | valid on 'dev_st' subset | loss 3.96 | trans_loss 5.156 | nll_loss 2.413 | w2v_ctc_loss 1.354 | task_loss 4.683 | contrastive_loss 0.287 | total 4003.4 | n_correct 2674.3 | ppl 5.32 | accuracy 66.801 | uer 17.623 | wer 19.552 | raw_wer 19.552 | bleu 21.73 | wps 1551.8 | wpb 4003.4 | bsz 141.8 | num_updates 38000 | best_bleu 22.84
2023-08-23 09:39:57 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 26 @ 38000 updates
2023-08-23 09:39:57 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_26_38000.pt
2023-08-23 09:39:59 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_26_38000.pt
2023-08-23 09:40:04 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_26_38000.pt (epoch 26 @ 38000 updates, score 21.73) (writing took 7.054617670015432 seconds)
2023-08-23 09:41:05 | INFO | train_inner | epoch 026:   1266 / 1474 loss=1.924, trans_loss=4.8, nll_loss=2.01, w2v_ctc_loss=0.653, task_loss=1.474, contrastive_loss=0.077, total=3996.19, n_correct=2732.44, ppl=4.03, accuracy=68.376, wps=7797, ups=0.98, wpb=7992.4, bsz=279.3, num_updates=38100, lr=7.24524e-05, gnorm=0.538, clip=0, loss_scale=32, train_wall=61, gb_free=17.5, wall=28642
2023-08-23 09:42:07 | INFO | train_inner | epoch 026:   1366 / 1474 loss=1.908, trans_loss=4.79, nll_loss=1.998, w2v_ctc_loss=0.626, task_loss=1.312, contrastive_loss=0.088, total=4159.74, n_correct=2858.85, ppl=3.99, accuracy=68.727, wps=13322.1, ups=1.6, wpb=8319.5, bsz=311.4, num_updates=38200, lr=7.23575e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=62, gb_free=16.9, wall=28704
2023-08-23 09:43:09 | INFO | train_inner | epoch 026:   1466 / 1474 loss=1.906, trans_loss=4.786, nll_loss=1.993, w2v_ctc_loss=0.626, task_loss=1.249, contrastive_loss=0.084, total=4165.66, n_correct=2865.23, ppl=3.98, accuracy=68.782, wps=13527.6, ups=1.62, wpb=8331.3, bsz=317.5, num_updates=38300, lr=7.22629e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=28766
2023-08-23 09:43:14 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 09:43:47 | INFO | dev_st | epoch 026 | valid on 'dev_st' subset | loss 3.954 | trans_loss 5.153 | nll_loss 2.409 | w2v_ctc_loss 1.343 | task_loss 4.664 | contrastive_loss 0.287 | total 4003.4 | n_correct 2675.8 | ppl 5.31 | accuracy 66.838 | uer 17.604 | wer 19.485 | raw_wer 19.485 | bleu 22.19 | wps 1596.6 | wpb 4003.4 | bsz 141.8 | num_updates 38308 | best_bleu 22.84
2023-08-23 09:43:47 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 26 @ 38308 updates
2023-08-23 09:43:47 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1905.pt
2023-08-23 09:43:50 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1905.pt
2023-08-23 09:43:54 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1905.pt (epoch 26 @ 38308 updates, score 22.19) (writing took 6.880853686016053 seconds)
2023-08-23 09:43:54 | INFO | fairseq_cli.train | end of epoch 26 (average epoch stats below)
2023-08-23 09:43:54 | INFO | train | epoch 026 | loss 1.913 | trans_loss 4.784 | nll_loss 1.989 | w2v_ctc_loss 0.632 | task_loss 1.318 | contrastive_loss 0.126 | total 4138.65 | n_correct 2844.47 | ppl 3.97 | accuracy 68.729 | wps 12243.2 | ups 1.48 | wpb 8277.3 | bsz 305.7 | num_updates 38308 | lr 7.22554e-05 | gnorm 0.531 | clip 0 | loss_scale 32 | train_wall 899 | gb_free 15.7 | wall 28811
2023-08-23 09:43:55 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 09:43:55 | INFO | fairseq.trainer | begin training epoch 27
2023-08-23 09:43:55 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 09:44:58 | INFO | train_inner | epoch 027:     92 / 1474 loss=1.891, trans_loss=4.752, nll_loss=1.948, w2v_ctc_loss=0.614, task_loss=1.424, contrastive_loss=0.064, total=4054.57, n_correct=2813.38, ppl=3.86, accuracy=69.388, wps=7450.4, ups=0.92, wpb=8109.1, bsz=282.4, num_updates=38400, lr=7.21688e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=60, gb_free=16, wall=28874
2023-08-23 09:45:59 | INFO | train_inner | epoch 027:    192 / 1474 loss=1.895, trans_loss=4.764, nll_loss=1.964, w2v_ctc_loss=0.62, task_loss=1.255, contrastive_loss=0.091, total=4195.2, n_correct=2901.79, ppl=3.9, accuracy=69.169, wps=13704.7, ups=1.63, wpb=8390.4, bsz=323.2, num_updates=38500, lr=7.2075e-05, gnorm=0.523, clip=0, loss_scale=32, train_wall=61, gb_free=16.8, wall=28936
2023-08-23 09:47:01 | INFO | train_inner | epoch 027:    292 / 1474 loss=1.9, trans_loss=4.77, nll_loss=1.971, w2v_ctc_loss=0.625, task_loss=1.326, contrastive_loss=0.075, total=4162.23, n_correct=2877.91, ppl=3.92, accuracy=69.143, wps=13479.8, ups=1.62, wpb=8324.5, bsz=305.5, num_updates=38600, lr=7.19816e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=16.8, wall=28997
2023-08-23 09:48:03 | INFO | train_inner | epoch 027:    392 / 1474 loss=1.924, trans_loss=4.778, nll_loss=1.982, w2v_ctc_loss=0.628, task_loss=1.385, contrastive_loss=0.256, total=4079.05, n_correct=2806.58, ppl=3.95, accuracy=68.805, wps=13079.3, ups=1.6, wpb=8158.1, bsz=297.1, num_updates=38700, lr=7.18885e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=62, gb_free=16.5, wall=29060
2023-08-23 09:49:06 | INFO | train_inner | epoch 027:    492 / 1474 loss=1.916, trans_loss=4.782, nll_loss=1.988, w2v_ctc_loss=0.626, task_loss=1.206, contrastive_loss=0.194, total=4243.25, n_correct=2920.14, ppl=3.97, accuracy=68.818, wps=13618.4, ups=1.6, wpb=8486.5, bsz=331, num_updates=38800, lr=7.17958e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=62, gb_free=15.4, wall=29122
2023-08-23 09:50:06 | INFO | train_inner | epoch 027:    592 / 1474 loss=1.908, trans_loss=4.771, nll_loss=1.973, w2v_ctc_loss=0.63, task_loss=1.285, contrastive_loss=0.133, total=4137.92, n_correct=2854.07, ppl=3.92, accuracy=68.974, wps=13619.1, ups=1.65, wpb=8275.8, bsz=313.5, num_updates=38900, lr=7.17035e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=60, gb_free=15.6, wall=29183
2023-08-23 09:51:08 | INFO | train_inner | epoch 027:    692 / 1474 loss=1.909, trans_loss=4.778, nll_loss=1.982, w2v_ctc_loss=0.629, task_loss=1.322, contrastive_loss=0.113, total=4158.48, n_correct=2861.24, ppl=3.95, accuracy=68.805, wps=13411.2, ups=1.61, wpb=8317, bsz=304.1, num_updates=39000, lr=7.16115e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=15.3, wall=29245
2023-08-23 09:52:10 | INFO | train_inner | epoch 027:    792 / 1474 loss=1.908, trans_loss=4.776, nll_loss=1.979, w2v_ctc_loss=0.635, task_loss=1.396, contrastive_loss=0.075, total=4100.88, n_correct=2823.75, ppl=3.94, accuracy=68.857, wps=13416.9, ups=1.64, wpb=8201.8, bsz=292.2, num_updates=39100, lr=7.15199e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=15.4, wall=29306
2023-08-23 09:53:11 | INFO | train_inner | epoch 027:    892 / 1474 loss=1.901, trans_loss=4.779, nll_loss=1.983, w2v_ctc_loss=0.621, task_loss=1.359, contrastive_loss=0.068, total=4111.94, n_correct=2838.21, ppl=3.95, accuracy=69.024, wps=13434.4, ups=1.63, wpb=8223.9, bsz=294.9, num_updates=39200, lr=7.14286e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=61, gb_free=15.8, wall=29367
2023-08-23 09:54:13 | INFO | train_inner | epoch 027:    992 / 1474 loss=1.92, trans_loss=4.779, nll_loss=1.984, w2v_ctc_loss=0.627, task_loss=1.281, contrastive_loss=0.253, total=4189.27, n_correct=2883.34, ppl=3.95, accuracy=68.827, wps=13404.6, ups=1.6, wpb=8378.5, bsz=314.9, num_updates=39300, lr=7.13376e-05, gnorm=0.519, clip=0, loss_scale=32, train_wall=62, gb_free=14, wall=29430
2023-08-23 09:55:15 | INFO | train_inner | epoch 027:   1092 / 1474 loss=1.9, trans_loss=4.774, nll_loss=1.977, w2v_ctc_loss=0.62, task_loss=1.312, contrastive_loss=0.086, total=4160.42, n_correct=2869.33, ppl=3.94, accuracy=68.967, wps=13512.6, ups=1.62, wpb=8320.8, bsz=307.3, num_updates=39400, lr=7.1247e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=16.7, wall=29491
2023-08-23 09:56:17 | INFO | train_inner | epoch 027:   1192 / 1474 loss=1.91, trans_loss=4.78, nll_loss=1.984, w2v_ctc_loss=0.637, task_loss=1.387, contrastive_loss=0.089, total=4103.72, n_correct=2821.07, ppl=3.96, accuracy=68.744, wps=13277, ups=1.62, wpb=8207.4, bsz=297.1, num_updates=39500, lr=7.11568e-05, gnorm=0.538, clip=0, loss_scale=32, train_wall=61, gb_free=17.4, wall=29553
2023-08-23 09:57:18 | INFO | train_inner | epoch 027:   1292 / 1474 loss=1.914, trans_loss=4.782, nll_loss=1.986, w2v_ctc_loss=0.629, task_loss=1.41, contrastive_loss=0.141, total=4065.94, n_correct=2794.02, ppl=3.96, accuracy=68.718, wps=13279.6, ups=1.63, wpb=8131.9, bsz=292.4, num_updates=39600, lr=7.10669e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=61, gb_free=15.7, wall=29614
2023-08-23 09:58:19 | INFO | train_inner | epoch 027:   1392 / 1474 loss=1.905, trans_loss=4.778, nll_loss=1.983, w2v_ctc_loss=0.62, task_loss=1.247, contrastive_loss=0.123, total=4149.21, n_correct=2858.93, ppl=3.95, accuracy=68.903, wps=13604.9, ups=1.64, wpb=8298.4, bsz=312.6, num_updates=39700, lr=7.09773e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=60, gb_free=16.6, wall=29675
2023-08-23 09:59:09 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 09:59:42 | INFO | dev_st | epoch 027 | valid on 'dev_st' subset | loss 3.949 | trans_loss 5.153 | nll_loss 2.41 | w2v_ctc_loss 1.331 | task_loss 4.662 | contrastive_loss 0.281 | total 4003.4 | n_correct 2676.3 | ppl 5.31 | accuracy 66.851 | uer 17.317 | wer 19.406 | raw_wer 19.406 | bleu 22.18 | wps 1642.6 | wpb 4003.4 | bsz 141.8 | num_updates 39782 | best_bleu 22.84
2023-08-23 09:59:42 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 27 @ 39782 updates
2023-08-23 09:59:42 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1806.pt
2023-08-23 09:59:45 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1806.pt
2023-08-23 09:59:49 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.1806.pt (epoch 27 @ 39782 updates, score 22.18) (writing took 6.962854278972372 seconds)
2023-08-23 09:59:50 | INFO | fairseq_cli.train | end of epoch 27 (average epoch stats below)
2023-08-23 09:59:50 | INFO | train | epoch 027 | loss 1.907 | trans_loss 4.774 | nll_loss 1.977 | w2v_ctc_loss 0.625 | task_loss 1.319 | contrastive_loss 0.124 | total 4138.65 | n_correct 2853.4 | ppl 3.94 | accuracy 68.945 | wps 12773.1 | ups 1.54 | wpb 8277.3 | bsz 305.7 | num_updates 39782 | lr 7.09042e-05 | gnorm 0.529 | clip 0 | loss_scale 64 | train_wall 899 | gb_free 17.5 | wall 29766
2023-08-23 09:59:50 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 09:59:50 | INFO | fairseq.trainer | begin training epoch 28
2023-08-23 09:59:50 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 10:00:08 | INFO | train_inner | epoch 028:     18 / 1474 loss=1.897, trans_loss=4.771, nll_loss=1.973, w2v_ctc_loss=0.62, task_loss=1.277, contrastive_loss=0.076, total=4106.72, n_correct=2836.5, ppl=3.93, accuracy=69.07, wps=7496.2, ups=0.91, wpb=8213.4, bsz=305, num_updates=39800, lr=7.08881e-05, gnorm=0.538, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=29785
2023-08-23 10:01:10 | INFO | train_inner | epoch 028:    118 / 1474 loss=1.891, trans_loss=4.749, nll_loss=1.944, w2v_ctc_loss=0.619, task_loss=1.391, contrastive_loss=0.071, total=4103.42, n_correct=2851.84, ppl=3.85, accuracy=69.499, wps=13373.1, ups=1.63, wpb=8206.8, bsz=292, num_updates=39900, lr=7.07992e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=29846
2023-08-23 10:02:11 | INFO | train_inner | epoch 028:    218 / 1474 loss=1.888, trans_loss=4.758, nll_loss=1.956, w2v_ctc_loss=0.612, task_loss=1.236, contrastive_loss=0.079, total=4200.12, n_correct=2912.86, ppl=3.88, accuracy=69.352, wps=13702.7, ups=1.63, wpb=8400.2, bsz=317.8, num_updates=40000, lr=7.07107e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=10.6, wall=29908
2023-08-23 10:02:11 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 10:02:45 | INFO | dev_st | epoch 028 | valid on 'dev_st' subset | loss 3.962 | trans_loss 5.155 | nll_loss 2.411 | w2v_ctc_loss 1.366 | task_loss 4.665 | contrastive_loss 0.285 | total 4003.4 | n_correct 2676.8 | ppl 5.32 | accuracy 66.863 | uer 17.583 | wer 19.462 | raw_wer 19.462 | bleu 22.37 | wps 1569 | wpb 4003.4 | bsz 141.8 | num_updates 40000 | best_bleu 22.84
2023-08-23 10:02:45 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 28 @ 40000 updates
2023-08-23 10:02:45 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_28_40000.pt
2023-08-23 10:02:47 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_28_40000.pt
2023-08-23 10:02:52 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_28_40000.pt (epoch 28 @ 40000 updates, score 22.37) (writing took 7.080187103012577 seconds)
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 10:03:54 | INFO | train_inner | epoch 028:    318 / 1474 loss=1.929, trans_loss=4.772, nll_loss=1.974, w2v_ctc_loss=0.613, task_loss=1.315, contrastive_loss=0.408, total=4147.36, n_correct=2855.37, ppl=3.93, accuracy=68.848, wps=8045.9, ups=0.97, wpb=8294.7, bsz=315.4, num_updates=40100, lr=7.06225e-05, gnorm=0.533, clip=0, loss_scale=64, train_wall=61, gb_free=16.3, wall=30011
2023-08-23 10:04:55 | INFO | train_inner | epoch 028:    418 / 1474 loss=1.897, trans_loss=4.76, nll_loss=1.958, w2v_ctc_loss=0.627, task_loss=1.361, contrastive_loss=0.066, total=4087.34, n_correct=2831.45, ppl=3.88, accuracy=69.274, wps=13415.9, ups=1.64, wpb=8174.7, bsz=295.1, num_updates=40200, lr=7.05346e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=60, gb_free=16.5, wall=30072
2023-08-23 10:05:57 | INFO | train_inner | epoch 028:    518 / 1474 loss=1.896, trans_loss=4.763, nll_loss=1.962, w2v_ctc_loss=0.617, task_loss=1.37, contrastive_loss=0.079, total=4099.71, n_correct=2833.77, ppl=3.9, accuracy=69.121, wps=13321.2, ups=1.62, wpb=8199.4, bsz=296.2, num_updates=40300, lr=7.0447e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=14.9, wall=30133
2023-08-23 10:06:58 | INFO | train_inner | epoch 028:    618 / 1474 loss=1.901, trans_loss=4.773, nll_loss=1.974, w2v_ctc_loss=0.624, task_loss=1.337, contrastive_loss=0.079, total=4177.06, n_correct=2881.37, ppl=3.93, accuracy=68.981, wps=13584.5, ups=1.63, wpb=8354.1, bsz=304.1, num_updates=40400, lr=7.03598e-05, gnorm=0.533, clip=0, loss_scale=64, train_wall=61, gb_free=17, wall=30195
2023-08-23 10:08:00 | INFO | train_inner | epoch 028:    718 / 1474 loss=1.906, trans_loss=4.773, nll_loss=1.977, w2v_ctc_loss=0.616, task_loss=1.188, contrastive_loss=0.186, total=4190.74, n_correct=2895.87, ppl=3.94, accuracy=69.102, wps=13631.2, ups=1.63, wpb=8381.5, bsz=328.5, num_updates=40500, lr=7.02728e-05, gnorm=0.524, clip=0, loss_scale=64, train_wall=61, gb_free=15, wall=30256
2023-08-23 10:09:01 | INFO | train_inner | epoch 028:    818 / 1474 loss=1.893, trans_loss=4.767, nll_loss=1.968, w2v_ctc_loss=0.618, task_loss=1.306, contrastive_loss=0.071, total=4091.75, n_correct=2830.86, ppl=3.91, accuracy=69.185, wps=13445.9, ups=1.64, wpb=8183.5, bsz=306, num_updates=40600, lr=7.01862e-05, gnorm=0.535, clip=0, loss_scale=64, train_wall=60, gb_free=16.1, wall=30317
2023-08-23 10:10:03 | INFO | train_inner | epoch 028:    918 / 1474 loss=1.909, trans_loss=4.771, nll_loss=1.973, w2v_ctc_loss=0.627, task_loss=1.361, contrastive_loss=0.133, total=4123.89, n_correct=2842.7, ppl=3.92, accuracy=68.932, wps=13274.5, ups=1.61, wpb=8247.8, bsz=301, num_updates=40700, lr=7.01e-05, gnorm=0.532, clip=0, loss_scale=64, train_wall=62, gb_free=16.8, wall=30379
2023-08-23 10:11:04 | INFO | train_inner | epoch 028:   1018 / 1474 loss=1.912, trans_loss=4.771, nll_loss=1.973, w2v_ctc_loss=0.626, task_loss=1.285, contrastive_loss=0.183, total=4176.06, n_correct=2879.9, ppl=3.92, accuracy=68.962, wps=13555.3, ups=1.62, wpb=8352.1, bsz=311.4, num_updates=40800, lr=7.0014e-05, gnorm=0.537, clip=0, loss_scale=64, train_wall=61, gb_free=16.6, wall=30441
2023-08-23 10:12:06 | INFO | train_inner | epoch 028:   1118 / 1474 loss=1.896, trans_loss=4.765, nll_loss=1.966, w2v_ctc_loss=0.619, task_loss=1.284, contrastive_loss=0.09, total=4206.08, n_correct=2904.9, ppl=3.91, accuracy=69.064, wps=13585.3, ups=1.61, wpb=8412.2, bsz=317.3, num_updates=40900, lr=6.99284e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=61, gb_free=16.8, wall=30503
2023-08-23 10:13:07 | INFO | train_inner | epoch 028:   1218 / 1474 loss=1.895, trans_loss=4.77, nll_loss=1.972, w2v_ctc_loss=0.616, task_loss=1.302, contrastive_loss=0.077, total=4109.72, n_correct=2839.49, ppl=3.92, accuracy=69.092, wps=13446, ups=1.64, wpb=8219.4, bsz=306.9, num_updates=41000, lr=6.9843e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=15.8, wall=30564
2023-08-23 10:14:09 | INFO | train_inner | epoch 028:   1318 / 1474 loss=1.905, trans_loss=4.77, nll_loss=1.971, w2v_ctc_loss=0.63, task_loss=1.441, contrastive_loss=0.091, total=4085.44, n_correct=2817.22, ppl=3.92, accuracy=68.958, wps=13304.1, ups=1.63, wpb=8170.9, bsz=285.6, num_updates=41100, lr=6.9758e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=16, wall=30625
2023-08-23 10:15:11 | INFO | train_inner | epoch 028:   1418 / 1474 loss=1.902, trans_loss=4.767, nll_loss=1.968, w2v_ctc_loss=0.619, task_loss=1.401, contrastive_loss=0.114, total=4137.47, n_correct=2856.75, ppl=3.91, accuracy=69.046, wps=13380.3, ups=1.62, wpb=8274.9, bsz=294.8, num_updates=41200, lr=6.96733e-05, gnorm=0.517, clip=0, loss_scale=64, train_wall=61, gb_free=16.5, wall=30687
2023-08-23 10:15:45 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
2023-08-23 10:16:19 | INFO | dev_st | epoch 028 | valid on 'dev_st' subset | loss 3.956 | trans_loss 5.16 | nll_loss 2.416 | w2v_ctc_loss 1.338 | task_loss 4.65 | contrastive_loss 0.287 | total 4003.4 | n_correct 2677.1 | ppl 5.34 | accuracy 66.871 | uer 17.349 | wer 19.213 | raw_wer 19.213 | bleu 22.48 | wps 1582.3 | wpb 4003.4 | bsz 141.8 | num_updates 41256 | best_bleu 22.84
2023-08-23 10:16:19 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 28 @ 41256 updates
2023-08-23 10:16:19 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4805.pt
2023-08-23 10:16:22 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4805.pt
2023-08-23 10:16:27 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4805.pt (epoch 28 @ 41256 updates, score 22.48) (writing took 7.786229080986232 seconds)
2023-08-23 10:16:27 | INFO | fairseq_cli.train | end of epoch 28 (average epoch stats below)
2023-08-23 10:16:27 | INFO | train | epoch 028 | loss 1.901 | trans_loss 4.766 | nll_loss 1.966 | w2v_ctc_loss 0.62 | task_loss 1.32 | contrastive_loss 0.123 | total 4138.65 | n_correct 2860.17 | ppl 3.91 | accuracy 69.109 | wps 12234 | ups 1.48 | wpb 8277.3 | bsz 305.7 | num_updates 41256 | lr 6.9626e-05 | gnorm 0.528 | clip 0 | loss_scale 64 | train_wall 898 | gb_free 16.2 | wall 30764
2023-08-23 10:16:27 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 10:16:27 | INFO | fairseq.trainer | begin training epoch 29
2023-08-23 10:16:27 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 10:17:01 | INFO | train_inner | epoch 029:     44 / 1474 loss=1.894, trans_loss=4.758, nll_loss=1.958, w2v_ctc_loss=0.623, task_loss=1.267, contrastive_loss=0.083, total=4168.25, n_correct=2889.15, ppl=3.88, accuracy=69.313, wps=7537.3, ups=0.9, wpb=8336.5, bsz=315.7, num_updates=41300, lr=6.95889e-05, gnorm=0.521, clip=0, loss_scale=64, train_wall=61, gb_free=17.4, wall=30798
2023-08-23 10:18:03 | INFO | train_inner | epoch 029:    144 / 1474 loss=1.897, trans_loss=4.758, nll_loss=1.955, w2v_ctc_loss=0.62, task_loss=1.294, contrastive_loss=0.113, total=4117.66, n_correct=2857.28, ppl=3.88, accuracy=69.391, wps=13380.7, ups=1.62, wpb=8235.3, bsz=308.4, num_updates=41400, lr=6.95048e-05, gnorm=0.535, clip=0, loss_scale=64, train_wall=61, gb_free=16.9, wall=30859
2023-08-23 10:19:05 | INFO | train_inner | epoch 029:    244 / 1474 loss=1.893, trans_loss=4.75, nll_loss=1.946, w2v_ctc_loss=0.603, task_loss=1.201, contrastive_loss=0.188, total=4198.99, n_correct=2918.22, ppl=3.85, accuracy=69.498, wps=13599.2, ups=1.62, wpb=8398, bsz=330.7, num_updates=41500, lr=6.9421e-05, gnorm=0.526, clip=0, loss_scale=64, train_wall=61, gb_free=14.9, wall=30921
2023-08-23 10:20:06 | INFO | train_inner | epoch 029:    344 / 1474 loss=1.9, trans_loss=4.765, nll_loss=1.965, w2v_ctc_loss=0.628, task_loss=1.416, contrastive_loss=0.073, total=4091.28, n_correct=2828.82, ppl=3.9, accuracy=69.143, wps=13281.4, ups=1.62, wpb=8182.6, bsz=290.4, num_updates=41600, lr=6.93375e-05, gnorm=0.539, clip=0, loss_scale=64, train_wall=61, gb_free=17, wall=30983
2023-08-23 10:21:08 | INFO | train_inner | epoch 029:    444 / 1474 loss=1.879, trans_loss=4.737, nll_loss=1.929, w2v_ctc_loss=0.608, task_loss=1.276, contrastive_loss=0.067, total=4158.09, n_correct=2898.5, ppl=3.81, accuracy=69.707, wps=13545.8, ups=1.63, wpb=8316.2, bsz=307.2, num_updates=41700, lr=6.92543e-05, gnorm=0.533, clip=0, loss_scale=64, train_wall=61, gb_free=15.7, wall=31044
2023-08-23 10:22:10 | INFO | train_inner | epoch 029:    544 / 1474 loss=1.905, trans_loss=4.763, nll_loss=1.962, w2v_ctc_loss=0.615, task_loss=1.4, contrastive_loss=0.162, total=4156.12, n_correct=2872.02, ppl=3.9, accuracy=69.103, wps=13313.3, ups=1.6, wpb=8312.2, bsz=295.2, num_updates=41800, lr=6.91714e-05, gnorm=0.53, clip=0, loss_scale=128, train_wall=62, gb_free=11.9, wall=31107
2023-08-23 10:23:12 | INFO | train_inner | epoch 029:    644 / 1474 loss=1.901, trans_loss=4.757, nll_loss=1.955, w2v_ctc_loss=0.611, task_loss=1.236, contrastive_loss=0.229, total=4153.45, n_correct=2878.81, ppl=3.88, accuracy=69.311, wps=13409.8, ups=1.61, wpb=8306.9, bsz=320.5, num_updates=41900, lr=6.90889e-05, gnorm=0.527, clip=0, loss_scale=128, train_wall=61, gb_free=16.2, wall=31169
2023-08-23 10:24:11 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 64.0
2023-08-23 10:24:14 | INFO | train_inner | epoch 029:    745 / 1474 loss=1.884, trans_loss=4.748, nll_loss=1.943, w2v_ctc_loss=0.608, task_loss=1.244, contrastive_loss=0.088, total=4215.86, n_correct=2930.57, ppl=3.85, accuracy=69.513, wps=13565.1, ups=1.61, wpb=8431.7, bsz=321.7, num_updates=42000, lr=6.90066e-05, gnorm=0.515, clip=0, loss_scale=64, train_wall=62, gb_free=16.4, wall=31231
2023-08-23 10:24:14 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 10:24:47 | INFO | dev_st | epoch 029 | valid on 'dev_st' subset | loss 3.955 | trans_loss 5.159 | nll_loss 2.415 | w2v_ctc_loss 1.34 | task_loss 4.65 | contrastive_loss 0.282 | total 4003.4 | n_correct 2676.1 | ppl 5.33 | accuracy 66.846 | uer 17.331 | wer 19.172 | raw_wer 19.172 | bleu 22.06 | wps 1661.2 | wpb 4003.4 | bsz 141.8 | num_updates 42000 | best_bleu 22.84
2023-08-23 10:24:47 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 29 @ 42000 updates
2023-08-23 10:24:47 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_29_42000.pt
2023-08-23 10:24:49 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_29_42000.pt
2023-08-23 10:24:53 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_29_42000.pt (epoch 29 @ 42000 updates, score 22.06) (writing took 6.859069583006203 seconds)
2023-08-23 10:25:55 | INFO | train_inner | epoch 029:    845 / 1474 loss=1.896, trans_loss=4.768, nll_loss=1.969, w2v_ctc_loss=0.616, task_loss=1.458, contrastive_loss=0.067, total=4033.21, n_correct=2786.63, ppl=3.92, accuracy=69.092, wps=8007.6, ups=0.99, wpb=8066.4, bsz=281.6, num_updates=42100, lr=6.89246e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=60, gb_free=16.3, wall=31331
2023-08-23 10:26:56 | INFO | train_inner | epoch 029:    945 / 1474 loss=1.894, trans_loss=4.764, nll_loss=1.963, w2v_ctc_loss=0.617, task_loss=1.347, contrastive_loss=0.076, total=4085.97, n_correct=2827.74, ppl=3.9, accuracy=69.206, wps=13391.9, ups=1.64, wpb=8171.9, bsz=296.8, num_updates=42200, lr=6.88428e-05, gnorm=0.533, clip=0, loss_scale=64, train_wall=60, gb_free=16.9, wall=31392
2023-08-23 10:27:57 | INFO | train_inner | epoch 029:   1045 / 1474 loss=1.896, trans_loss=4.755, nll_loss=1.952, w2v_ctc_loss=0.613, task_loss=1.32, contrastive_loss=0.148, total=4140.84, n_correct=2871.64, ppl=3.87, accuracy=69.349, wps=13520, ups=1.63, wpb=8281.7, bsz=306.7, num_updates=42300, lr=6.87614e-05, gnorm=0.532, clip=0, loss_scale=64, train_wall=61, gb_free=16.4, wall=31454
2023-08-23 10:28:59 | INFO | train_inner | epoch 029:   1145 / 1474 loss=1.898, trans_loss=4.766, nll_loss=1.966, w2v_ctc_loss=0.625, task_loss=1.438, contrastive_loss=0.065, total=4068.4, n_correct=2809.63, ppl=3.91, accuracy=69.06, wps=13248, ups=1.63, wpb=8136.8, bsz=284.2, num_updates=42400, lr=6.86803e-05, gnorm=0.537, clip=0, loss_scale=64, train_wall=61, gb_free=17.2, wall=31515
2023-08-23 10:30:00 | INFO | train_inner | epoch 029:   1245 / 1474 loss=1.895, trans_loss=4.766, nll_loss=1.966, w2v_ctc_loss=0.618, task_loss=1.35, contrastive_loss=0.07, total=4154.79, n_correct=2873.04, ppl=3.91, accuracy=69.15, wps=13595.3, ups=1.64, wpb=8309.6, bsz=299.6, num_updates=42500, lr=6.85994e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=61, gb_free=16.5, wall=31576
2023-08-23 10:31:01 | INFO | train_inner | epoch 029:   1345 / 1474 loss=1.891, trans_loss=4.75, nll_loss=1.947, w2v_ctc_loss=0.606, task_loss=1.292, contrastive_loss=0.133, total=4166.4, n_correct=2891.33, ppl=3.86, accuracy=69.396, wps=13536.5, ups=1.62, wpb=8332.8, bsz=311.5, num_updates=42600, lr=6.85189e-05, gnorm=0.523, clip=0, loss_scale=64, train_wall=61, gb_free=16.3, wall=31638
2023-08-23 10:32:02 | INFO | train_inner | epoch 029:   1445 / 1474 loss=1.903, trans_loss=4.761, nll_loss=1.96, w2v_ctc_loss=0.623, task_loss=1.291, contrastive_loss=0.163, total=4169.4, n_correct=2884.53, ppl=3.89, accuracy=69.183, wps=13670, ups=1.64, wpb=8338.8, bsz=312, num_updates=42700, lr=6.84386e-05, gnorm=0.523, clip=0, loss_scale=64, train_wall=60, gb_free=15.6, wall=31699
2023-08-23 10:32:20 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 10:32:53 | INFO | dev_st | epoch 029 | valid on 'dev_st' subset | loss 3.96 | trans_loss 5.153 | nll_loss 2.406 | w2v_ctc_loss 1.365 | task_loss 4.658 | contrastive_loss 0.289 | total 4003.4 | n_correct 2677.2 | ppl 5.3 | accuracy 66.873 | uer 17.163 | wer 19.097 | raw_wer 19.097 | bleu 22.25 | wps 1601.6 | wpb 4003.4 | bsz 141.8 | num_updates 42729 | best_bleu 22.84
2023-08-23 10:32:53 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 29 @ 42729 updates
2023-08-23 10:32:53 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2501.pt
2023-08-23 10:32:56 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2501.pt
2023-08-23 10:33:01 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.2501.pt (epoch 29 @ 42729 updates, score 22.25) (writing took 7.209283227100968 seconds)
2023-08-23 10:33:01 | INFO | fairseq_cli.train | end of epoch 29 (average epoch stats below)
2023-08-23 10:33:01 | INFO | train | epoch 029 | loss 1.895 | trans_loss 4.757 | nll_loss 1.955 | w2v_ctc_loss 0.615 | task_loss 1.32 | contrastive_loss 0.117 | total 4137.56 | n_correct 2867.51 | ppl 3.88 | accuracy 69.304 | wps 12258.7 | ups 1.48 | wpb 8275.1 | bsz 305.3 | num_updates 42729 | lr 6.84154e-05 | gnorm 0.529 | clip 0 | loss_scale 64 | train_wall 898 | gb_free 15.8 | wall 31758
2023-08-23 10:33:02 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 10:33:02 | INFO | fairseq.trainer | begin training epoch 30
2023-08-23 10:33:02 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 10:33:53 | INFO | train_inner | epoch 030:     71 / 1474 loss=1.889, trans_loss=4.745, nll_loss=1.939, w2v_ctc_loss=0.599, task_loss=1.251, contrastive_loss=0.178, total=4176.73, n_correct=2904, ppl=3.83, accuracy=69.528, wps=7550.8, ups=0.9, wpb=8353.5, bsz=319, num_updates=42800, lr=6.83586e-05, gnorm=0.521, clip=0, loss_scale=64, train_wall=61, gb_free=16.8, wall=31809
2023-08-23 10:34:54 | INFO | train_inner | epoch 030:    171 / 1474 loss=1.882, trans_loss=4.733, nll_loss=1.923, w2v_ctc_loss=0.607, task_loss=1.227, contrastive_loss=0.111, total=4202.84, n_correct=2934.18, ppl=3.79, accuracy=69.814, wps=13731, ups=1.63, wpb=8405.7, bsz=318.6, num_updates=42900, lr=6.82789e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=12.3, wall=31871
2023-08-23 10:35:55 | INFO | train_inner | epoch 030:    271 / 1474 loss=1.889, trans_loss=4.75, nll_loss=1.945, w2v_ctc_loss=0.618, task_loss=1.356, contrastive_loss=0.067, total=4120.08, n_correct=2865.57, ppl=3.85, accuracy=69.551, wps=13425.3, ups=1.63, wpb=8240.2, bsz=296.4, num_updates=43000, lr=6.81994e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=16.4, wall=31932
2023-08-23 10:36:58 | INFO | train_inner | epoch 030:    371 / 1474 loss=1.879, trans_loss=4.739, nll_loss=1.932, w2v_ctc_loss=0.604, task_loss=1.317, contrastive_loss=0.069, total=4175.82, n_correct=2912.68, ppl=3.81, accuracy=69.751, wps=13469.4, ups=1.61, wpb=8351.6, bsz=306.1, num_updates=43100, lr=6.81203e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=61, gb_free=15.4, wall=31994
2023-08-23 10:37:58 | INFO | train_inner | epoch 030:    471 / 1474 loss=1.883, trans_loss=4.742, nll_loss=1.935, w2v_ctc_loss=0.6, task_loss=1.264, contrastive_loss=0.131, total=4128.9, n_correct=2875.82, ppl=3.82, accuracy=69.651, wps=13547.1, ups=1.64, wpb=8257.8, bsz=312.5, num_updates=43200, lr=6.80414e-05, gnorm=0.527, clip=0, loss_scale=64, train_wall=60, gb_free=16.2, wall=32055
2023-08-23 10:39:00 | INFO | train_inner | epoch 030:    571 / 1474 loss=1.888, trans_loss=4.752, nll_loss=1.949, w2v_ctc_loss=0.612, task_loss=1.285, contrastive_loss=0.093, total=4162.83, n_correct=2892.6, ppl=3.86, accuracy=69.486, wps=13486.2, ups=1.62, wpb=8325.7, bsz=311.5, num_updates=43300, lr=6.79628e-05, gnorm=0.53, clip=0, loss_scale=64, train_wall=61, gb_free=14.8, wall=32117
2023-08-23 10:40:02 | INFO | train_inner | epoch 030:    671 / 1474 loss=1.892, trans_loss=4.748, nll_loss=1.943, w2v_ctc_loss=0.619, task_loss=1.285, contrastive_loss=0.107, total=4197.56, n_correct=2911.47, ppl=3.84, accuracy=69.361, wps=13614.2, ups=1.62, wpb=8395.1, bsz=317.6, num_updates=43400, lr=6.78844e-05, gnorm=0.535, clip=0, loss_scale=64, train_wall=61, gb_free=16.2, wall=32178
2023-08-23 10:41:04 | INFO | train_inner | epoch 030:    771 / 1474 loss=1.906, trans_loss=4.758, nll_loss=1.955, w2v_ctc_loss=0.621, task_loss=1.356, contrastive_loss=0.188, total=4097.27, n_correct=2834.51, ppl=3.88, accuracy=69.18, wps=13185.8, ups=1.61, wpb=8194.5, bsz=301.1, num_updates=43500, lr=6.78064e-05, gnorm=0.539, clip=0, loss_scale=64, train_wall=62, gb_free=14.6, wall=32241
2023-08-23 10:42:05 | INFO | train_inner | epoch 030:    871 / 1474 loss=1.892, trans_loss=4.754, nll_loss=1.951, w2v_ctc_loss=0.617, task_loss=1.377, contrastive_loss=0.071, total=4097.18, n_correct=2841.84, ppl=3.87, accuracy=69.361, wps=13404.7, ups=1.64, wpb=8194.4, bsz=292.2, num_updates=43600, lr=6.77285e-05, gnorm=0.529, clip=0, loss_scale=64, train_wall=61, gb_free=16.4, wall=32302
2023-08-23 10:43:06 | INFO | train_inner | epoch 030:    971 / 1474 loss=1.894, trans_loss=4.757, nll_loss=1.954, w2v_ctc_loss=0.618, task_loss=1.326, contrastive_loss=0.089, total=4140.12, n_correct=2868.04, ppl=3.87, accuracy=69.274, wps=13530.8, ups=1.63, wpb=8280.2, bsz=304.6, num_updates=43700, lr=6.7651e-05, gnorm=0.525, clip=0, loss_scale=64, train_wall=61, gb_free=15, wall=32363
2023-08-23 10:43:46 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 10:44:09 | INFO | train_inner | epoch 030:   1072 / 1474 loss=1.897, trans_loss=4.762, nll_loss=1.959, w2v_ctc_loss=0.621, task_loss=1.516, contrastive_loss=0.059, total=4084.1, n_correct=2824.86, ppl=3.89, accuracy=69.167, wps=12957.6, ups=1.59, wpb=8168.2, bsz=275.5, num_updates=43800, lr=6.75737e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=63, gb_free=16.4, wall=32426
2023-08-23 10:45:11 | INFO | train_inner | epoch 030:   1172 / 1474 loss=1.885, trans_loss=4.747, nll_loss=1.943, w2v_ctc_loss=0.598, task_loss=1.261, contrastive_loss=0.138, total=4168.22, n_correct=2902.89, ppl=3.85, accuracy=69.643, wps=13521.1, ups=1.62, wpb=8336.4, bsz=314.5, num_updates=43900, lr=6.74967e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=16.5, wall=32488
2023-08-23 10:46:13 | INFO | train_inner | epoch 030:   1272 / 1474 loss=1.896, trans_loss=4.758, nll_loss=1.956, w2v_ctc_loss=0.622, task_loss=1.473, contrastive_loss=0.073, total=4032.74, n_correct=2790.75, ppl=3.88, accuracy=69.202, wps=13015.3, ups=1.61, wpb=8065.5, bsz=281.8, num_updates=44000, lr=6.742e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=61, gb_free=16.5, wall=32550
2023-08-23 10:46:13 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 10:46:46 | INFO | dev_st | epoch 030 | valid on 'dev_st' subset | loss 3.95 | trans_loss 5.155 | nll_loss 2.408 | w2v_ctc_loss 1.33 | task_loss 4.654 | contrastive_loss 0.29 | total 4003.4 | n_correct 2682.3 | ppl 5.31 | accuracy 67.001 | uer 17.227 | wer 19.093 | raw_wer 19.093 | bleu 22.56 | wps 1627.4 | wpb 4003.4 | bsz 141.8 | num_updates 44000 | best_bleu 22.84
2023-08-23 10:46:46 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 30 @ 44000 updates
2023-08-23 10:46:46 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_30_44000.pt
2023-08-23 10:46:49 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_30_44000.pt
2023-08-23 10:46:55 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_30_44000.pt (epoch 30 @ 44000 updates, score 22.56) (writing took 9.09629597608 seconds)
2023-08-23 10:47:57 | INFO | train_inner | epoch 030:   1372 / 1474 loss=1.885, trans_loss=4.753, nll_loss=1.951, w2v_ctc_loss=0.609, task_loss=1.24, contrastive_loss=0.083, total=4166.96, n_correct=2891.96, ppl=3.87, accuracy=69.402, wps=8030.2, ups=0.96, wpb=8333.9, bsz=322.3, num_updates=44100, lr=6.73435e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=15, wall=32653
2023-08-23 10:48:58 | INFO | train_inner | epoch 030:   1472 / 1474 loss=1.894, trans_loss=4.751, nll_loss=1.948, w2v_ctc_loss=0.599, task_loss=1.26, contrastive_loss=0.227, total=4125.17, n_correct=2865.17, ppl=3.86, accuracy=69.456, wps=13517.7, ups=1.64, wpb=8250.3, bsz=310, num_updates=44200, lr=6.72673e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=16.6, wall=32714
2023-08-23 10:48:59 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 10:49:32 | INFO | dev_st | epoch 030 | valid on 'dev_st' subset | loss 3.942 | trans_loss 5.154 | nll_loss 2.408 | w2v_ctc_loss 1.306 | task_loss 4.664 | contrastive_loss 0.285 | total 4003.4 | n_correct 2682.5 | ppl 5.31 | accuracy 67.006 | uer 17.262 | wer 19.28 | raw_wer 19.28 | bleu 22.49 | wps 1617.2 | wpb 4003.4 | bsz 141.8 | num_updates 44202 | best_bleu 22.84
2023-08-23 10:49:32 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 30 @ 44202 updates
2023-08-23 10:49:32 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4908.pt
2023-08-23 10:49:35 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4908.pt
2023-08-23 10:49:40 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.4908.pt (epoch 30 @ 44202 updates, score 22.49) (writing took 7.552278996095993 seconds)
2023-08-23 10:49:40 | INFO | fairseq_cli.train | end of epoch 30 (average epoch stats below)
2023-08-23 10:49:40 | INFO | train | epoch 030 | loss 1.89 | trans_loss 4.75 | nll_loss 1.946 | w2v_ctc_loss 0.611 | task_loss 1.318 | contrastive_loss 0.114 | total 4137.79 | n_correct 2873.9 | ppl 3.85 | accuracy 69.455 | wps 12207.1 | ups 1.48 | wpb 8275.6 | bsz 305.2 | num_updates 44202 | lr 6.72658e-05 | gnorm 0.53 | clip 0 | loss_scale 32 | train_wall 899 | gb_free 16.8 | wall 32756
2023-08-23 10:49:40 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 10:49:40 | INFO | fairseq.trainer | begin training epoch 31
2023-08-23 10:49:40 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 10:50:48 | INFO | train_inner | epoch 031:     98 / 1474 loss=1.88, trans_loss=4.739, nll_loss=1.931, w2v_ctc_loss=0.606, task_loss=1.367, contrastive_loss=0.07, total=4081.34, n_correct=2846.28, ppl=3.81, accuracy=69.739, wps=7407.5, ups=0.91, wpb=8162.7, bsz=294.7, num_updates=44300, lr=6.71913e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=16.1, wall=32825
2023-08-23 10:51:50 | INFO | train_inner | epoch 031:    198 / 1474 loss=1.882, trans_loss=4.739, nll_loss=1.931, w2v_ctc_loss=0.605, task_loss=1.35, contrastive_loss=0.095, total=4146.03, n_correct=2889.49, ppl=3.81, accuracy=69.693, wps=13479.2, ups=1.63, wpb=8292.1, bsz=302.2, num_updates=44400, lr=6.71156e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=12.9, wall=32886
2023-08-23 10:52:52 | INFO | train_inner | epoch 031:    298 / 1474 loss=1.884, trans_loss=4.734, nll_loss=1.923, w2v_ctc_loss=0.605, task_loss=1.355, contrastive_loss=0.132, total=4146.75, n_correct=2892.1, ppl=3.79, accuracy=69.744, wps=13347.5, ups=1.61, wpb=8293.5, bsz=300.7, num_updates=44500, lr=6.70402e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=62, gb_free=17.3, wall=32948
2023-08-23 10:53:53 | INFO | train_inner | epoch 031:    398 / 1474 loss=1.885, trans_loss=4.747, nll_loss=1.941, w2v_ctc_loss=0.605, task_loss=1.441, contrastive_loss=0.071, total=4089.43, n_correct=2842.41, ppl=3.84, accuracy=69.506, wps=13360.6, ups=1.63, wpb=8178.9, bsz=285.5, num_updates=44600, lr=6.6965e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=61, gb_free=15.9, wall=33009
2023-08-23 10:54:54 | INFO | train_inner | epoch 031:    498 / 1474 loss=1.884, trans_loss=4.741, nll_loss=1.933, w2v_ctc_loss=0.613, task_loss=1.372, contrastive_loss=0.079, total=4114.41, n_correct=2864.31, ppl=3.82, accuracy=69.617, wps=13379.4, ups=1.63, wpb=8228.8, bsz=300.9, num_updates=44700, lr=6.689e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=61, gb_free=15.8, wall=33071
2023-08-23 10:55:56 | INFO | train_inner | epoch 031:    598 / 1474 loss=1.878, trans_loss=4.738, nll_loss=1.93, w2v_ctc_loss=0.601, task_loss=1.375, contrastive_loss=0.069, total=4084.36, n_correct=2846.7, ppl=3.81, accuracy=69.698, wps=13314.6, ups=1.63, wpb=8168.7, bsz=295, num_updates=44800, lr=6.68153e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=61, gb_free=16.1, wall=33132
2023-08-23 10:56:57 | INFO | train_inner | epoch 031:    698 / 1474 loss=1.874, trans_loss=4.736, nll_loss=1.927, w2v_ctc_loss=0.599, task_loss=1.256, contrastive_loss=0.07, total=4210.09, n_correct=2937.41, ppl=3.8, accuracy=69.771, wps=13778.6, ups=1.64, wpb=8420.2, bsz=314.9, num_updates=44900, lr=6.67409e-05, gnorm=0.524, clip=0, loss_scale=32, train_wall=61, gb_free=14.3, wall=33193
2023-08-23 10:57:59 | INFO | train_inner | epoch 031:    798 / 1474 loss=1.892, trans_loss=4.748, nll_loss=1.942, w2v_ctc_loss=0.607, task_loss=1.382, contrastive_loss=0.141, total=4098.1, n_correct=2844.41, ppl=3.84, accuracy=69.408, wps=13187.7, ups=1.61, wpb=8196.2, bsz=295.7, num_updates=45000, lr=6.66667e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=62, gb_free=16.6, wall=33256
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:0')
2023-08-23 10:59:00 | INFO | train_inner | epoch 031:    898 / 1474 loss=1.881, trans_loss=4.735, nll_loss=1.925, w2v_ctc_loss=0.607, task_loss=1.367, contrastive_loss=0.086, total=4101.05, n_correct=2858.43, ppl=3.8, accuracy=69.7, wps=13397.6, ups=1.63, wpb=8202.1, bsz=296.9, num_updates=45100, lr=6.65927e-05, gnorm=0.549, clip=0, loss_scale=32, train_wall=61, gb_free=16.7, wall=33317
2023-08-23 11:00:02 | INFO | train_inner | epoch 031:    998 / 1474 loss=1.892, trans_loss=4.752, nll_loss=1.948, w2v_ctc_loss=0.605, task_loss=1.248, contrastive_loss=0.169, total=4186.3, n_correct=2910.7, ppl=3.86, accuracy=69.529, wps=13651.4, ups=1.63, wpb=8372.6, bsz=318.6, num_updates=45200, lr=6.6519e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=16, wall=33378
2023-08-23 11:01:03 | INFO | train_inner | epoch 031:   1098 / 1474 loss=1.885, trans_loss=4.745, nll_loss=1.939, w2v_ctc_loss=0.603, task_loss=1.294, contrastive_loss=0.115, total=4147.34, n_correct=2888.11, ppl=3.83, accuracy=69.638, wps=13563.9, ups=1.64, wpb=8294.7, bsz=314.6, num_updates=45300, lr=6.64455e-05, gnorm=0.529, clip=0, loss_scale=32, train_wall=60, gb_free=16.9, wall=33439
2023-08-23 11:02:04 | INFO | train_inner | epoch 031:   1198 / 1474 loss=1.891, trans_loss=4.745, nll_loss=1.939, w2v_ctc_loss=0.598, task_loss=1.229, contrastive_loss=0.232, total=4185.34, n_correct=2914.76, ppl=3.83, accuracy=69.642, wps=13704.6, ups=1.64, wpb=8370.7, bsz=321.6, num_updates=45400, lr=6.63723e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=60, gb_free=16.8, wall=33500
2023-08-23 11:03:05 | INFO | train_inner | epoch 031:   1298 / 1474 loss=1.883, trans_loss=4.751, nll_loss=1.947, w2v_ctc_loss=0.608, task_loss=1.192, contrastive_loss=0.076, total=4223.54, n_correct=2936.56, ppl=3.86, accuracy=69.528, wps=13771.5, ups=1.63, wpb=8447.1, bsz=325, num_updates=45500, lr=6.62994e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=13.2, wall=33562
2023-08-23 11:04:07 | INFO | train_inner | epoch 031:   1398 / 1474 loss=1.904, trans_loss=4.748, nll_loss=1.944, w2v_ctc_loss=0.605, task_loss=1.2, contrastive_loss=0.278, total=4195.76, n_correct=2915.85, ppl=3.85, accuracy=69.495, wps=13490.3, ups=1.61, wpb=8391.5, bsz=328.2, num_updates=45600, lr=6.62266e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=62, gb_free=16.3, wall=33624
2023-08-23 11:04:54 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:5')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:7')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:6')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:4')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:3')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:2')
mt_weight tensor(0.5000)
asr_weight tensor(0.2463, device='cuda:1')
2023-08-23 11:05:27 | INFO | dev_st | epoch 031 | valid on 'dev_st' subset | loss 3.95 | trans_loss 5.152 | nll_loss 2.404 | w2v_ctc_loss 1.339 | task_loss 4.64 | contrastive_loss 0.279 | total 4003.4 | n_correct 2682 | ppl 5.29 | accuracy 66.993 | uer 17.15 | wer 18.993 | raw_wer 18.993 | bleu 22.6 | wps 1636.6 | wpb 4003.4 | bsz 141.8 | num_updates 45676 | best_bleu 22.84
2023-08-23 11:05:27 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 31 @ 45676 updates
2023-08-23 11:05:27 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6001.pt
2023-08-23 11:05:29 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6001.pt
2023-08-23 11:05:34 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6001.pt (epoch 31 @ 45676 updates, score 22.6) (writing took 7.147062359028496 seconds)
2023-08-23 11:05:34 | INFO | fairseq_cli.train | end of epoch 31 (average epoch stats below)
2023-08-23 11:05:34 | INFO | train | epoch 031 | loss 1.885 | trans_loss 4.743 | nll_loss 1.936 | w2v_ctc_loss 0.605 | task_loss 1.318 | contrastive_loss 0.119 | total 4138.65 | n_correct 2881.33 | ppl 3.83 | accuracy 69.62 | wps 12784.1 | ups 1.54 | wpb 8277.3 | bsz 305.7 | num_updates 45676 | lr 6.61715e-05 | gnorm 0.532 | clip 0 | loss_scale 32 | train_wall 897 | gb_free 11.7 | wall 33711
2023-08-23 11:05:35 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 11:05:35 | INFO | fairseq.trainer | begin training epoch 32
2023-08-23 11:05:35 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 11:05:56 | INFO | train_inner | epoch 032:     24 / 1474 loss=1.883, trans_loss=4.739, nll_loss=1.931, w2v_ctc_loss=0.613, task_loss=1.403, contrastive_loss=0.064, total=4039.04, n_correct=2815.66, ppl=3.81, accuracy=69.711, wps=7420.3, ups=0.92, wpb=8078.1, bsz=287.3, num_updates=45700, lr=6.61541e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=60, gb_free=17.5, wall=33733
2023-08-23 11:06:58 | INFO | train_inner | epoch 032:    124 / 1474 loss=1.863, trans_loss=4.718, nll_loss=1.905, w2v_ctc_loss=0.587, task_loss=1.222, contrastive_loss=0.076, total=4224.84, n_correct=2963.13, ppl=3.74, accuracy=70.136, wps=13757.5, ups=1.63, wpb=8449.7, bsz=322.5, num_updates=45800, lr=6.60819e-05, gnorm=0.523, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=33794
2023-08-23 11:08:00 | INFO | train_inner | epoch 032:    224 / 1474 loss=1.874, trans_loss=4.736, nll_loss=1.927, w2v_ctc_loss=0.598, task_loss=1.247, contrastive_loss=0.084, total=4163.01, n_correct=2906.66, ppl=3.8, accuracy=69.821, wps=13471, ups=1.62, wpb=8326, bsz=322.2, num_updates=45900, lr=6.60098e-05, gnorm=0.534, clip=0, loss_scale=64, train_wall=61, gb_free=16.9, wall=33856
2023-08-23 11:08:52 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 11:09:01 | INFO | train_inner | epoch 032:    325 / 1474 loss=1.868, trans_loss=4.722, nll_loss=1.909, w2v_ctc_loss=0.592, task_loss=1.243, contrastive_loss=0.081, total=4181.19, n_correct=2932.93, ppl=3.76, accuracy=70.146, wps=13517.6, ups=1.62, wpb=8362.4, bsz=314.6, num_updates=46000, lr=6.5938e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=17.2, wall=33918
2023-08-23 11:09:01 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 11:09:34 | INFO | dev_st | epoch 032 | valid on 'dev_st' subset | loss 3.957 | trans_loss 5.162 | nll_loss 2.415 | w2v_ctc_loss 1.342 | task_loss 4.651 | contrastive_loss 0.285 | total 4003.4 | n_correct 2680.9 | ppl 5.33 | accuracy 66.966 | uer 17.381 | wer 19.395 | raw_wer 19.395 | bleu 22.41 | wps 1632.5 | wpb 4003.4 | bsz 141.8 | num_updates 46000 | best_bleu 22.84
2023-08-23 11:09:34 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 32 @ 46000 updates
2023-08-23 11:09:34 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_32_46000.pt
2023-08-23 11:09:37 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_32_46000.pt
2023-08-23 11:09:43 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_32_46000.pt (epoch 32 @ 46000 updates, score 22.41) (writing took 8.269404588965699 seconds)
2023-08-23 11:10:45 | INFO | train_inner | epoch 032:    425 / 1474 loss=1.874, trans_loss=4.728, nll_loss=1.917, w2v_ctc_loss=0.602, task_loss=1.313, contrastive_loss=0.074, total=4157.28, n_correct=2908.1, ppl=3.78, accuracy=69.952, wps=8061.7, ups=0.97, wpb=8314.6, bsz=305.9, num_updates=46100, lr=6.58665e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=61, gb_free=14.6, wall=34021
2023-08-23 11:11:47 | INFO | train_inner | epoch 032:    525 / 1474 loss=1.887, trans_loss=4.738, nll_loss=1.93, w2v_ctc_loss=0.604, task_loss=1.277, contrastive_loss=0.16, total=4198.93, n_correct=2927.36, ppl=3.81, accuracy=69.717, wps=13475.4, ups=1.6, wpb=8397.9, bsz=317.6, num_updates=46200, lr=6.57952e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=62, gb_free=17, wall=34083
2023-08-23 11:12:49 | INFO | train_inner | epoch 032:    625 / 1474 loss=1.877, trans_loss=4.735, nll_loss=1.926, w2v_ctc_loss=0.601, task_loss=1.359, contrastive_loss=0.083, total=4142.69, n_correct=2889.72, ppl=3.8, accuracy=69.755, wps=13377.8, ups=1.61, wpb=8285.4, bsz=301.6, num_updates=46300, lr=6.57241e-05, gnorm=0.526, clip=0, loss_scale=32, train_wall=61, gb_free=17, wall=34145
2023-08-23 11:13:51 | INFO | train_inner | epoch 032:    725 / 1474 loss=1.88, trans_loss=4.738, nll_loss=1.929, w2v_ctc_loss=0.61, task_loss=1.344, contrastive_loss=0.067, total=4154.59, n_correct=2899.86, ppl=3.81, accuracy=69.799, wps=13433.5, ups=1.62, wpb=8309.2, bsz=301.8, num_updates=46400, lr=6.56532e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=61, gb_free=15.5, wall=34207
2023-08-23 11:14:52 | INFO | train_inner | epoch 032:    825 / 1474 loss=1.873, trans_loss=4.733, nll_loss=1.923, w2v_ctc_loss=0.596, task_loss=1.354, contrastive_loss=0.065, total=4114.54, n_correct=2872.81, ppl=3.79, accuracy=69.821, wps=13503.9, ups=1.64, wpb=8229.1, bsz=294.9, num_updates=46500, lr=6.55826e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=60, gb_free=16.8, wall=34268
2023-08-23 11:15:53 | INFO | train_inner | epoch 032:    925 / 1474 loss=1.874, trans_loss=4.735, nll_loss=1.926, w2v_ctc_loss=0.595, task_loss=1.366, contrastive_loss=0.063, total=4139.67, n_correct=2889.94, ppl=3.8, accuracy=69.811, wps=13378.7, ups=1.62, wpb=8279.3, bsz=298.3, num_updates=46600, lr=6.55122e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=61, gb_free=16.5, wall=34330
2023-08-23 11:16:55 | INFO | train_inner | epoch 032:   1025 / 1474 loss=1.886, trans_loss=4.74, nll_loss=1.932, w2v_ctc_loss=0.603, task_loss=1.306, contrastive_loss=0.158, total=4119.15, n_correct=2871.99, ppl=3.82, accuracy=69.723, wps=13393.8, ups=1.63, wpb=8238.3, bsz=304.5, num_updates=46700, lr=6.5442e-05, gnorm=0.528, clip=0, loss_scale=32, train_wall=61, gb_free=16.2, wall=34392
2023-08-23 11:17:57 | INFO | train_inner | epoch 032:   1125 / 1474 loss=1.884, trans_loss=4.736, nll_loss=1.926, w2v_ctc_loss=0.602, task_loss=1.558, contrastive_loss=0.1, total=4019.61, n_correct=2799.52, ppl=3.8, accuracy=69.647, wps=13038.1, ups=1.62, wpb=8039.2, bsz=271.4, num_updates=46800, lr=6.5372e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=61, gb_free=17.3, wall=34453
2023-08-23 11:18:59 | INFO | train_inner | epoch 032:   1225 / 1474 loss=1.899, trans_loss=4.75, nll_loss=1.946, w2v_ctc_loss=0.606, task_loss=1.303, contrastive_loss=0.208, total=4149.28, n_correct=2880.4, ppl=3.85, accuracy=69.419, wps=13387.5, ups=1.61, wpb=8298.6, bsz=310.3, num_updates=46900, lr=6.53023e-05, gnorm=0.548, clip=0, loss_scale=32, train_wall=61, gb_free=15.7, wall=34515
2023-08-23 11:20:01 | INFO | train_inner | epoch 032:   1325 / 1474 loss=1.877, trans_loss=4.736, nll_loss=1.927, w2v_ctc_loss=0.603, task_loss=1.35, contrastive_loss=0.064, total=4079.22, n_correct=2842.2, ppl=3.8, accuracy=69.675, wps=13027.2, ups=1.6, wpb=8158.4, bsz=296.2, num_updates=47000, lr=6.52328e-05, gnorm=0.543, clip=0, loss_scale=32, train_wall=62, gb_free=14.7, wall=34578
2023-08-23 11:21:07 | INFO | train_inner | epoch 032:   1425 / 1474 loss=1.905, trans_loss=4.742, nll_loss=1.936, w2v_ctc_loss=0.615, task_loss=1.325, contrastive_loss=0.295, total=4111.41, n_correct=2861.64, ppl=3.83, accuracy=69.602, wps=12522.7, ups=1.52, wpb=8222.8, bsz=306.1, num_updates=47100, lr=6.51635e-05, gnorm=0.538, clip=0, loss_scale=32, train_wall=65, gb_free=15.7, wall=34644
2023-08-23 11:21:37 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 11:22:13 | INFO | dev_st | epoch 032 | valid on 'dev_st' subset | loss 3.965 | trans_loss 5.159 | nll_loss 2.414 | w2v_ctc_loss 1.372 | task_loss 4.676 | contrastive_loss 0.284 | total 4003.4 | n_correct 2682.3 | ppl 5.33 | accuracy 67.001 | uer 17.145 | wer 19.034 | raw_wer 19.034 | bleu 22.62 | wps 1438.7 | wpb 4003.4 | bsz 141.8 | num_updates 47149 | best_bleu 22.84
2023-08-23 11:22:13 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 32 @ 47149 updates
2023-08-23 11:22:13 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6203.pt
2023-08-23 11:22:16 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6203.pt
2023-08-23 11:22:23 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6203.pt (epoch 32 @ 47149 updates, score 22.62) (writing took 10.570428697974421 seconds)
2023-08-23 11:22:23 | INFO | fairseq_cli.train | end of epoch 32 (average epoch stats below)
2023-08-23 11:22:23 | INFO | train | epoch 032 | loss 1.88 | trans_loss 4.735 | nll_loss 1.926 | w2v_ctc_loss 0.601 | task_loss 1.318 | contrastive_loss 0.118 | total 4138.66 | n_correct 2888.35 | ppl 3.8 | accuracy 69.789 | wps 12081.9 | ups 1.46 | wpb 8277.3 | bsz 305.7 | num_updates 47149 | lr 6.51297e-05 | gnorm 0.534 | clip 0 | loss_scale 32 | train_wall 904 | gb_free 16.1 | wall 34720
2023-08-23 11:22:24 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 11:22:24 | INFO | fairseq.trainer | begin training epoch 33
2023-08-23 11:22:24 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 11:23:05 | INFO | train_inner | epoch 033:     51 / 1474 loss=1.881, trans_loss=4.735, nll_loss=1.927, w2v_ctc_loss=0.592, task_loss=1.229, contrastive_loss=0.168, total=4156.71, n_correct=2901.38, ppl=3.8, accuracy=69.8, wps=7036.6, ups=0.85, wpb=8313.4, bsz=322.5, num_updates=47200, lr=6.50945e-05, gnorm=0.531, clip=0, loss_scale=32, train_wall=63, gb_free=16.2, wall=34762
2023-08-23 11:24:13 | INFO | train_inner | epoch 033:    151 / 1474 loss=1.862, trans_loss=4.716, nll_loss=1.901, w2v_ctc_loss=0.583, task_loss=1.421, contrastive_loss=0.056, total=4071.44, n_correct=2858.44, ppl=3.73, accuracy=70.207, wps=11981.7, ups=1.47, wpb=8142.9, bsz=284.1, num_updates=47300, lr=6.50256e-05, gnorm=0.523, clip=0, loss_scale=32, train_wall=67, gb_free=15.9, wall=34830
2023-08-23 11:25:22 | INFO | train_inner | epoch 033:    251 / 1474 loss=1.883, trans_loss=4.721, nll_loss=1.909, w2v_ctc_loss=0.592, task_loss=1.123, contrastive_loss=0.23, total=4281.28, n_correct=3001.75, ppl=3.75, accuracy=70.113, wps=12502.2, ups=1.46, wpb=8562.6, bsz=346.3, num_updates=47400, lr=6.4957e-05, gnorm=0.525, clip=0, loss_scale=32, train_wall=68, gb_free=16.2, wall=34898
2023-08-23 11:26:24 | INFO | train_inner | epoch 033:    351 / 1474 loss=1.875, trans_loss=4.727, nll_loss=1.915, w2v_ctc_loss=0.599, task_loss=1.359, contrastive_loss=0.082, total=4111.69, n_correct=2877.2, ppl=3.77, accuracy=69.976, wps=13259.9, ups=1.61, wpb=8223.4, bsz=298.4, num_updates=47500, lr=6.48886e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=61, gb_free=16.5, wall=34960
2023-08-23 11:27:26 | INFO | train_inner | epoch 033:    451 / 1474 loss=1.857, trans_loss=4.715, nll_loss=1.899, w2v_ctc_loss=0.584, task_loss=1.238, contrastive_loss=0.064, total=4147.28, n_correct=2914.9, ppl=3.73, accuracy=70.285, wps=13406.5, ups=1.62, wpb=8294.6, bsz=313.5, num_updates=47600, lr=6.48204e-05, gnorm=0.521, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=35022
2023-08-23 11:28:32 | INFO | train_inner | epoch 033:    551 / 1474 loss=1.879, trans_loss=4.73, nll_loss=1.919, w2v_ctc_loss=0.605, task_loss=1.382, contrastive_loss=0.085, total=4127.68, n_correct=2880.83, ppl=3.78, accuracy=69.793, wps=12349.5, ups=1.5, wpb=8255.4, bsz=292.6, num_updates=47700, lr=6.47524e-05, gnorm=0.553, clip=0, loss_scale=32, train_wall=66, gb_free=15.2, wall=35089
2023-08-23 11:29:39 | INFO | train_inner | epoch 033:    651 / 1474 loss=1.881, trans_loss=4.739, nll_loss=1.93, w2v_ctc_loss=0.595, task_loss=1.348, contrastive_loss=0.119, total=4164.1, n_correct=2904.26, ppl=3.81, accuracy=69.745, wps=12522.6, ups=1.5, wpb=8328.2, bsz=302.4, num_updates=47800, lr=6.46846e-05, gnorm=0.532, clip=0, loss_scale=32, train_wall=66, gb_free=15.1, wall=35155
2023-08-23 11:30:44 | INFO | train_inner | epoch 033:    751 / 1474 loss=1.883, trans_loss=4.735, nll_loss=1.925, w2v_ctc_loss=0.614, task_loss=1.441, contrastive_loss=0.066, total=4064.29, n_correct=2834.01, ppl=3.8, accuracy=69.73, wps=12480.2, ups=1.54, wpb=8128.6, bsz=285.8, num_updates=47900, lr=6.46171e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=65, gb_free=16.3, wall=35221
2023-08-23 11:31:45 | INFO | train_inner | epoch 033:    851 / 1474 loss=1.865, trans_loss=4.722, nll_loss=1.909, w2v_ctc_loss=0.582, task_loss=1.242, contrastive_loss=0.131, total=4141.12, n_correct=2907.61, ppl=3.76, accuracy=70.213, wps=13530.3, ups=1.63, wpb=8282.2, bsz=318.5, num_updates=48000, lr=6.45497e-05, gnorm=0.515, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=35282
2023-08-23 11:31:45 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 11:32:18 | INFO | dev_st | epoch 033 | valid on 'dev_st' subset | loss 3.967 | trans_loss 5.158 | nll_loss 2.41 | w2v_ctc_loss 1.381 | task_loss 4.682 | contrastive_loss 0.283 | total 4003.4 | n_correct 2682.9 | ppl 5.32 | accuracy 67.016 | uer 17.079 | wer 18.989 | raw_wer 18.989 | bleu 22.49 | wps 1632.2 | wpb 4003.4 | bsz 141.8 | num_updates 48000 | best_bleu 22.84
2023-08-23 11:32:18 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 33 @ 48000 updates
2023-08-23 11:32:18 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_33_48000.pt
2023-08-23 11:32:21 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_33_48000.pt
2023-08-23 11:32:27 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_33_48000.pt (epoch 33 @ 48000 updates, score 22.49) (writing took 8.551763089955784 seconds)
2023-08-23 11:33:29 | INFO | train_inner | epoch 033:    951 / 1474 loss=1.875, trans_loss=4.73, nll_loss=1.919, w2v_ctc_loss=0.604, task_loss=1.314, contrastive_loss=0.076, total=4147.76, n_correct=2897.45, ppl=3.78, accuracy=69.856, wps=8028.7, ups=0.97, wpb=8295.5, bsz=308.2, num_updates=48100, lr=6.44826e-05, gnorm=0.528, clip=0, loss_scale=64, train_wall=61, gb_free=17.3, wall=35385
2023-08-23 11:33:35 | INFO | fairseq.trainer | NOTE: gradient overflow detected, ignoring gradient, setting loss scale to: 32.0
2023-08-23 11:34:35 | INFO | train_inner | epoch 033:   1052 / 1474 loss=1.872, trans_loss=4.725, nll_loss=1.913, w2v_ctc_loss=0.6, task_loss=1.36, contrastive_loss=0.067, total=4116.77, n_correct=2880.48, ppl=3.77, accuracy=69.969, wps=12381.5, ups=1.5, wpb=8233.5, bsz=299.3, num_updates=48200, lr=6.44157e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=66, gb_free=11.2, wall=35452
2023-08-23 11:35:37 | INFO | train_inner | epoch 033:   1152 / 1474 loss=1.883, trans_loss=4.738, nll_loss=1.93, w2v_ctc_loss=0.591, task_loss=1.326, contrastive_loss=0.167, total=4182.67, n_correct=2915.44, ppl=3.81, accuracy=69.703, wps=13534.8, ups=1.62, wpb=8365.3, bsz=309.5, num_updates=48300, lr=6.43489e-05, gnorm=0.541, clip=0, loss_scale=32, train_wall=61, gb_free=17.3, wall=35513
2023-08-23 11:36:39 | INFO | train_inner | epoch 033:   1252 / 1474 loss=1.873, trans_loss=4.727, nll_loss=1.915, w2v_ctc_loss=0.601, task_loss=1.387, contrastive_loss=0.068, total=4110.02, n_correct=2877.07, ppl=3.77, accuracy=70.001, wps=13336.6, ups=1.62, wpb=8220, bsz=294.4, num_updates=48400, lr=6.42824e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=16.4, wall=35575
2023-08-23 11:37:41 | INFO | train_inner | epoch 033:   1352 / 1474 loss=1.873, trans_loss=4.732, nll_loss=1.922, w2v_ctc_loss=0.597, task_loss=1.292, contrastive_loss=0.087, total=4128.82, n_correct=2884.87, ppl=3.79, accuracy=69.872, wps=13278.3, ups=1.61, wpb=8257.6, bsz=312.4, num_updates=48500, lr=6.42161e-05, gnorm=0.54, clip=0, loss_scale=32, train_wall=62, gb_free=15.7, wall=35637
2023-08-23 11:38:42 | INFO | train_inner | epoch 033:   1452 / 1474 loss=1.885, trans_loss=4.73, nll_loss=1.92, w2v_ctc_loss=0.594, task_loss=1.313, contrastive_loss=0.232, total=4123.47, n_correct=2880.96, ppl=3.79, accuracy=69.867, wps=13359.6, ups=1.62, wpb=8246.9, bsz=308.9, num_updates=48600, lr=6.415e-05, gnorm=0.534, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=35699
2023-08-23 11:38:56 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 11:39:29 | INFO | dev_st | epoch 033 | valid on 'dev_st' subset | loss 3.964 | trans_loss 5.16 | nll_loss 2.412 | w2v_ctc_loss 1.368 | task_loss 4.666 | contrastive_loss 0.285 | total 4003.4 | n_correct 2675.8 | ppl 5.32 | accuracy 66.838 | uer 17.27 | wer 19.045 | raw_wer 19.045 | bleu 22.66 | wps 1647.6 | wpb 4003.4 | bsz 141.8 | num_updates 48622 | best_bleu 22.84
2023-08-23 11:39:29 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 33 @ 48622 updates
2023-08-23 11:39:29 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6603.pt
2023-08-23 11:39:32 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6603.pt
2023-08-23 11:39:37 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint.best_bleu_22.6603.pt (epoch 33 @ 48622 updates, score 22.66) (writing took 8.073069646023214 seconds)
2023-08-23 11:39:37 | INFO | fairseq_cli.train | end of epoch 33 (average epoch stats below)
2023-08-23 11:39:37 | INFO | train | epoch 033 | loss 1.874 | trans_loss 4.727 | nll_loss 1.916 | w2v_ctc_loss 0.596 | task_loss 1.32 | contrastive_loss 0.109 | total 4137.28 | n_correct 2894.18 | ppl 3.77 | accuracy 69.954 | wps 11788.8 | ups 1.42 | wpb 8274.6 | bsz 305.2 | num_updates 48622 | lr 6.41355e-05 | gnorm 0.532 | clip 0 | loss_scale 32 | train_wall 935 | gb_free 17.5 | wall 35754
2023-08-23 11:39:38 | INFO | fairseq.data.iterators | grouped total_num_itrs = 1474
2023-08-23 11:39:38 | INFO | fairseq.trainer | begin training epoch 34
2023-08-23 11:39:38 | INFO | fairseq_cli.train | Start iterating over samples
2023-08-23 11:40:32 | INFO | train_inner | epoch 034:     78 / 1474 loss=1.864, trans_loss=4.715, nll_loss=1.9, w2v_ctc_loss=0.59, task_loss=1.299, contrastive_loss=0.07, total=4128.94, n_correct=2898.19, ppl=3.73, accuracy=70.192, wps=7518.2, ups=0.91, wpb=8257.9, bsz=302.1, num_updates=48700, lr=6.40841e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=61, gb_free=14.9, wall=35809
2023-08-23 11:41:34 | INFO | train_inner | epoch 034:    178 / 1474 loss=1.86, trans_loss=4.707, nll_loss=1.889, w2v_ctc_loss=0.588, task_loss=1.377, contrastive_loss=0.071, total=4071.22, n_correct=2866.63, ppl=3.7, accuracy=70.412, wps=13260.8, ups=1.63, wpb=8142.4, bsz=295.1, num_updates=48800, lr=6.40184e-05, gnorm=0.527, clip=0, loss_scale=32, train_wall=61, gb_free=15.2, wall=35870
2023-08-23 11:42:36 | INFO | train_inner | epoch 034:    278 / 1474 loss=1.889, trans_loss=4.726, nll_loss=1.914, w2v_ctc_loss=0.586, task_loss=1.242, contrastive_loss=0.283, total=4237.89, n_correct=2963.93, ppl=3.77, accuracy=69.939, wps=13676.1, ups=1.61, wpb=8475.8, bsz=326.9, num_updates=48900, lr=6.39529e-05, gnorm=0.538, clip=0, loss_scale=32, train_wall=61, gb_free=10, wall=35932
2023-08-23 11:43:37 | INFO | train_inner | epoch 034:    378 / 1474 loss=1.867, trans_loss=4.71, nll_loss=1.894, w2v_ctc_loss=0.583, task_loss=1.244, contrastive_loss=0.167, total=4167, n_correct=2930.67, ppl=3.72, accuracy=70.33, wps=13485.5, ups=1.62, wpb=8334, bsz=319, num_updates=49000, lr=6.38877e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=61, gb_free=17, wall=35994
2023-08-23 11:44:39 | INFO | train_inner | epoch 034:    478 / 1474 loss=1.872, trans_loss=4.721, nll_loss=1.907, w2v_ctc_loss=0.602, task_loss=1.441, contrastive_loss=0.064, total=4071.65, n_correct=2851.18, ppl=3.75, accuracy=70.025, wps=13332.8, ups=1.64, wpb=8143.3, bsz=284.8, num_updates=49100, lr=6.38226e-05, gnorm=0.539, clip=0, loss_scale=32, train_wall=61, gb_free=11.2, wall=36055
2023-08-23 11:45:39 | INFO | train_inner | epoch 034:    578 / 1474 loss=1.861, trans_loss=4.709, nll_loss=1.892, w2v_ctc_loss=0.588, task_loss=1.336, contrastive_loss=0.066, total=4110.13, n_correct=2888.85, ppl=3.71, accuracy=70.286, wps=13533.1, ups=1.65, wpb=8220.3, bsz=299, num_updates=49200, lr=6.37577e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=60, gb_free=16.3, wall=36116
2023-08-23 11:46:40 | INFO | train_inner | epoch 034:    678 / 1474 loss=1.864, trans_loss=4.718, nll_loss=1.904, w2v_ctc_loss=0.59, task_loss=1.337, contrastive_loss=0.062, total=4128.65, n_correct=2898.58, ppl=3.74, accuracy=70.206, wps=13498.6, ups=1.63, wpb=8257.3, bsz=300.7, num_updates=49300, lr=6.3693e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=17.6, wall=36177
2023-08-23 11:47:42 | INFO | train_inner | epoch 034:    778 / 1474 loss=1.879, trans_loss=4.737, nll_loss=1.929, w2v_ctc_loss=0.59, task_loss=1.382, contrastive_loss=0.13, total=4075.69, n_correct=2844.07, ppl=3.81, accuracy=69.781, wps=13313.5, ups=1.63, wpb=8151.4, bsz=294.5, num_updates=49400, lr=6.36285e-05, gnorm=0.537, clip=0, loss_scale=32, train_wall=61, gb_free=17, wall=36238
2023-08-23 11:48:44 | INFO | train_inner | epoch 034:    878 / 1474 loss=1.874, trans_loss=4.727, nll_loss=1.916, w2v_ctc_loss=0.596, task_loss=1.392, contrastive_loss=0.088, total=4104.97, n_correct=2872.61, ppl=3.77, accuracy=69.979, wps=13255.9, ups=1.61, wpb=8209.9, bsz=296.3, num_updates=49500, lr=6.35642e-05, gnorm=0.544, clip=0, loss_scale=32, train_wall=61, gb_free=17.5, wall=36300
2023-08-23 11:49:45 | INFO | train_inner | epoch 034:    978 / 1474 loss=1.873, trans_loss=4.726, nll_loss=1.914, w2v_ctc_loss=0.6, task_loss=1.288, contrastive_loss=0.084, total=4168.94, n_correct=2914, ppl=3.77, accuracy=69.898, wps=13622.7, ups=1.63, wpb=8337.9, bsz=312.8, num_updates=49600, lr=6.35001e-05, gnorm=0.536, clip=0, loss_scale=32, train_wall=61, gb_free=14.6, wall=36361
2023-08-23 11:50:46 | INFO | train_inner | epoch 034:   1078 / 1474 loss=1.87, trans_loss=4.725, nll_loss=1.912, w2v_ctc_loss=0.599, task_loss=1.267, contrastive_loss=0.068, total=4155.12, n_correct=2909.28, ppl=3.76, accuracy=70.017, wps=13629.5, ups=1.64, wpb=8310.2, bsz=309.1, num_updates=49700, lr=6.34361e-05, gnorm=0.533, clip=0, loss_scale=32, train_wall=60, gb_free=16.5, wall=36422
2023-08-23 11:51:48 | INFO | train_inner | epoch 034:   1178 / 1474 loss=1.868, trans_loss=4.723, nll_loss=1.91, w2v_ctc_loss=0.591, task_loss=1.359, contrastive_loss=0.079, total=4096.48, n_correct=2867.77, ppl=3.76, accuracy=70.006, wps=13261.8, ups=1.62, wpb=8193, bsz=297.2, num_updates=49800, lr=6.33724e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=61, gb_free=16.3, wall=36484
2023-08-23 11:52:48 | INFO | train_inner | epoch 034:   1278 / 1474 loss=1.868, trans_loss=4.721, nll_loss=1.908, w2v_ctc_loss=0.595, task_loss=1.336, contrastive_loss=0.063, total=4149.03, n_correct=2904.73, ppl=3.75, accuracy=70.01, wps=13637.6, ups=1.64, wpb=8298.1, bsz=299.7, num_updates=49900, lr=6.33089e-05, gnorm=0.53, clip=0, loss_scale=32, train_wall=60, gb_free=16.1, wall=36545
2023-08-23 11:53:51 | INFO | train_inner | epoch 034:   1378 / 1474 loss=1.879, trans_loss=4.73, nll_loss=1.919, w2v_ctc_loss=0.601, task_loss=1.258, contrastive_loss=0.128, total=4200.34, n_correct=2932.76, ppl=3.78, accuracy=69.822, wps=13468.9, ups=1.6, wpb=8400.7, bsz=321.9, num_updates=50000, lr=6.32456e-05, gnorm=0.535, clip=0, loss_scale=32, train_wall=62, gb_free=14.7, wall=36607
2023-08-23 11:53:51 | INFO | fairseq_cli.train | Stopping training due to num_updates: 50000 >= max_update: 50000
2023-08-23 11:53:51 | INFO | fairseq_cli.train | begin validation on "dev_st" subset
2023-08-23 11:54:24 | INFO | dev_st | epoch 034 | valid on 'dev_st' subset | loss 3.964 | trans_loss 5.159 | nll_loss 2.413 | w2v_ctc_loss 1.372 | task_loss 4.662 | contrastive_loss 0.28 | total 4003.4 | n_correct 2678.7 | ppl 5.32 | accuracy 66.911 | uer 17.251 | wer 19.142 | raw_wer 19.142 | bleu 22.37 | wps 1646 | wpb 4003.4 | bsz 141.8 | num_updates 50000 | best_bleu 22.84
2023-08-23 11:54:24 | INFO | fairseq.checkpoint_utils | Preparing to save checkpoint for epoch 34 @ 50000 updates
2023-08-23 11:54:24 | INFO | fairseq.trainer | Saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_34_50000.pt
2023-08-23 11:54:26 | INFO | fairseq.trainer | Finished saving checkpoint to /mnt/zhangyh/fairseq-AT/egs/pretrain-all/checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_34_50000.pt
2023-08-23 11:54:31 | INFO | fairseq.checkpoint_utils | Saved checkpoint ./checkpoints/mustc/st/ende_shrink_v2_merge_large_0823_topCL_AT_sentence_mixup0307_alpha1.5_mt0.5_nogard/checkpoint_34_50000.pt (epoch 34 @ 50000 updates, score 22.37) (writing took 7.35492642398458 seconds)
2023-08-23 11:54:31 | INFO | fairseq_cli.train | end of epoch 34 (average epoch stats below)
2023-08-23 11:54:31 | INFO | train | epoch 034 | loss 1.871 | trans_loss 4.721 | nll_loss 1.908 | w2v_ctc_loss 0.593 | task_loss 1.325 | contrastive_loss 0.104 | total 4133.33 | n_correct 2895.98 | ppl 3.75 | accuracy 70.064 | wps 12744.7 | ups 1.54 | wpb 8266.7 | bsz 304.3 | num_updates 50000 | lr 6.32456e-05 | gnorm 0.535 | clip 0 | loss_scale 32 | train_wall 838 | gb_free 14.7 | wall 36648
2023-08-23 11:54:31 | INFO | fairseq_cli.train | done training in 36603.5 seconds
Exception in thread Thread-7:
Traceback (most recent call last):
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/threading.py", line 932, in _bootstrap_inner
Exception in thread Thread-6:
Traceback (most recent call last):
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/threading.py", line 932, in _bootstrap_inner
    self.run()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/tensorboardX/event_file_writer.py", line 202, in run
    data = self._queue.get(True, queue_wait_duration)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/queues.py", line 111, in get
Exception in thread Thread-3:
Traceback (most recent call last):
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/threading.py", line 932, in _bootstrap_inner
    self.run()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/tensorboardX/event_file_writer.py", line 202, in run
    res = self._recv_bytes()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 216, in recv_bytes
    self.run()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/site-packages/tensorboardX/event_file_writer.py", line 202, in run
    data = self._queue.get(True, queue_wait_duration)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/queues.py", line 111, in get
    data = self._queue.get(True, queue_wait_duration)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/queues.py", line 111, in get
    res = self._recv_bytes()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 216, in recv_bytes
    buf = self._recv_bytes(maxlength)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 414, in _recv_bytes
    buf = self._recv_bytes(maxlength)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 414, in _recv_bytes
    buf = self._recv(4)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 383, in _recv
    res = self._recv_bytes()
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 216, in recv_bytes
    raise EOFError
EOFError
    buf = self._recv_bytes(maxlength)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 414, in _recv_bytes
    buf = self._recv(4)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 383, in _recv
    raise EOFError
EOFError
    buf = self._recv(4)
  File "/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/connection.py", line 383, in _recv
    raise EOFError
EOFError
/mnt/zhangyh/miniconda3/envs/at/lib/python3.8/multiprocessing/resource_tracker.py:216: UserWarning: resource_tracker: There appear to be 1472 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
